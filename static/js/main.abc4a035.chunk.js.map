{"version":3,"sources":["landingPage/img/screenshot.png","landingPage/img/man.gif","landingPage/img/smile.gif","landingPage/img/sun.gif","components/frame/Frame.js","utils.js","components/frameList/FrameList.js","components/tools/penSize/PenSize.js","components/colorPalette/ColorPalette.js","components/tools/Tools.js","components/preview/Preview.js","components/FPS/FPS.js","hooks/usePrev.js","components/canvas/Canvas.js","components/tools/Pen.js","components/tools/PixelPen.js","components/tools/EraseAction.js","components/tools/AllPixelsSameColorAction.js","components/tools/FillColor.js","algorithms/drawLine.js","components/tools/DrawTriangle.js","algorithms/drawMidPointEllipse.js","algorithms/drawingCircle.js","components/tools/DrawCircle.js","algorithms/drawingRectangle.js","components/tools/DrawRectangle.js","components/tools/DrawFillRectangle.js","components/tools/VerticalMirrorPen.js","components/tools/ChooseColor.js","components/tools/LightenColor.js","components/tools/DarkenColor.js","components/tools/MoveAction.js","components/tools/DitheringAction.js","components/canvas/canvasScale/CanvasScale.js","toolNames.js","components/keyboardShortcuts/KeyboardShortcuts.js","components/canvas/cursorPosition/CursorPosition.js","components/tools/Stroke.js","components/export/Export.js","components/auth/Auth.js","components/app/App.js","landingPage/LandingPage.js","components/Root.js","index.js"],"names":["module","exports","__webpack_require__","p","Frame","_ref","active","checked","moving","hasDeleteButton","onClick","onDelete","onDouble","onNumClick","num","image","onMouseDown","handleClick","useCallback","react_default","a","createElement","className","concat","e","alt","src","stopPropagation","title","defaultProps","getRelativeClientFrameY","elem","y","targetRect","getBoundingClientRect","parentOffsetTop","top","offsetTop","getRelativeClientX","target","clientX","x","getRelativeClientY","getElemUnderCursor","Math","round","clientY","clientHeight","getRectSize","width","scale","floor","getRectCoords","canvasScale","rectSize","rectXBegin","rectYBegin","getCursorPosition","column","row","getRectCoordsFromEvent","targetRelativeClientY","targetRelativeClientX","hexToRGBA","str","result","exec","r","parseInt","g","b","rgbaToHEX","rgb","toString","slice","fillPixels","startX","startY","canvasWidth","canvasHeight","colorLayer","startColor","paintColor","pixelStack","matchStartColor","pixelPos","data","colorPixel","length","reachLeft","reachRight","newPos","pop","push","getRadius","x1","y1","x2","y2","centerX","centerY","sqrt","getCircleCenter","getHorizontalRadius","abs","getVerticalRadius","clamp","value","min","max","loadImage","onLoad","img","Image","addEventListener","loadImages","sources","Promise","all","map","resolve","even","val","odd","download","url","link","document","setAttribute","click","downloadFile","text","fileName","encodeURIComponent","FrameList","activeFrame","checkedFrames","propsFrames","frames","onAddFrame","onChange","onFrameClick","_useState","useState","_useState2","Object","slicedToArray","setFrames","movingFrameNum","useRef","frameClickRelativeY","frameClone","frameNumUnderCursor","handleDocumentMouseMove","current","movementY","movementX","targetClone","cloneNode","parentElement","appendChild","style","position","zIndex","newArr","objectSpread","useEffect","removeEventListener","handleMouseDown","handleMouseUp","nextFrames","toConsumableArray","movingFrame","frameUnderCursor","ind","removeChild","frame","frame_Frame","key","PenSize","onPenSizeAction","isPenSizeAction1","data-size","isPenSizeAction2","isPenSizeAction3","isPenSizeAction4","ColorPalette","props","assign","type","Tools","onDrawAction","onFillColorAction","onDrawTriangleAction","onEraseAction","onStrokeAction","onChooseColorAction","onDrawCircleAction","onDrawRectangleAction","onDrawFillRectangleAction","onMirrorPenAction","onAllPixelsSameColorAction","onPenAction","onLightenColorAction","onDarkenColorAction","onMoveAction","onDitheringAction","onPrimaryColorChange","onSecondaryColorChange","onColorChange","primaryColor","secondaryColor","isDrawAction","isEraseAction","isFillColorAction","isAllPixelsSameColorAction","isStrokeAction","isPenAction","isDrawRectangleAction","isDrawCircleAction","isDrawFillRectangleAction","isDrawTriangleAction","isLightenColorAction","isDarkenColorAction","isMoveAction","isChooseColorAction","isDitheringAction","isMirrorPenAction","colorPalette_ColorPalette","Preview","framesPerSecond","onFullScreenShow","frameInd","setFrameInd","currentFrame","previewRef","timer","setTimeout","nextFrame","clearTimeout","ref","onMouseOver","FPS","setFramesPerSecond","name","defaultValue","usePrev","CanvasContext","React","createContext","Canvas","children","clearImage","imgSrc","onMouseMove","height","onMouseEnter","onMouseLeave","canvasRef","prevScale","clearCanvas","getContext","clearRect","ctx","prevSmoothing","imageSmoothingEnabled","dScale","drawImage","dataUrl","toDataURL","Provider","Pen","onMouseUp","objectWithoutProperties","canvas","useContext","isMouseDown","getImgLink","handler","rect","left","lineWidth","penSize","lineTo","strokeStyle","currentColor","stroke","beginPath","arc","PI","fillStyle","fill","moveTo","setMouseDown","Function","prototype","propTypes","PropTypes","number","func","string","PixelPen","which","fillRect","EraseAction","AllPixelsSameColorAction","currentColorRGBA","imgData","getImageData","startingColor","i","putImageData","unsetMouseDown","FillColor","rgba","drawLine","cb","deltaX","deltaY","signX","signY","error","error2","DrawTriangle","rectEndX","setRectEndX","_useState3","_useState4","rectEndY","setRectEndY","imageData","requestAnimationFrame","plot","isFinite","currentColorRgba","_getRectCoords","setPixel","toggleMouseDown","drawMidPointEllipse","$rx","$ry","$xc","$yc","$x","$y","$d1","$dx","$dy","$d2","drawingCircle","radius","x0","y0","gap","delta","DrawCircle","circleEndX","setCircleEndX","circleEndY","setCircleEndY","circleCenter","horizontalRadius","verticalRadius","shiftKey","p1","p2","p3","p4","drawingRectangle","DrawRectangle","DrawFillRectangle","outerRectWidth","outerRectHeight","horizontalSide1","horizontalSide2","verticalSide1","verticalSide2","innerRectWidth","innerRectHeight","innerSide1","innerSide2","VerticalMirrorPen","offsetHeight","offsetWidth","ChooseColor","getColorValue","red","green","blue","alpha","chosenColor","LightenColor","mouseUpHandler","mouseMoveHandler","currentX","currentY","rectCoords","DarkenColor","MoveAction","startRelativeClientX","setStartRelativeClientX","startRelativeClientY","setStartRelativeClientY","xRelativeToRect","yRelativeToRect","rectsNum","innerFirstRectColumn","innerFirstRectRow","j","rowNum","colNum","any","CanvasScale","options","id","htmlFor","toolNames","PEN_SIZE_1","PEN_SIZE_2","PEN_SIZE_3","PEN_SIZE_4","PEN_TOOL","ERASER_TOOL","COLOR_BUCKET_TOOL","MAGIC_COLOR_BUCKET_TOOL","DRAW_TRIANGLE_TOOL","COLOR_PICKER_TOOL","RECTANGLE_TOOL","CIRCLE_TOOL","LIGHTEN_TOOL","DARKEN_TOOL","DITHERING_TOOL","STROKE_TOOL","MIRROR_PEN_TOOL","MOVE_TOOL","FEATHER_PEN_TOOL","ADD_NEW_FRAME","CHANGE_COLORS","FILL_RECTANGLE_TOOL","KeyboardShortcuts","keyboardMap","isModalWindowOpened","onOpen","querySelector","classList","add","remove","CursorPosition","isOverCanvas","Stroke","strokeEndX","setStrokeEndX","strokeEndY","setStrokeEndY","Export","onPNGExport","onPNGSetExport","onGIFExport","onResetClick","onAPNGExport","onLoadPiskel","onSave","Auth","clientId","onLoginSuccess","onLoginFail","onLogout","user","imageUrl","google_login","buttonText","isSignedIn","onSuccess","onFailure","cookiePolicy","onLogoutSuccess","scales","APP_VERSION","useSetToolAction","isPenSizeAction","isColorPaletteAction","toolAction","setToolAction","toggleToolAction","keyName","keyValue","newObj","_toPropertyKey","keys","forEach","useSetPenSizeAction","penSizeAction","setPenSizeAction","togglePenSizeAction","getFromStorage","def","JSON","parse","localStorage","getItem","err","appendObjectToStorage","storage","obj","state","setItem","stringify","defaultKeyboardMap","_defaultKeyboardMap","defineProperty","initialFrames","App","_useState5","_useState6","setKeyboardMap","_useState7","_useState8","_useState9","_useState10","prevFrames","_useState11","_useState12","setActiveFrame","prevActiveFrameNum","framesNums","framesNumsObj","_useState13","_useState14","framesForPreview","setFramesForPreview","_useSetToolAction","_useSetPenSizeAction","_useState15","_useState16","setPenSize","_useState17","_useState18","setPrimaryColor","_useState19","_useState20","setSecondaryColor","_useState21","_useState22","setCanvasScale","_useState23","_useState24","startPos","setStartPos","_useState25","_useState26","curPos","setCurPos","_useState27","_useState28","setRectSize","_useState29","_useState30","setIsOverCanvas","_useState31","_useState32","setUser","handleLoginSuccess","response","profileObj","handleLogout","resetState","0","removeItem","restoreSession","st","activeToolAction","appState","editKey","newKey","window","prompt","values","keyboardMapNext","indexOf","message","confirm","oldKey","find","handleUnload","handleFramesChange","newFrames","addNewFrame","copy","deleteFrame","splice","duplicateFrame","addFrameToPreview","changeColors","handleKeyDown","ctrlKey","onCanvasChange","handleLoadPiskel","file","files","fileReader","FileReader","onload","fe","_JSON$parse","decodeURIComponent","appVersion","piskel","alert","readAsText","handleDownloadPiskelClone","Date","now","auth_Auth","react_router_dom","to","penSize_PenSize","getAttribute","tools_Tools","frameList_FrameList","keyboardShortcuts_KeyboardShortcuts","canvas_Canvas","pos","tools_PixelPen","tools_EraseAction","tools_Stroke","tools_DrawCircle","tools_DrawRectangle","tools_DrawFillRectangle","tools_VerticalMirrorPen","tools_Pen","tools_FillColor","tools_DrawTriangle","tools_ChooseColor","tools_LightenColor","tools_DarkenColor","tools_MoveAction","DitheringAction","tools_AllPixelsSameColorAction","preview_Preview","filter","el","requestFullscreen","FPS_FPS","export_Export","imageSources","asyncToGenerator","regenerator_default","mark","_callee","gif","wrap","_context","prev","next","GIF","sent","imgEl","addFrame","delay","on","blob","URL","createObjectURL","render","stop","_callee2","images","imagesBuffer","pngBuffer","_context2","buffer","UPNG","encode","Blob","canvasScale_CanvasScale","deltaScale","cursorPosition_CursorPosition","LandingPage","screenshot","man","smile","sun","href","Root","basename","process","react_router","path","exact","component","ReactDOM","components_Root","getElementById"],"mappings":"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","file":"static/js/main.abc4a035.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/screenshot.c4fe95d6.png\";","module.exports = __webpack_public_path__ + \"static/media/man.1cb9bd25.gif\";","module.exports = __webpack_public_path__ + \"static/media/smile.b441c2a8.gif\";","module.exports = __webpack_public_path__ + \"static/media/sun.43de2d59.gif\";","import React, { useCallback } from 'react';\nimport './frame.css';\nimport PropTypes from 'prop-types';\n\nfunction Frame({\n  active,\n  checked,\n  moving,\n  hasDeleteButton,\n  onClick,\n  onDelete,\n  onDouble,\n  onNumClick,\n  num,\n  image,\n  onMouseDown,\n}) {\n  const handleDelete = (e) => {\n    e.stopPropagation();\n    onDelete(num, e);\n  };\n  const handleDouble = (e) => {\n    e.stopPropagation();\n    onDouble(num, e);\n  };\n  const handleNumClick = (e) => {\n    e.stopPropagation();\n\n    onNumClick(num, e);\n  };\n\n  const handleMouseDown = (e) => {\n    onMouseDown(num, e);\n  };\n\n  const handleClick = useCallback(() => {\n    onClick(num);\n  }, [onClick, num]);\n\n  return (\n    <div\n      className={`frame ${active ? 'frame--active' : ''} ${moving ? 'frame--moving' : ''}`}\n      onMouseDown={handleMouseDown}\n      onClick={handleClick}\n    >\n      {image && <img alt=\"pic\" className=\"frame__img\" src={image} />}\n\n      <button\n        onClick={handleDelete}\n        onMouseDown={e => e.stopPropagation()}\n        className={`delete-action ${!hasDeleteButton ? 'delete-action--hidden' : ''}`}\n        // className=\"delete-action\"\n        title=\"Delete this frame\"\n      />\n      <button\n        onClick={handleDouble}\n        onMouseDown={e => e.stopPropagation()}\n        className=\"copy-action\"\n        title=\"Duplicate this frame\"\n      />\n      <button\n        onClick={handleNumClick}\n        onMouseDown={e => e.stopPropagation()}\n        className={`add-to-animation-action ${!checked ? 'add-to-animation-action--inactive' : ''}`}\n        title=\"Toggle for preview\"\n      >\n        {num + 1}\n      </button>\n    </div>\n  );\n}\n\nFrame.propTypes = {\n  active: PropTypes.bool,\n  checked: PropTypes.bool,\n  hasDeleteButton: PropTypes.bool,\n  moving: PropTypes.bool,\n  onClick: PropTypes.func,\n  onDelete: PropTypes.func,\n  onDouble: PropTypes.func,\n  onMouseDown: PropTypes.func,\n  onNumClick: PropTypes.func,\n  onMouseUp: PropTypes.func,\n  onMouseMove: PropTypes.func,\n  num: PropTypes.number,\n  image: PropTypes.any,\n};\n\nFrame.defaultProps = {\n  active: false,\n  checked: false,\n  moving: false,\n  hasDeleteButton: true,\n};\n\nexport default Frame;\n","export const getRelativeClientFrameY = (elem, y) => {\n  const targetRect = elem.getBoundingClientRect();\n  const parentOffsetTop = targetRect.top - elem.offsetTop;\n  const relativeY = y - targetRect.y;\n\n  return relativeY + parentOffsetTop;\n};\n\nexport const getRelativeClientX = (e) => {\n  const targetRect = e.target.getBoundingClientRect();\n\n  return e.clientX - targetRect.x;\n};\n\nexport const getRelativeClientY = (elem, y) => {\n  const targetRect = elem.getBoundingClientRect();\n\n  return y - targetRect.y;\n};\n\nexport const getElemUnderCursor = ((e, elem) => Math.round((e.clientY - getRelativeClientFrameY(elem, e.clientY)) / elem.clientHeight));\n\nexport const getRectSize = (width, scale) => Math.floor(width / scale);\n\nexport const getRectCoords = (x, y, canvasScale) => {\n  const rectSize = getRectSize(640, canvasScale);\n  const targetColumn = Math.floor(x / rectSize);\n  const targetRow = Math.floor(y / rectSize);\n\n  return { rectXBegin: targetColumn * rectSize, rectYBegin: targetRow * rectSize };\n};\n\nexport const getCursorPosition = (x, y, canvasScale) => {\n  const rectSize = getRectSize(640, canvasScale);\n  const targetColumn = Math.floor(x / rectSize);\n  const targetRow = Math.floor(y / rectSize);\n\n  return { column: targetColumn, row: targetRow };\n};\n\nexport const getRectCoordsFromEvent = (e, canvasScale) => {\n  const targetRelativeClientY = getRelativeClientY(e.target, e.clientY);\n  const targetRelativeClientX = getRelativeClientX(e);\n\n  return getRectCoords(targetRelativeClientX, targetRelativeClientY, canvasScale);\n};\n\nexport const hexToRGBA = (str) => {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(str);\n\n  return result ? {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16),\n    a: 255,\n  } : null;\n};\n\n// eslint-disable-next-line no-bitwise\nexport const rgbaToHEX = rgb => `#${(`000000${((rgb.r << 16) | (rgb.g << 8) | rgb.b).toString(16)}`).slice(-6)}`;\n\nexport const fillPixels = (startX, startY, canvasWidth, canvasHeight, colorLayer, startColor, paintColor) => {\n  const pixelStack = [[startX, startY]];\n\n  function matchStartColor(pixelPos) {\n    const r = colorLayer.data[pixelPos];\n    const g = colorLayer.data[pixelPos + 1];\n    const b = colorLayer.data[pixelPos + 2];\n    const a = colorLayer.data[pixelPos + 3];\n\n    return (r === startColor.r && g === startColor.g && b === startColor.b && a === startColor.a);\n  }\n\n  function colorPixel(pixelPos) {\n    // eslint-disable-next-line no-param-reassign\n    colorLayer.data[pixelPos] = paintColor.r;\n    // eslint-disable-next-line no-param-reassign\n    colorLayer.data[pixelPos + 1] = paintColor.g;\n    // eslint-disable-next-line no-param-reassign\n    colorLayer.data[pixelPos + 2] = paintColor.b;\n    // eslint-disable-next-line no-param-reassign\n    colorLayer.data[pixelPos + 3] = paintColor.a;\n  }\n\n  while (pixelStack.length) {\n    let reachLeft;\n    let reachRight;\n    const newPos = pixelStack.pop();\n    const x = newPos[0];\n    let y = newPos[1];\n\n    let pixelPos = (y * canvasWidth + x) * 4;\n\n    // eslint-disable-next-line no-plusplus\n    while (y-- >= 0 && matchStartColor(pixelPos)) {\n      pixelPos -= canvasWidth * 4;\n    }\n\n    pixelPos += canvasWidth * 4;\n    y += 1;\n    reachLeft = false;\n    reachRight = false;\n    // eslint-disable-next-line no-plusplus\n    while (y++ < canvasHeight - 1 && matchStartColor(pixelPos)) {\n      colorPixel(pixelPos);\n\n      if (x > 0) {\n        if (matchStartColor(pixelPos - 4)) {\n          if (!reachLeft) {\n            pixelStack.push([x - 1, y]);\n            reachLeft = true;\n          }\n        } else if (reachLeft) {\n          reachLeft = false;\n        }\n      }\n\n      if (x < canvasWidth - 1) {\n        if (matchStartColor(pixelPos + 4)) {\n          if (!reachRight) {\n            pixelStack.push([x + 1, y]);\n            reachRight = true;\n          }\n        } else if (reachRight) {\n          reachRight = false;\n        }\n      }\n\n      pixelPos += canvasWidth * 4;\n    }\n  }\n};\n\nexport const getRadius = (x1, y1, x2, y2) => {\n  //    (A; R)   (x  a)2 + (y  b)2 = R2,\n  //  a  b    A   (A; R) .\n  let centerX = x1 + Math.floor((x2 - x1) / 2);\n  let centerY = y1 + Math.floor((y2 - y1) / 2);\n  if (x1 === x2) {\n    centerX = x1;\n  }\n\n  if (y1 === y2) {\n    centerY = y1;\n  }\n\n  return Math.floor(Math.sqrt((x2 - centerX) * (x2 - centerX) + (y2 - centerY) * (y2 - centerY)));\n};\n\nexport const getCircleCenter = (x1, y1, x2, y2) => {\n  let centerX = x1 + Math.floor((x2 - x1) / 2);\n  let centerY = y1 + Math.floor((y2 - y1) / 2);\n\n  if (x1 === x2) {\n    centerX = x1;\n  }\n\n  if (y1 === y2) {\n    centerY = y1;\n  }\n\n  return { x: centerX, y: centerY };\n};\n\nexport const getHorizontalRadius = (x1, x2) => Math.floor(Math.abs(x1 - x2) / 2);\n\nexport const getVerticalRadius = (y1, y2) => Math.floor(Math.abs(y1 - y2) / 2);\n\nexport const clamp = (value, min, max) => Math.min(Math.max(value, min), max);\n\nexport const loadImage = (src, onLoad) => {\n  const img = new Image();\n\n  img.src = src;\n  img.addEventListener('load', onLoad);\n\n  return img;\n};\n\nexport const loadImages = (sources) => {\n  const loadImageAsync = src => new Promise(resolve => loadImage(src, e => resolve(e.target)));\n\n  return Promise.all(sources.map(loadImageAsync));\n};\n\nexport const even = val => val % 2 === 0;\n\nexport const odd = val => !even(val);\n\nexport const download = (url, title) => {\n  const link = document.createElement('a');\n\n  link.setAttribute('href', url);\n  link.setAttribute('download', title);\n  link.click();\n};\n\nexport const downloadFile = (text, fileName) => {\n  const link = document.createElement('a');\n\n  link.setAttribute('href', `data:text/plain;charset=utf-8,${encodeURIComponent(text)}`);\n  link.setAttribute('download', fileName);\n  link.click();\n};\n","import React, {\n  useCallback,\n  useState,\n  useRef,\n  useEffect,\n} from 'react';\nimport PropTypes from 'prop-types';\n\nimport Frame from '../frame/Frame';\nimport './frameList.css';\nimport { clamp, getElemUnderCursor, getRelativeClientFrameY } from '../../utils';\n\nfunction FrameList({\n  activeFrame,\n  checkedFrames,\n  onDelete,\n  onDouble,\n  frames: propsFrames,\n  onAddFrame,\n  onChange,\n  onFrameClick,\n  onNumClick,\n}) {\n  const [frames, setFrames] = useState(propsFrames);\n  const movingFrameNum = useRef(null);\n  const frameClickRelativeY = useRef(null);\n  const frameClone = useRef(null);\n  const frameNumUnderCursor = useRef(-1);\n  const handleDocumentMouseMove = useCallback((e) => {\n    if (frameClickRelativeY.current === null || (e.movementY === 0 && e.movementX === 0)) {\n      return;\n    }\n\n    if (!frameClone.current) {\n      const targetClone = e.target.cloneNode(true);\n\n      frameClone.current = targetClone;\n\n      e.target.parentElement.appendChild(targetClone);\n      targetClone.style.position = 'absolute';\n      targetClone.style.zIndex = '10';\n    }\n\n    frameClone.current.style.top = `${e.clientY - frameClickRelativeY.current}px`;\n    frameNumUnderCursor.current = getElemUnderCursor(e, frameClone.current);\n\n    // Ignore moving clone over its position among frames\n    if (frames[frameNumUnderCursor.current] && frames[frameNumUnderCursor.current].moving) {\n      return;\n    }\n\n    frameNumUnderCursor.current = clamp(frameNumUnderCursor.current, 0, frames.length - 1);\n\n    const newArr = frames.map(elem => ({\n      ...elem,\n      moving: false,\n    }));\n\n    newArr[frameNumUnderCursor.current] = {\n      ...newArr[frameNumUnderCursor.current],\n      moving: true,\n    };\n\n    setFrames(newArr);\n  }, [frames]);\n\n  useEffect(() => {\n    document.addEventListener('mousemove', handleDocumentMouseMove);\n\n    return () => document.removeEventListener('mousemove', handleDocumentMouseMove);\n  }, [handleDocumentMouseMove]);\n\n  const handleMouseDown = useCallback((num, e) => {\n    frameClickRelativeY.current = getRelativeClientFrameY(e.target, e.clientY);\n    movingFrameNum.current = num;\n  }, []);\n\n  const handleMouseUp = useCallback(() => {\n    if (!frameClone.current) {\n      frameClickRelativeY.current = null;\n      movingFrameNum.current = null;\n\n      return;\n    }\n\n    let nextFrames = [...frames];\n    const movingFrame = nextFrames[movingFrameNum.current];\n    const frameUnderCursor = nextFrames[frameNumUnderCursor.current];\n\n    nextFrames[frameNumUnderCursor.current] = {\n      ...movingFrame,\n      moving: false,\n    };\n    nextFrames[movingFrameNum.current] = {\n      ...frameUnderCursor,\n      moving: false,\n    };\n    // Update indexes of all frames after changing positions\n    nextFrames = nextFrames.map((elem, ind) => ({\n      ...elem,\n      num: ind,\n    }));\n\n    frameClone.current.parentElement.removeChild(frameClone.current);\n\n    onChange(nextFrames);\n\n    frameClickRelativeY.current = null;\n    movingFrameNum.current = null;\n    frameClone.current = null;\n    frameNumUnderCursor.current = -1;\n  }, [frames, onChange]);\n\n  useEffect(() => {\n    document.addEventListener('mouseup', handleMouseUp);\n\n    return () => document.removeEventListener('mouseup', handleMouseUp);\n  }, [handleMouseUp]);\n\n  useEffect(() => {\n    setFrames(propsFrames);\n  }, [propsFrames]);\n\n  const hasDeleteButton = frames.length > 1;\n\n  return (\n    <div className=\"frame-list-wrapper\">\n      <div className=\"frame-list\">\n        {frames.map(frame => (\n          <Frame\n            active={activeFrame === frame.num}\n            checked={checkedFrames[frame.num]}\n            key={frame.num}\n            num={frame.num}\n            hasDeleteButton={hasDeleteButton}\n            moving={frame.moving}\n            image={frame.image}\n            onClick={onFrameClick}\n            onNumClick={onNumClick}\n            onDelete={onDelete}\n            onDouble={onDouble}\n            onMouseDown={handleMouseDown}\n          />\n        ))}\n        <button className=\"add-frame-button\" onClick={onAddFrame}>Add a new frame</button>\n      </div>\n    </div>\n  );\n}\n\nFrameList.propTypes = {\n  activeFrame: PropTypes.number,\n  checkedFrames: PropTypes.object,\n  frames: PropTypes.arrayOf(\n    PropTypes.shape({\n      num: PropTypes.number,\n      image: PropTypes.any,\n      moving: PropTypes.bool,\n      hasDeleteButton: PropTypes.bool,\n      key: PropTypes.number,\n    }),\n  ),\n  onAddFrame: PropTypes.func,\n  onChange: PropTypes.func,\n  onDelete: PropTypes.func,\n  onDouble: PropTypes.func,\n  onFrameClick: PropTypes.func,\n  onNumClick: PropTypes.func,\n};\n\nFrameList.defaultProps = {};\n\nexport default FrameList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './penSize.css';\n\nfunction PenSize({\n  active,\n  onPenSizeAction,\n}) {\n  return (\n      <div className=\"pen-size\" onClick={onPenSizeAction} title=\"Pen size from 1 to 4 pixels\">\n        <div className={`pen-size__item pen-size__itemS ${active.isPenSizeAction1 ? 'pen-size__item--active' : ''} `}>\n          <div data-size='1' />\n        </div>\n        <div className={`pen-size__item pen-size__itemM ${active.isPenSizeAction2 ? 'pen-size__item--active' : ''} `}>\n          <div data-size='2' />\n        </div>\n        <div className={`pen-size__item pen-size__itemL ${active.isPenSizeAction3 ? 'pen-size__item--active' : ''} `}>\n          <div data-size='3' />\n        </div>\n        <div className={`pen-size__item pen-size__itemXL ${active.isPenSizeAction4 ? 'pen-size__item--active' : ''} `}>\n          <div data-size='4' />\n        </div>\n      </div>\n  );\n}\n\nPenSize.propTypes = {\n  active: PropTypes.shape({\n    isPenSizeAction1: PropTypes.bool,\n    isPenSizeAction2: PropTypes.bool,\n    isPenSizeAction3: PropTypes.bool,\n    isPenSizeAction4: PropTypes.bool,\n  }),\n  onPenSizeAction: PropTypes.func,\n};\n\nPenSize.defaultProps = {\n  active: false,\n};\n\nexport default PenSize;\n","import React from 'react';\nimport './colorPalette.css';\n\nfunction ColorPalette(props) {\n  return (\n    <input className=\"color-palette\" type=\"color\" {...props} />\n  );\n}\n\nexport default ColorPalette;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ColorPalette from '../colorPalette/ColorPalette';\n\nimport './tools.css';\n\nfunction Tools({\n  active,\n  onDrawAction,\n  onFillColorAction,\n  onDrawTriangleAction,\n  onEraseAction,\n  onStrokeAction,\n  onChooseColorAction,\n  onDrawCircleAction,\n  onDrawRectangleAction,\n  onDrawFillRectangleAction,\n  onMirrorPenAction,\n  onAllPixelsSameColorAction,\n  onPenAction,\n  onLightenColorAction,\n  onDarkenColorAction,\n  onMoveAction,\n  onDitheringAction,\n  onPrimaryColorChange,\n  onSecondaryColorChange,\n  onColorChange,\n  primaryColor,\n  secondaryColor,\n}) {\n  return (\n    <div className=\"tools-wrapper\">\n      <ul className=\"tools\">\n        <li>\n          <div className={`tools__item ${active.isDrawAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"draw-action\"\n              onClick={onDrawAction}\n              title=\"Pen tool (P)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isEraseAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"erase-action\"\n              onClick={onEraseAction}\n              title=\"Eraser tool (E)\"\n            />\n          </div>\n        </li>\n        <li>\n          <div className={`tools__item ${active.isFillColorAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"fill-color-action\"\n              onClick={onFillColorAction}\n              title=\"Paint bucket tool (B)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isAllPixelsSameColorAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"fill-pixels-same-color-action\"\n              onClick={onAllPixelsSameColorAction}\n              title=\"Paint all pixels at the same color (A)\"\n            />\n          </div>\n        </li>\n        <li>\n          <div className={`tools__item ${active.isStrokeAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"stroke-action\"\n              onClick={onStrokeAction}\n              title=\"Stroke tool (L)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isPenAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"pen-action\"\n              onClick={onPenAction}\n              title=\"Feather pen tool (D)\"\n            />\n          </div>\n        </li>\n        <li>\n          <div className={`tools__item ${active.isDrawRectangleAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"rectangle-action\"\n              onClick={onDrawRectangleAction}\n              title=\"Rectangle tool (R)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isDrawCircleAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"circle-action\"\n              onClick={onDrawCircleAction}\n              title=\"Circle tool (C). Keep SHIFT for 1 to 1 ratio\"\n            />\n          </div>\n        </li>\n        <li>\n          <div className={`tools__item ${active.isDrawFillRectangleAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"fill-rectangle-action\"\n              onClick={onDrawFillRectangleAction}\n              title=\"Fill rectangle tool (F)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isDrawTriangleAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"triangle-action\"\n              onClick={onDrawTriangleAction}\n              title=\"Triangle tool (H)\"\n            />\n          </div>\n        </li>\n        <li>\n          <div className={`tools__item ${active.isLightenColorAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"lighten-action\"\n              onClick={onLightenColorAction}\n              title=\"Lighten tool (U)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isDarkenColorAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"darken-action\"\n              onClick={onDarkenColorAction}\n              title=\"Darken tool (I)\"\n            />\n          </div>\n        </li>\n        <li>\n          <div className={`tools__item ${active.isMoveAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"move-action\"\n              onClick={onMoveAction}\n              title=\"Move tool (M)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isChooseColorAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"choose-color-action\"\n              onClick={onChooseColorAction}\n              title=\"Color picker (O)\"\n            />\n          </div>\n        </li>\n        <li>\n          <div className={`tools__item ${active.isDitheringAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"dithering-action\"\n              onClick={onDitheringAction}\n              title=\"Dithering tool (T)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isMirrorPenAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"mirror-action\"\n              onClick={onMirrorPenAction}\n              title='Vertical mirror tool (V). Keep SHIFT to use horizontal axis' />\n          </div>\n        </li>\n      </ul>\n      <div className=\"color-palette-wrapper\">\n        <div className=\"color-palette__primary\">\n          <ColorPalette\n            onChange={onPrimaryColorChange}\n            value={primaryColor}\n            title=\"Primary color\"\n          />\n        </div>\n        <div className=\"color-palette__secondary\">\n          <ColorPalette\n            onChange={onSecondaryColorChange}\n            value={secondaryColor}\n            title=\"Secondary color\"\n          />\n        </div>\n        <button\n          className=\"color-change\"\n          onClick={onColorChange}\n          title=\"Swap colors (X)\"\n        />\n      </div>\n    </div>\n  );\n}\n\nTools.propTypes = {\n  active: PropTypes.shape({\n    isChooseColorAction: PropTypes.bool,\n    isColorPaletteAction: PropTypes.bool,\n    isFillColorAction: PropTypes.bool,\n    isDrawCircleAction: PropTypes.bool,\n    isDrawRectangleAction: PropTypes.bool,\n    isDrawFillRectangleAction: PropTypes.bool,\n    isAllPixelsSameColorAction: PropTypes.bool,\n    isPenAction: PropTypes.bool,\n    isDitheringAction: PropTypes.bool,\n    isMirrorPenAction: PropTypes.bool,\n    isEraseAction: PropTypes.bool,\n    isStrokeAction: PropTypes.bool,\n    isLightenColorAction: PropTypes.bool,\n    isDarkenColorAction: PropTypes.bool,\n    isMoveAction: PropTypes.bool,\n    isDrawTriangleAction: PropTypes.bool,\n  }),\n  onDrawAction: PropTypes.func,\n  onFillColorAction: PropTypes.func,\n  onDrawTriangleAction: PropTypes.func,\n  onAllPixelsSameColorAction: PropTypes.func,\n  onDrawFillRectangleAction: PropTypes.func,\n  onDitheringAction: PropTypes.func,\n  onEraseAction: PropTypes.func,\n  onPenAction: PropTypes.func,\n  onStrokeAction: PropTypes.func,\n  onDrawCircleAction: PropTypes.func,\n  onDrawRectangleAction: PropTypes.func,\n  onMirrorPenAction: PropTypes.func,\n  onChooseColorAction: PropTypes.func,\n  onLightenColorAction: PropTypes.func,\n  onDarkenColorAction: PropTypes.func,\n  onMoveAction: PropTypes.func,\n  onColorPaletteShow: PropTypes.func,\n  currentColor: PropTypes.string,\n  onPrimaryColorChange: PropTypes.func,\n  onColorChange: PropTypes.func,\n  onSecondaryColorChange: PropTypes.func,\n  primaryColor: PropTypes.string,\n  secondaryColor: PropTypes.string,\n};\n\nTools.defaultProps = {\n  active: false,\n};\n\nexport default Tools;\n","import React, { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport './preview.css';\n\nfunction Preview({\n  frames, framesPerSecond, onFullScreenShow,\n}) {\n  const [frameInd, setFrameInd] = useState(0);\n  const currentFrame = frames[frameInd];\n  const previewRef = useRef(null);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      const nextFrame = frameInd < frames.length - 1\n        ? frameInd + 1\n        : 0;\n\n      setFrameInd(nextFrame);\n    }, 1000 / framesPerSecond);\n\n    return () => clearTimeout(timer);\n  }, [framesPerSecond, frameInd, frames]);\n  const getTooltip = (() => <span className=\"tooltip\">Full screen preview</span>);\n\n  return (\n    <div className=\"fullscreen-preview\" ref={previewRef}>\n      <div className=\"preview\">\n        {currentFrame && currentFrame.image\n          ? <img className=\"frame__img-active\" src={currentFrame.image} alt=\"Frame\" />\n          : <div className=\"emptyFrame\" />\n        }\n        <button\n          onClick={ e => onFullScreenShow(previewRef.current, e)}\n          onMouseOver={getTooltip}\n          className=\"full-screen-action\"\n          title=\"Full screen preview\"\n        />\n      </div>\n    </div>\n  );\n}\n\nPreview.propTypes = {\n  frames: PropTypes.arrayOf(\n    PropTypes.shape({\n      num: PropTypes.number,\n      image: PropTypes.any,\n    }),\n  ),\n  framesPerSecond: PropTypes.number,\n  onFullScreenShow: PropTypes.func,\n  onExportButton: PropTypes.func,\n};\n\nexport default Preview;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport './fps.css';\n\nfunction FPS({ onChange }) {\n  const [framesPerSecond, setFramesPerSecond] = useState(1);\n  return (\n    <div className=\"FPS-wrapper\">\n      <span>{framesPerSecond} FPS</span>\n      <input type=\"range\" name=\"speed\" min={1} max={24} defaultValue={1} onChange={ (e) => {\n        setFramesPerSecond(+e.target.value);\n        onChange(framesPerSecond);\n      }} />\n    </div>\n  );\n}\n\nFPS.propTypes = {\n  onChange: PropTypes.func,\n};\n\nexport default FPS;\n","import { useRef, useEffect } from 'react';\n\nfunction usePrev(value) {\n  // The ref object is a generic container whose current property is mutable ...\n  // ... and can hold any value, similar to an instance property on a class\n  const ref = useRef(null);\n\n  // Store current value in ref\n  useEffect(() => {\n    ref.current = value;\n  }, [value]); // Only re-run if value changes\n\n  // Return previous value (happens before update in useEffect above)\n  return ref.current;\n}\n\nexport default usePrev;\n","import React, { useEffect, useCallback, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport './canvas.css';\nimport usePrev from '../../hooks/usePrev';\nimport { loadImage } from '../../utils';\n\nexport const CanvasContext = React.createContext(null);\n\nfunction Canvas({\n  active,\n  children,\n  className,\n  clearImage,\n  imgSrc,\n  onChange,\n  onMouseDown,\n  onMouseMove,\n  width,\n  height,\n  onMouseEnter,\n  onMouseLeave,\n  scale,\n}) {\n  const canvasRef = useRef(null);\n  const prevScale = usePrev(scale);\n\n  const clearCanvas = useCallback(\n    () => canvasRef.current.getContext('2d').clearRect(0, 0, width, height),\n    [height, width],\n  );\n\n  // eslint-disable-next-line consistent-return\n  useEffect(() => {\n    const onLoad = (e) => {\n      clearCanvas();\n      const img = e.target;\n      const ctx = canvasRef.current.getContext('2d');\n\n      if (clearImage) {\n        clearCanvas();\n      }\n\n      if (scale !== prevScale) {\n        const prevSmoothing = ctx.imageSmoothingEnabled;\n        const dScale = scale / prevScale;\n\n        clearCanvas();\n        ctx.imageSmoothingEnabled = false;\n        ctx.drawImage(img, 0, 0, img.width * dScale, img.height * dScale);\n        ctx.imageSmoothingEnabled = prevSmoothing;\n      } else {\n        ctx.drawImage(img, 0, 0);\n      }\n\n      const dataUrl = canvasRef.current.toDataURL();\n\n      // Prevent extra changes\n      if (imgSrc !== dataUrl) {\n        onChange(dataUrl);\n      }\n    };\n\n    // If image changes, load it\n    if (imgSrc) {\n      const img = loadImage(imgSrc, onLoad);\n\n      return () => img.removeEventListener('load', onLoad);\n    }\n\n    if (clearImage) {\n      clearCanvas();\n    }\n  }, [clearCanvas, clearImage, height, imgSrc, onChange, prevScale, scale, width]);\n  return (\n    <canvas\n      className={\n        `canvas\n        ${className}\n        ${active.isEraseAction ? 'canvas__erase' : ''}\n        ${active.isDrawAction ? 'canvas__draw' : ''}\n        ${active.isChooseColorAction ? 'canvas__picker' : ''}\n        ${active.isFillColorAction ? 'canvas__fill-color' : ''}\n        ${active.isMoveAction ? 'canvas__move' : ''}\n        `}\n      ref={canvasRef}\n      width={`${width}px`}\n      height={`${height}px`}\n      onMouseDown={onMouseDown}\n      onMouseMove={onMouseMove}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      <CanvasContext.Provider value={canvasRef.current}>\n        {children}\n      </CanvasContext.Provider>\n    </canvas>\n  );\n}\n\nCanvas.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  clearImage: PropTypes.bool,\n  imgSrc: PropTypes.string,\n  height: PropTypes.number,\n  name: PropTypes.string,\n  width: PropTypes.number,\n  onMouseDown: PropTypes.func,\n  onMouseMove: PropTypes.func,\n  onMouseEnter: PropTypes.func,\n  onMouseLeave: PropTypes.func,\n  onChange: PropTypes.func,\n  scale: PropTypes.number,\n  active: PropTypes.shape({\n    isDrawAction: PropTypes.bool,\n    isFillColorAction: PropTypes.bool,\n    isEraseAction: PropTypes.bool,\n    isChooseColorAction: PropTypes.bool,\n    isMoveAction: PropTypes.bool,\n  }),\n};\n\nexport default Canvas;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\n\nfunction Pen({ onMouseUp, ...props }) {\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    if (isMouseDown.current) {\n      onMouseUp(canvas.toDataURL());\n\n      isMouseDown.current = !isMouseDown.current;\n    }\n  }, [onMouseUp, canvas]);\n\n  const handler = useCallback((e) => {\n    const ctx = canvas.getContext('2d');\n    const rect = canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    if (isMouseDown.current) {\n      ctx.lineWidth = props.penSize / 8;\n      ctx.lineTo(x, y);\n      ctx.strokeStyle = props.currentColor;\n      ctx.stroke();\n      ctx.beginPath();\n      ctx.arc(x, y, props.penSize / 16, 0, Math.PI * 2);\n      ctx.fillStyle = props.currentColor;\n      ctx.fill();\n      ctx.beginPath();\n      ctx.moveTo(x, y);\n    } else {\n      ctx.beginPath();\n    }\n  }, [canvas, props.penSize, props.currentColor]);\n\n  const setMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    handler(e);\n  }, [handler]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', setMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', setMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, setMouseDown]);\n\n  return null;\n}\n\nPen.propTypes = {\n  penSize: PropTypes.number,\n  onMouseDown: PropTypes.func,\n  currentColor: PropTypes.string,\n};\n\nexport default Pen;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\n\nfunction PixelPen({ onMouseUp, ...props }) {\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    if (isMouseDown.current) {\n      onMouseUp(canvas.toDataURL());\n\n      isMouseDown.current = !isMouseDown.current;\n    }\n  }, [onMouseUp, canvas]);\n\n  const handler = useCallback((e) => {\n    const ctx = canvas.getContext('2d');\n\n    if (isMouseDown.current) {\n      if (e.which === 1) {\n        ctx.fillStyle = props.primaryColor;\n      } else if (e.which === 3) {\n        ctx.fillStyle = props.secondaryColor;\n      }\n\n      ctx.fillRect(props.x, props.y, props.width, props.height);\n    } else {\n      ctx.beginPath();\n    }\n  }, [canvas, props.x, props.y, props.width, props.height, props.primaryColor, props.secondaryColor]);\n\n  const setMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    handler(e);\n  }, [handler]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', setMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', setMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, setMouseDown]);\n\n  return null;\n}\n\nPixelPen.propTypes = {\n  x: PropTypes.number,\n  y: PropTypes.number,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  onMouseDown: PropTypes.func,\n  primaryColor: PropTypes.string,\n  secondaryColor: PropTypes.string,\n};\n\nexport default PixelPen;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\n\nfunction EraseAction({ onMouseUp, ...props }) {\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    if (isMouseDown.current) {\n      onMouseUp(canvas.toDataURL());\n\n      isMouseDown.current = !isMouseDown.current;\n    }\n  }, [onMouseUp, canvas]);\n\n  const handler = useCallback(() => {\n    const ctx = canvas.getContext('2d');\n\n    if (isMouseDown.current) {\n      ctx.clearRect(props.x, props.y, props.width, props.height);\n    } else {\n      ctx.beginPath();\n    }\n  }, [canvas, props.x, props.y, props.width, props.height]);\n\n  const setMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    handler(e);\n  }, [handler]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', setMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', setMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, setMouseDown]);\n\n  return null;\n}\n\nEraseAction.propTypes = {\n  x: PropTypes.number,\n  y: PropTypes.number,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  onMouseDown: PropTypes.func,\n};\n\nexport default EraseAction;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { hexToRGBA } from '../../utils';\n\nfunction AllPixelsSameColorAction({ onMouseUp, currentColor }) {\n  const canvas = useContext(CanvasContext);\n  const ctx = canvas.getContext('2d');\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    onMouseUp(canvas.toDataURL());\n  }, [canvas, onMouseUp]);\n  const setMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    if (isMouseDown.current) {\n      ctx.fillStyle = currentColor;\n      const rect = canvas.getBoundingClientRect();\n\n      const startX = Math.floor(e.clientX - rect.left);\n      const startY = Math.floor(e.clientY - rect.top);\n\n      const currentColorRGBA = hexToRGBA(currentColor);\n      const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      const pixelPos = (startY * canvas.width + startX) * 4;\n      const red = imgData.data[pixelPos];\n      const green = imgData.data[pixelPos + 1];\n      const blue = imgData.data[pixelPos + 2];\n      const alpha = imgData.data[pixelPos + 3];\n      const startingColor = {\n        r: red,\n        g: green,\n        b: blue,\n        a: alpha,\n      };\n      for (let i = 0; i < imgData.data.length; i += 4) {\n        if (\n          imgData.data[i] === startingColor.r\n          && imgData.data[i + 1] === startingColor.g\n          && imgData.data[i + 2] === startingColor.b\n          && imgData.data[i + 3] === startingColor.a\n        ) {\n          imgData.data[i] = currentColorRGBA.r;\n          imgData.data[i + 1] = currentColorRGBA.g;\n          imgData.data[i + 2] = currentColorRGBA.b;\n          imgData.data[i + 3] = currentColorRGBA.a;\n        }\n      }\n      ctx.putImageData(imgData, 0, 0);\n    }\n  }, [canvas, ctx, currentColor]);\n\n  const unsetMouseDown = useCallback(() => {\n    isMouseDown.current = !isMouseDown.current;\n  }, []);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousedown', setMouseDown);\n    canvas.addEventListener('mouseup', unsetMouseDown);\n    canvas.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousedown', setMouseDown);\n      canvas.removeEventListener('mouseup', unsetMouseDown);\n      canvas.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, getImgLink, setMouseDown, unsetMouseDown]);\n\n  return null;\n}\n\nAllPixelsSameColorAction.propTypes = {\n  onMouseUp: PropTypes.func,\n  currentColor: PropTypes.string,\n};\n\nexport default AllPixelsSameColorAction;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { fillPixels, hexToRGBA } from '../../utils';\n\nfunction FillColor({ onMouseUp, ...props }) {\n  const canvas = useContext(CanvasContext);\n  const ctx = canvas.getContext('2d');\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    onMouseUp(canvas.toDataURL());\n  }, [canvas, onMouseUp]);\n  const setMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    if (isMouseDown.current) {\n      const rect = canvas.getBoundingClientRect();\n      const rgba = hexToRGBA(props.currentColor);\n\n      const startX = Math.floor(e.clientX - rect.left);\n      const startY = Math.floor(e.clientY - rect.top);\n      const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      const pixelPos = (startY * canvas.width + startX) * 4;\n      const red = imgData.data[pixelPos];\n      const green = imgData.data[pixelPos + 1];\n      const blue = imgData.data[pixelPos + 2];\n      const alpha = imgData.data[pixelPos + 3];\n      const startingColor = {\n        r: red,\n        g: green,\n        b: blue,\n        a: alpha,\n      };\n      fillPixels(startX, startY, canvas.width, canvas.height, imgData, startingColor, rgba);\n      ctx.putImageData(imgData, 0, 0);\n    }\n  }, [canvas, ctx, props.currentColor]);\n\n  const unsetMouseDown = useCallback(() => {\n    isMouseDown.current = !isMouseDown.current;\n  }, []);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousedown', setMouseDown);\n    canvas.addEventListener('mouseup', unsetMouseDown);\n    canvas.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousedown', setMouseDown);\n      canvas.removeEventListener('mouseup', unsetMouseDown);\n      canvas.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, getImgLink, setMouseDown, unsetMouseDown]);\n\n  return null;\n}\n\nFillColor.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  currentColor: PropTypes.string,\n};\n\nexport default FillColor;\n","export default (x1, y1, x2, y2, cb) => {\n  const deltaX = Math.abs(x2 - x1);\n  const deltaY = Math.abs(y2 - y1);\n  const signX = x1 < x2 ? 1 : -1;\n  const signY = y1 < y2 ? 1 : -1;\n  let error = deltaX - deltaY;\n\n  while (x1 !== x2 || y1 !== y2) {\n    cb(x1, y1);\n    const error2 = error * 2;\n\n    if (error2 > -deltaY) {\n      error -= deltaY;\n      // eslint-disable-next-line no-param-reassign\n      x1 += signX;\n    }\n    if (error2 < deltaX) {\n      error += deltaX;\n      // eslint-disable-next-line no-param-reassign\n      y1 += signY;\n    }\n  }\n  cb(x2, y2);\n};\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n  useState,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { getRectCoords, getRectCoordsFromEvent, hexToRGBA } from '../../utils';\nimport drawLine from '../../algorithms/drawLine';\n\nfunction DrawTriangle({ onMouseUp, ...props }) {\n  const [rectEndX, setRectEndX] = useState(0);\n  const [rectEndY, setRectEndY] = useState(0);\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const imageData = useRef(null);\n  const getImgLink = useCallback(() => {\n    imageData.current = null;\n    isMouseDown.current = false;\n    onMouseUp(canvas.toDataURL());\n  }, [onMouseUp, canvas]);\n  const ctx = canvas.getContext('2d');\n\n  const handler = useCallback((e) => {\n    if (isMouseDown.current) {\n      requestAnimationFrame(() => {\n        setRectEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n        setRectEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n\n        if (imageData.current) {\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          ctx.putImageData(imageData.current, 0, 0);\n        }\n\n        const setPixel = (x, y, currentColorRgba) => {\n          ctx.fillStyle = props.currentColor;\n          const { rectXBegin, rectYBegin } = getRectCoords(x, y, props.canvasScale);\n          const { data } = ctx.getImageData(rectXBegin, rectYBegin, 1, 1);\n\n          if (\n            data[0] === currentColorRgba.r\n            && data[1] === currentColorRgba.g\n            && data[2] === currentColorRgba.b\n            && data[3] === currentColorRgba.a\n          ) {\n            return;\n          }\n\n          ctx.fillRect(rectXBegin, rectYBegin, props.rectSize, props.rectSize);\n        };\n\n        const plot = (x, y, rgba) => {\n          //  -    \n          // eslint-disable-next-line no-restricted-globals\n          if (isFinite(x) && isFinite(y)) {\n            setPixel(x, y, rgba);\n          }\n        };\n\n        const x1 = props.x;\n        const y1 = props.y;\n        const x2 = rectEndX;\n        const y2 = rectEndY;\n        const rgba = hexToRGBA(props.currentColor);\n        drawLine(x1, y1, x2, y2, (x, y) => {\n          plot(x, y, rgba);\n        });\n        drawLine(x2, y2, x1 - (x2 - x1) - props.rectSize, y2, (x, y) => {\n          plot(x, y, rgba);\n        });\n        drawLine(x1 - (x2 - x1), y2, x1, y1, (x, y) => {\n          plot(x, y, rgba);\n        });\n      });\n    } else {\n      ctx.beginPath();\n    }\n  }, [\n    props.canvasScale,\n    props.x,\n    props.y,\n    props.currentColor,\n    props.rectSize,\n    rectEndX,\n    rectEndY,\n    ctx,\n    canvas.width,\n    canvas.height,\n  ]);\n\n  const toggleMouseDown = useCallback((e) => {\n    isMouseDown.current = true;\n    imageData.current = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n    setRectEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n    setRectEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n  }, [canvas.height, canvas.width, ctx, props.canvasScale]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', toggleMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', toggleMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, toggleMouseDown]);\n\n  return null;\n}\n\nDrawTriangle.propTypes = {\n  onMouseDown: PropTypes.func,\n  currentColor: PropTypes.string,\n  canvasScale: PropTypes.number,\n  x: PropTypes.number,\n  y: PropTypes.number,\n  rectSize: PropTypes.number,\n};\n\nexport default DrawTriangle;\n","export default ($rx, $ry, $xc, $yc, cb) => {\n  let $x = 0;\n  let $y = $ry;\n\n  // Initial decision parameter of region 1\n  let $d1 = ($ry * $ry) - ($rx * $rx * $ry) + (0.25 * $rx * $rx);\n  let $dx = 2 * $ry * $ry * $x;\n  let $dy = 2 * $rx * $rx * $y;\n\n  // For region 1\n  while ($dx < $dy) {\n    cb([$x + $xc, $y + $yc], [-$x + $xc, $y + $yc], [$x + $xc, -$y + $yc], [-$x + $xc, -$y + $yc]);\n    // Print points based on 4-way symmetry\n\n    // Checking and updating value of\n    // decision parameter based on algorithm\n    if ($d1 < 0) {\n      $x += 1;\n      $dx += (2 * $ry * $ry);\n      $d1 = $d1 + $dx + ($ry * $ry);\n    } else {\n      $x += 1;\n      $y -= 1;\n      $dx += (2 * $ry * $ry);\n      $dy -= (2 * $rx * $rx);\n      $d1 = $d1 + $dx - $dy + ($ry * $ry);\n    }\n  }\n\n  // Decision parameter of region 2\n  let $d2 = (($ry * $ry) * (($x + 0.5) * ($x + 0.5)))\n    + (($rx * $rx) * (($y - 1) * ($y - 1)))\n    - ($rx * $rx * $ry * $ry);\n\n  // Plotting points of region 2\n  while ($y >= 0) {\n    // printing points based on 4-way symmetry\n    cb([$x + $xc, $y + $yc], [-$x + $xc, $y + $yc], [$x + $xc, -$y + $yc], [-$x + $xc, -$y + $yc]);\n    // Checking and updating parameter\n    // value based on algorithm\n    if ($d2 > 0) {\n      $y -= 1;\n      $dy -= (2 * $rx * $rx);\n      $d2 = $d2 + ($rx * $rx) - $dy;\n    } else {\n      $y -= 1;\n      $x += 1;\n      $dx += (2 * $ry * $ry);\n      $dy -= (2 * $rx * $rx);\n      $d2 = $d2 + $dx - $dy + ($rx * $rx);\n    }\n  }\n};\n","export default (x, y, radius, cb) => {\n  let x0 = 0;\n  let y0 = radius;\n  let gap = 0;\n  let delta = (1 - 2 * radius);\n\n  while (y0 >= 0) {\n    cb(x + x0, y - y0);\n    cb(x - x0, y - y0);\n    cb(x - x0, y + y0);\n    cb(x + x0, y + y0);\n    gap = 2 * (delta + y0) - 1;\n\n    if (delta < 0 && gap <= 0) {\n      x0 += 1;\n      delta += 2 * x0 + 1;\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (delta > 0 && gap > 0) {\n      y0 -= 1;\n      delta -= 2 * y0 + 1;\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    x0 += 1;\n    delta += 2 * (x0 - y0);\n    y0 -= 1;\n  }\n};\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n  useState,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport {\n  getRectCoords,\n  getRectCoordsFromEvent,\n  hexToRGBA,\n  getCircleCenter,\n  getHorizontalRadius,\n  getVerticalRadius,\n  getRadius,\n} from '../../utils';\nimport drawMidPointEllipse from '../../algorithms/drawMidPointEllipse';\nimport drawingCircle from '../../algorithms/drawingCircle';\n\nfunction DrawCircle({ onMouseUp, ...props }) {\n  const [circleEndX, setCircleEndX] = useState(0);\n  const [circleEndY, setCircleEndY] = useState(0);\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const imageData = useRef(null);\n  const getImgLink = useCallback(() => {\n    imageData.current = null;\n    isMouseDown.current = false;\n    onMouseUp(canvas.toDataURL());\n  }, [onMouseUp, canvas]);\n  const ctx = canvas.getContext('2d');\n  const handler = useCallback((e) => {\n    if (isMouseDown.current) {\n      requestAnimationFrame(() => {\n        setCircleEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n        setCircleEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n\n        if (imageData.current) {\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          ctx.putImageData(imageData.current, 0, 0);\n        }\n\n        const setPixel = (x, y, currentColorRgba) => {\n          ctx.fillStyle = props.currentColor;\n          const { rectXBegin, rectYBegin } = getRectCoords(x, y, props.canvasScale);\n          const { data } = ctx.getImageData(rectXBegin, rectYBegin, 1, 1);\n\n          if (\n            data[0] === currentColorRgba.r\n            && data[1] === currentColorRgba.g\n            && data[2] === currentColorRgba.b\n            && data[3] === currentColorRgba.a\n          ) {\n            return;\n          }\n\n          ctx.fillRect(rectXBegin, rectYBegin, props.rectSize, props.rectSize);\n        };\n\n        const plot = (x, y, rgba) => {\n          //  -    \n          // eslint-disable-next-line no-restricted-globals\n          if (isFinite(x) && isFinite(y)) {\n            setPixel(x, y, rgba);\n          }\n        };\n\n        ctx.strokeStyle = props.currentColor;\n        ctx.fillStyle = props.currentColor;\n        const x1 = props.x;\n        const y1 = props.y;\n        const x2 = circleEndX;\n        const y2 = circleEndY;\n        const rgba = hexToRGBA(props.currentColor);\n        const radius = getRadius(x1, y1, x2, y2);\n        const circleCenter = getCircleCenter(x1, y1, x2, y2);\n        const horizontalRadius = getHorizontalRadius(x1, x2);\n        const verticalRadius = getVerticalRadius(y1, y2);\n\n        if (e.shiftKey) {\n          drawingCircle(x2, y2, radius, (x, y) => {\n            plot(x, y, rgba);\n          });\n        } else {\n          drawMidPointEllipse(horizontalRadius, verticalRadius, circleCenter.x, circleCenter.y, (p1, p2, p3, p4) => {\n            plot(p1[0], p1[1], rgba);\n            plot(p2[0], p2[1], rgba);\n            plot(p3[0], p3[1], rgba);\n            plot(p4[0], p4[1], rgba);\n          });\n        }\n      });\n    } else {\n      ctx.beginPath();\n    }\n  }, [\n    props.canvasScale,\n    props.currentColor,\n    props.x,\n    props.y,\n    props.rectSize,\n    ctx,\n    canvas.width,\n    canvas.height,\n    circleEndX,\n    circleEndY,\n  ]);\n\n  const toggleMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    imageData.current = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n    setCircleEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n    setCircleEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n  }, [canvas.height, canvas.width, ctx, props.canvasScale]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', toggleMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', toggleMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, toggleMouseDown]);\n\n  return null;\n}\n\nDrawCircle.propTypes = {\n  onMouseDown: PropTypes.func,\n  currentColor: PropTypes.string,\n  canvasScale: PropTypes.number,\n  x: PropTypes.number,\n  y: PropTypes.number,\n  rectSize: PropTypes.number,\n};\n\nexport default DrawCircle;\n","export default (x1, y1, x2, y2, cb) => {\n  let x0 = x1;\n  let y0 = y1;\n  if (x1 < x2 && y1 < y2) {\n    while (x0 < x2) {\n      cb(x0, y1);\n      x0 += 1;\n    }\n    while (y0 < y2) {\n      cb(x0, y0);\n      y0 += 1;\n    }\n    while (x0 > x1) {\n      cb(x0, y0);\n      x0 -= 1;\n    }\n    while (y0 > y1) {\n      cb(x0, y0);\n      y0 -= 1;\n    }\n  }\n\n  if (x1 < x2 && y1 > y2) {\n    while (x0 < x2) {\n      cb(x0, y1);\n      x0 += 1;\n    }\n    while (y0 > y2) {\n      cb(x0, y0);\n      y0 -= 1;\n    }\n    while (x0 > x1) {\n      cb(x0, y0);\n      x0 -= 1;\n    }\n    while (y0 < y1) {\n      cb(x0, y0);\n      y0 += 1;\n    }\n  }\n\n  if (x1 > x2 && y1 < y2) {\n    while (x0 > x2) {\n      cb(x0, y0);\n      x0 -= 1;\n    }\n    while (y0 <= y2) {\n      cb(x0, y0);\n      y0 += 1;\n    }\n    while (x0 < x1) {\n      cb(x0, y2);\n      x0 += 1;\n    }\n    while (y0 > y1) {\n      cb(x0, y0);\n      y0 -= 1;\n    }\n  }\n\n  if (x1 > x2 && y1 > y2) {\n    while (x0 > x2) {\n      cb(x0, y0);\n      x0 -= 1;\n    }\n    while (y0 > y2) {\n      cb(x0, y0);\n      y0 -= 1;\n    }\n    while (x0 < x1) {\n      cb(x0, y2);\n      x0 += 1;\n    }\n    while (y0 < y1) {\n      cb(x0, y0);\n      y0 += 1;\n    }\n  }\n};\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n  useState,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport {\n  getRectCoords,\n  getRectCoordsFromEvent,\n  hexToRGBA,\n} from '../../utils';\nimport drawingRectangle from '../../algorithms/drawingRectangle';\n\nfunction DrawRectangle({ onMouseUp, ...props }) {\n  const [rectEndX, setRectEndX] = useState(0);\n  const [rectEndY, setRectEndY] = useState(0);\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const imageData = useRef(null);\n  const getImgLink = useCallback(() => {\n    imageData.current = null;\n    isMouseDown.current = false;\n    onMouseUp(canvas.toDataURL());\n  }, [onMouseUp, canvas]);\n  const ctx = canvas.getContext('2d');\n\n  const handler = useCallback((e) => {\n    if (isMouseDown.current) {\n      requestAnimationFrame(() => {\n        setRectEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n        setRectEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n\n        if (imageData.current) {\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          ctx.putImageData(imageData.current, 0, 0);\n        }\n\n        const setPixel = (x, y, currentColorRgba) => {\n          ctx.fillStyle = props.currentColor;\n          const { rectXBegin, rectYBegin } = getRectCoords(x, y, props.canvasScale);\n          const { data } = ctx.getImageData(rectXBegin, rectYBegin, 1, 1);\n\n          if (\n            data[0] === currentColorRgba.r\n            && data[1] === currentColorRgba.g\n            && data[2] === currentColorRgba.b\n            && data[3] === currentColorRgba.a\n          ) {\n            return;\n          }\n\n          ctx.fillRect(rectXBegin, rectYBegin, props.rectSize, props.rectSize);\n        };\n\n        const plot = (x, y, rgba) => {\n          //  -    \n          // eslint-disable-next-line no-restricted-globals\n          if (isFinite(x) && isFinite(y)) {\n            setPixel(x, y, rgba);\n          }\n        };\n\n        const x1 = props.x;\n        const y1 = props.y;\n        const x2 = rectEndX;\n        const y2 = rectEndY;\n        const rgba = hexToRGBA(props.currentColor);\n\n        drawingRectangle(x1, y1, x2, y2, (x, y) => {\n          plot(x, y, rgba);\n        });\n      });\n    } else {\n      ctx.beginPath();\n    }\n  }, [\n    props.canvasScale,\n    props.x,\n    props.y,\n    props.currentColor,\n    props.rectSize,\n    rectEndX,\n    rectEndY,\n    ctx,\n    canvas.width,\n    canvas.height,\n  ]);\n\n  const toggleMouseDown = useCallback((e) => {\n    isMouseDown.current = true;\n    imageData.current = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n    setRectEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n    setRectEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n  }, [canvas.height, canvas.width, ctx, props.canvasScale]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', toggleMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', toggleMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, toggleMouseDown]);\n\n  return null;\n}\n\nDrawRectangle.propTypes = {\n  onMouseDown: PropTypes.func,\n  currentColor: PropTypes.string,\n  canvasScale: PropTypes.number,\n  x: PropTypes.number,\n  y: PropTypes.number,\n  rectSize: PropTypes.number,\n};\n\nexport default DrawRectangle;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n  useState,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport {\n  getRectCoordsFromEvent,\n} from '../../utils';\n\nfunction DrawFillRectangle({ onMouseUp, ...props }) {\n  const [rectEndX, setRectEndX] = useState(0);\n  const [rectEndY, setRectEndY] = useState(0);\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const imageData = useRef(null);\n  const getImgLink = useCallback(() => {\n    imageData.current = null;\n    isMouseDown.current = false;\n    onMouseUp(canvas.toDataURL());\n  }, [onMouseUp, canvas]);\n  const ctx = canvas.getContext('2d');\n\n  const handler = useCallback((e) => {\n    if (isMouseDown.current) {\n      requestAnimationFrame(() => {\n        setRectEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n        setRectEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n\n        if (imageData.current) {\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          ctx.putImageData(imageData.current, 0, 0);\n        }\n\n        ctx.fillStyle = props.primaryColor;\n        const x1 = props.x;\n        const y1 = props.y;\n        const x2 = rectEndX;\n        const y2 = rectEndY;\n        const outerRectWidth = Math.abs(x1 - x2);\n        const outerRectHeight = Math.abs(y1 - y2);\n        // if x1 > x2\n        const horizontalSide1 = Math.abs((x1 - props.rectSize) - (x2 + props.rectSize));\n        // if x1 < x2\n        const horizontalSide2 = Math.abs((x2 - props.rectSize) - (x1 + props.rectSize));\n        // if y1 > y2\n        const verticalSide1 = Math.abs((y1 - props.rectSize) - (y2 + props.rectSize));\n        // if y1 < y2\n        const verticalSide2 = Math.abs((y2 - props.rectSize) - (y1 + props.rectSize));\n        const innerRectWidth = Math.min(horizontalSide1, horizontalSide2);\n        const innerRectHeight = Math.min(verticalSide1, verticalSide2);\n\n        ctx.fillRect(Math.min(x1, x2), Math.min(y1, y2), outerRectWidth, outerRectHeight);\n        if (outerRectWidth >= props.rectSize * 3 && outerRectHeight >= props.rectSize * 3) {\n          ctx.fillStyle = props.secondaryColor;\n          const innerSide1 = Math.min(x1 + props.rectSize, x2 + props.rectSize);\n          const innerSide2 = Math.min(y1 + props.rectSize, y2 + props.rectSize);\n          ctx.fillRect(innerSide1, innerSide2, innerRectWidth, innerRectHeight);\n        }\n      });\n    } else {\n      ctx.beginPath();\n    }\n  }, [props.canvasScale,\n    props.primaryColor,\n    props.x,\n    props.y,\n    props.rectSize,\n    props.secondaryColor,\n    ctx,\n    rectEndX,\n    rectEndY,\n    canvas.width,\n    canvas.height]);\n\n  const toggleMouseDown = useCallback((e) => {\n    isMouseDown.current = true;\n    imageData.current = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n    setRectEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n    setRectEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n  }, [canvas.height, canvas.width, ctx, props.canvasScale]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', toggleMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', toggleMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, toggleMouseDown]);\n\n  return null;\n}\n\nDrawFillRectangle.propTypes = {\n  onMouseDown: PropTypes.func,\n  primaryColor: PropTypes.string,\n  secondaryColor: PropTypes.string,\n  canvasScale: PropTypes.number,\n  x: PropTypes.number,\n  y: PropTypes.number,\n  rectSize: PropTypes.number,\n};\n\nexport default DrawFillRectangle;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\n\nfunction VerticalMirrorPen({ onMouseUp, ...props }) {\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    onMouseUp(canvas.toDataURL());\n  }, [onMouseUp, canvas]);\n\n  const handler = useCallback((e) => {\n    const ctx = canvas.getContext('2d');\n\n    if (isMouseDown.current) {\n      if (e.shiftKey) {\n        const y = e.target.offsetHeight - props.y - props.height;\n\n        ctx.fillStyle = props.currentColor;\n        ctx.strokeStyle = props.currentColor;\n        ctx.fillRect(props.x, props.y, props.width, props.height);\n        ctx.fillRect(props.x, y, props.width, props.height);\n      } else {\n        const x = e.target.offsetWidth - props.x - props.width;\n        ctx.fillStyle = props.currentColor;\n        ctx.strokeStyle = props.currentColor;\n        ctx.fillRect(props.x, props.y, props.width, props.height);\n        ctx.fillRect(x, props.y, props.width, props.height);\n      }\n    } else {\n      ctx.beginPath();\n    }\n  }, [props.x, props.y, props.width, props.height, props.currentColor, isMouseDown, canvas]);\n\n  const setMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    handler(e);\n  }, [handler]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', setMouseDown);\n    document.addEventListener('mouseup', setMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', setMouseDown);\n      document.removeEventListener('mouseup', setMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, setMouseDown]);\n\n  return null;\n}\n\nVerticalMirrorPen.propTypes = {\n  x: PropTypes.number,\n  y: PropTypes.number,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  onMouseDown: PropTypes.func,\n  currentColor: PropTypes.string,\n};\n\nexport default VerticalMirrorPen;\n","import { useContext, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { rgbaToHEX } from '../../utils';\n\nfunction ChooseColor({ onMouseUp }) {\n  const canvas = useContext(CanvasContext);\n  const ctx = canvas.getContext('2d');\n  const getColorValue = useCallback((e) => {\n    const rect = canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    const pixelPos = (y * canvas.width + x) * 4;\n    const red = imgData.data[pixelPos];\n    const green = imgData.data[pixelPos + 1];\n    const blue = imgData.data[pixelPos + 2];\n    const alpha = imgData.data[pixelPos + 3];\n    const rgba = {\n      r: red,\n      g: green,\n      b: blue,\n      a: alpha,\n    };\n    const chosenColor = rgbaToHEX(rgba);\n    onMouseUp(chosenColor);\n  }, [canvas, ctx, onMouseUp]);\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n    canvas.addEventListener('mouseup', getColorValue);\n    return () => {\n      canvas.removeEventListener('mouseup', getColorValue);\n    };\n  }, [canvas, getColorValue]);\n  return null;\n}\n\nChooseColor.propTypes = {\n  onMouseUp: PropTypes.func,\n};\n\nexport default ChooseColor;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { getRectCoords } from '../../utils';\n\nfunction LightenColor({ onMouseUp, canvasScale, penSize }) {\n  const canvas = useContext(CanvasContext);\n  const ctx = canvas.getContext('2d');\n  const rect = canvas.getBoundingClientRect();\n  const isMouseDown = useRef(false);\n  const setMouseDown = useCallback(() => {\n    isMouseDown.current = !isMouseDown.current;\n  }, []);\n  const mouseUpHandler = useCallback(() => {\n    isMouseDown.current = !isMouseDown.current;\n    onMouseUp(canvas.toDataURL());\n  }, [canvas, onMouseUp]);\n\n  const mouseMoveHandler = useCallback((e) => {\n    if (isMouseDown.current) {\n      const currentX = Math.floor(e.clientX - rect.left);\n      const currentY = Math.floor(e.clientY - rect.top);\n      const rectCoords = getRectCoords(currentX, currentY, canvasScale);\n      const imgData = ctx.getImageData(rectCoords.rectXBegin, rectCoords.rectYBegin, penSize, penSize);\n\n      for (let i = 0; i < imgData.data.length; i += 4) {\n        if (imgData.data[i + 3] !== 0) {\n          if (imgData.data[i] <= 245) {\n            imgData.data[i] += 5;\n          }\n          if (imgData.data[i + 1] <= 245) {\n            imgData.data[i + 1] += 5;\n          }\n          if (imgData.data[i + 2] <= 245) {\n            imgData.data[i + 2] += 5;\n          }\n        }\n      }\n      ctx.putImageData(imgData, rectCoords.rectXBegin, rectCoords.rectYBegin);\n    }\n  }, [canvasScale, ctx, penSize, rect.left, rect.top]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n    canvas.addEventListener('mousedown', setMouseDown);\n    canvas.addEventListener('mousemove', mouseMoveHandler);\n    document.addEventListener('mouseup', mouseUpHandler);\n    return () => {\n      canvas.removeEventListener('mousedown', setMouseDown);\n      canvas.removeEventListener('mousemove', mouseMoveHandler);\n      document.removeEventListener('mouseup', mouseUpHandler);\n    };\n  }, [canvas, mouseMoveHandler, mouseUpHandler, setMouseDown]);\n  return null;\n}\n\nLightenColor.propTypes = {\n  onMouseUp: PropTypes.func,\n};\n\nexport default LightenColor;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { getRectCoords } from '../../utils';\n\nfunction DarkenColor({ onMouseUp, canvasScale, penSize }) {\n  const canvas = useContext(CanvasContext);\n  const ctx = canvas.getContext('2d');\n  const rect = canvas.getBoundingClientRect();\n  const isMouseDown = useRef(false);\n  const setMouseDown = useCallback(() => {\n    isMouseDown.current = !isMouseDown.current;\n  }, []);\n  const mouseUpHandler = useCallback(() => {\n    onMouseUp(canvas.toDataURL());\n    isMouseDown.current = !isMouseDown.current;\n  }, [canvas, onMouseUp]);\n\n  const mouseMoveHandler = useCallback((e) => {\n    if (isMouseDown.current) {\n      const currentX = Math.floor(e.clientX - rect.left);\n      const currentY = Math.floor(e.clientY - rect.top);\n      const rectCoords = getRectCoords(currentX, currentY, canvasScale);\n      const imgData = ctx.getImageData(rectCoords.rectXBegin, rectCoords.rectYBegin, penSize, penSize);\n\n      for (let i = 0; i < imgData.data.length; i += 4) {\n        if (imgData.data[i + 3] !== 0) {\n          if (imgData.data[i] >= 5) {\n            imgData.data[i] -= 5;\n          }\n          if (imgData.data[i + 1] >= 5) {\n            imgData.data[i + 1] -= 5;\n          }\n          if (imgData.data[i + 2] >= 5) {\n            imgData.data[i + 2] -= 5;\n          }\n        }\n      }\n      ctx.putImageData(imgData, rectCoords.rectXBegin, rectCoords.rectYBegin);\n    }\n  }, [canvasScale, ctx, penSize, rect.left, rect.top]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n    canvas.addEventListener('mousedown', setMouseDown);\n    canvas.addEventListener('mousemove', mouseMoveHandler);\n    document.addEventListener('mouseup', mouseUpHandler);\n    return () => {\n      canvas.removeEventListener('mousedown', setMouseDown);\n      canvas.removeEventListener('mousemove', mouseMoveHandler);\n      document.removeEventListener('mouseup', mouseUpHandler);\n    };\n  }, [canvas, mouseMoveHandler, mouseUpHandler, setMouseDown]);\n  return null;\n}\n\nDarkenColor.propTypes = {\n  onMouseUp: PropTypes.func,\n};\n\nexport default DarkenColor;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n  useState,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { getRelativeClientX, getRelativeClientY } from '../../utils';\n\nfunction MoveAction({ onMouseUp, image }) {\n  const canvas = useContext(CanvasContext);\n  const ctx = canvas.getContext('2d');\n  const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  const [startRelativeClientX, setStartRelativeClientX] = useState(0);\n  const [startRelativeClientY, setStartRelativeClientY] = useState(0);\n  const isMouseDown = useRef(false);\n  const img = useRef(null);\n  const getImgLink = useCallback(() => {\n    isMouseDown.current = false;\n    img.current = null;\n    ctx.putImageData(imageData, 0, 0);\n    onMouseUp(canvas.toDataURL());\n\n    setStartRelativeClientX(0);\n    setStartRelativeClientY(0);\n  }, [canvas, ctx, imageData, onMouseUp]);\n  const handler = useCallback((e) => {\n    if (isMouseDown.current) {\n      const xRelativeToRect = getRelativeClientX(e);\n      const yRelativeToRect = getRelativeClientY(e.target, e.clientY);\n\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(img.current, xRelativeToRect - startRelativeClientX, yRelativeToRect - startRelativeClientY);\n    }\n  }, [canvas, ctx, startRelativeClientX, startRelativeClientY]);\n\n  const toggleMouseDown = useCallback((e) => {\n    isMouseDown.current = true;\n    img.current = new Image();\n    img.current.src = image;\n\n    setStartRelativeClientX(getRelativeClientX(e));\n    setStartRelativeClientY(getRelativeClientY(e.target, e.clientY));\n  }, [image]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', toggleMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', toggleMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, toggleMouseDown]);\n\n  return null;\n}\n\nMoveAction.propTypes = {\n  onMouseDown: PropTypes.func,\n  image: PropTypes.string,\n};\n\nexport default MoveAction;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { even, odd } from '../../utils';\n\nfunction PixelPen({ onMouseUp, ...props }) {\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    if (isMouseDown.current) {\n      onMouseUp(canvas.toDataURL());\n\n      isMouseDown.current = !isMouseDown.current;\n    }\n  }, [onMouseUp, canvas]);\n\n  const handler = useCallback(() => {\n    const ctx = canvas.getContext('2d');\n\n    if (isMouseDown.current) {\n      const rectsNum = props.penSize / 20;\n      const innerFirstRectColumn = props.x / 20 + 1;\n      const innerFirstRectRow = props.y / 20 + 1;\n\n      for (let i = 0; i < rectsNum; i += 1) {\n        for (let j = 0; j < rectsNum; j += 1) {\n          const rowNum = innerFirstRectRow + i;\n          const colNum = innerFirstRectColumn + j;\n\n          if (\n            (odd(rowNum) && odd(colNum))\n            || (even(rowNum) && even(colNum))\n          ) {\n            ctx.fillStyle = props.secondaryColor;\n          } else {\n            ctx.fillStyle = props.primaryColor;\n          }\n\n          ctx.fillRect(props.x + (i * 20), props.y + (j * 20), 20, 20);\n        }\n      }\n    } else {\n      ctx.beginPath();\n    }\n  }, [canvas, props.penSize, props.primaryColor, props.secondaryColor, props.x, props.y]);\n\n  const setMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    handler(e);\n  }, [handler]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', setMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', setMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, setMouseDown]);\n\n  return null;\n}\n\nPixelPen.propTypes = {\n  x: PropTypes.number,\n  y: PropTypes.number,\n  penSize: PropTypes.number,\n  column: PropTypes.number,\n  row: PropTypes.number,\n  primaryColor: PropTypes.string,\n  secondaryColor: PropTypes.string,\n  image: PropTypes.any,\n};\n\nexport default PixelPen;\n","import React from 'react';\nimport './canvasScale.css';\nimport PropTypes from 'prop-types';\n\nfunction CanvasScale({ onChange, options, value }) {\n  return (\n    <div className=\"canvas-size\">\n      {options.map(num => (\n        <div className=\"canvas-size__item\" key={num}>\n          <input\n            checked={value === num}\n            id={`canvas-size__item${num}`}\n            name=\"canvas-size__item\"\n            onChange={onChange}\n            type=\"radio\"\n            value={num}\n          />\n          <label htmlFor={`canvas-size__item${num}`}>{num}*{num}</label>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nCanvasScale.propTypes = {\n  onChange: PropTypes.func,\n  options: PropTypes.arrayOf(\n    PropTypes.number,\n  ),\n  value: PropTypes.number,\n};\n\nexport default CanvasScale;\n","export default {\n  PEN_SIZE_1: 'PEN_SIZE_1',\n  PEN_SIZE_2: 'PEN_SIZE_2',\n  PEN_SIZE_3: 'PEN_SIZE_3',\n  PEN_SIZE_4: 'PEN_SIZE_4',\n  PEN_TOOL: 'PEN_TOOL',\n  ERASER_TOOL: 'ERASER_TOOL',\n  COLOR_BUCKET_TOOL: 'COLOR_BUCKET_TOOL',\n  MAGIC_COLOR_BUCKET_TOOL: 'MAGIC_COLOR_BUCKET_TOOL',\n  DRAW_TRIANGLE_TOOL: 'DRAW_TRIANGLE_TOOL',\n  COLOR_PICKER_TOOL: 'COLOR_PICKER_TOOL',\n  RECTANGLE_TOOL: 'RECTANGLE_TOOL',\n  CIRCLE_TOOL: 'CIRCLE_TOOL',\n  LIGHTEN_TOOL: 'LIGHTEN_TOOL',\n  DARKEN_TOOL: 'DARKEN_TOOL',\n  DITHERING_TOOL: 'DITHERING_TOOL',\n  STROKE_TOOL: 'STROKE_TOOL',\n  MIRROR_PEN_TOOL: 'MIRROR_PEN_TOOL',\n  MOVE_TOOL: 'MOVE_TOOL',\n  FEATHER_PEN_TOOL: 'FEATHER_PEN_TOOL',\n  ADD_NEW_FRAME: 'ADD_NEW_FRAME',\n  CHANGE_COLORS: 'CHANGE_COLORS',\n  FILL_RECTANGLE_TOOL: 'FILL_RECTANGLE_TOOL',\n};\n","import React, { useRef } from 'react';\nimport './keyboardShortcut.css';\nimport PropTypes from 'prop-types';\nimport toolNames from '../../toolNames';\n\nfunction KeyboardShortcuts({ keyboardMap, onChange }) {\n  const isModalWindowOpened = useRef(false);\n\n  const onOpen = () => {\n    isModalWindowOpened.current = !isModalWindowOpened.current;\n\n    if (isModalWindowOpened.current) {\n      document.querySelector('.keyboard-shortcuts__button').classList.add('keyboard-shortcuts__button--active');\n      document.querySelector('.keyboard-shortcuts__list').classList.add('keyboard-shortcuts__list--active');\n    } else {\n      document.querySelector('.keyboard-shortcuts__button').classList.remove('keyboard-shortcuts__button--active');\n      document.querySelector('.keyboard-shortcuts__list').classList.remove('keyboard-shortcuts__list--active');\n    }\n  };\n\n  return (\n    <div className=\"keyboard-shortcuts__wrapper\">\n      <button className=\"keyboard-shortcuts__button\" onClick={onOpen} title=\"Keyboard shortcuts\" />\n      <div className=\"keyboard-shortcuts__list\">\n        <ul className=\"keyboard-shortcuts\">\n          <li>Tool shortcuts</li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image draw-action\" />\n            <button className=\"item__key-code\" title=\"Click to edit the key\" onClick={() => onChange(toolNames.PEN_TOOL)}>\n              {keyboardMap[toolNames.PEN_TOOL]}\n            </button>\n            <div className=\"item__description\">Pen tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image erase-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.ERASER_TOOL)}\n            >\n              {keyboardMap[toolNames.ERASER_TOOL]}\n            </button>\n            <div className=\"item__description\">Eraser tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image mirror-draw-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.MIRROR_PEN_TOOL)}\n            >\n              {keyboardMap[toolNames.MIRROR_PEN_TOOL]}\n            </button>\n            <div className=\"item__description\">Vertical mirror pen tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image fill-color-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.COLOR_BUCKET_TOOL)}\n            >\n              {keyboardMap[toolNames.COLOR_BUCKET_TOOL]}\n            </button>\n            <div className=\"item__description\">Color bucket tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image magic-color-bucket-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.MAGIC_COLOR_BUCKET_TOOL)}\n            >\n              {keyboardMap[toolNames.MAGIC_COLOR_BUCKET_TOOL]}\n            </button>\n            <div className=\"item__description\">Magic bucket tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image stroke-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.STROKE_TOOL)}\n            >\n              {keyboardMap[toolNames.STROKE_TOOL]}\n            </button>\n            <div className=\"item__description\">Stroke tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image rectangle-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.RECTANGLE_TOOL)}\n            >\n              {keyboardMap[toolNames.RECTANGLE_TOOL]}\n            </button>\n            <div className=\"item__description\">Rectangle tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image circle-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.CIRCLE_TOOL)}\n            >\n              {keyboardMap[toolNames.CIRCLE_TOOL]}\n            </button>\n            <div className=\"item__description\">Circle tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image move-action\" />\n            <button className=\"item__key-code\" title=\"Click to edit the key\" onClick={() => onChange(toolNames.MOVE_TOOL)}>\n              {keyboardMap[toolNames.MOVE_TOOL]}\n            </button>\n            <div className=\"item__description\">Move tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image lighten-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.LIGHTEN_TOOL)}\n            >\n              {keyboardMap[toolNames.LIGHTEN_TOOL]}\n            </button>\n            <div className=\"item__description\">Lighten tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image darken-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.DARKEN_TOOL)}\n            >\n              {keyboardMap[toolNames.DARKEN_TOOL]}\n            </button>\n            <div className=\"item__description\">Darken tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image dithering-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.DITHERING_TOOL)}\n            >\n              {keyboardMap[toolNames.DITHERING_TOOL]}\n            </button>\n            <div className=\"item__description\">Dithering tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image choose-color-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.COLOR_PICKER_TOOL)}\n            >\n              {keyboardMap[toolNames.COLOR_PICKER_TOOL]}\n            </button>\n            <div className=\"item__description\">Color picker tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image pen-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.FEATHER_PEN_TOOL)}\n            >\n              {keyboardMap[toolNames.FEATHER_PEN_TOOL]}\n            </button>\n            <div className=\"item__description\">Feather pen tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image fill-rectangle-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.FILL_RECTANGLE_TOOL)}\n            >\n              {keyboardMap[toolNames.FILL_RECTANGLE_TOOL]}\n            </button>\n            <div className=\"item__description\">Fill rectangle tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image triangle-action\" />\n            <button className=\"item__key-code\" title=\"Click to edit the key\" onClick={() => onChange(toolNames.DRAW_TRIANGLE_TOOL)}>\n              {keyboardMap[toolNames.DRAW_TRIANGLE_TOOL]}\n            </button>\n            <div className=\"item__description\">Triangle tool</div>\n          </li>\n        </ul>\n        <ul className=\"keyboard-shortcuts\">\n          <li>Misc shortcuts</li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.PEN_SIZE_1)}\n            >\n              {keyboardMap[toolNames.PEN_SIZE_1]}\n            </button>\n            <div className=\"item__description\">Pen size x1</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.PEN_SIZE_2)}\n            >\n              {keyboardMap[toolNames.PEN_SIZE_2]}\n            </button>\n            <div className=\"item__description\">Pen size x2</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.PEN_SIZE_3)}\n            >\n              {keyboardMap[toolNames.PEN_SIZE_3]}\n            </button>\n            <div className=\"item__description\">Pen size x3</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.PEN_SIZE_4)}\n            >\n              {keyboardMap[toolNames.PEN_SIZE_4]}\n            </button>\n            <div className=\"item__description\">Pen size x4</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.ADD_NEW_FRAME)}\n            >\n              {keyboardMap[toolNames.ADD_NEW_FRAME]}\n            </button>\n            <div className=\"item__description\">Add a new frame</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item next-block\">\n            <button className=\"item__key-code arrow-up\" />\n            <div className=\"item__description\">Select previous frame</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button className=\"item__key-code arrow-down\" />\n            <div className=\"item__description\">Select next frame</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button className=\"item__key-code keys-combination\">ctrl+q</button>\n            <div className=\"item__description\">Delete frame</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button className=\"item__key-code keys-combination\">ctrl+y</button>\n            <div className=\"item__description\">Duplicate frame</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item next-block\">\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(toolNames.CHANGE_COLORS)}\n            >\n              {keyboardMap[toolNames.CHANGE_COLORS]}\n            </button>\n            <div className=\"item__description\">Change colors</div>\n          </li>\n        </ul>\n        <button className=\"close-window\" onClick={onOpen}>X</button>\n      </div>\n    </div>\n  );\n}\n\nKeyboardShortcuts.propTypes = {\n  onChange: PropTypes.func,\n  toolNames: PropTypes.object,\n  keyboardMap: PropTypes.object,\n};\n\nexport default KeyboardShortcuts;\n","import React from 'react';\nimport './cursorPosition.css';\nimport PropTypes from 'prop-types';\n\nfunction CursorPosition({ x, y, isOverCanvas }) {\n  return (\n    <div className={`cursor-position ${!isOverCanvas ? 'cursor-position--hidden' : ''}`}>\n      {x} : {y}\n    </div>\n  );\n}\n\nCursorPosition.propTypes = {\n  x: PropTypes.number,\n  y: PropTypes.number,\n  isOverCanvas: PropTypes.bool,\n};\n\nexport default CursorPosition;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n  useState,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { getRectCoords, getRectCoordsFromEvent, hexToRGBA } from '../../utils';\nimport drawLine from '../../algorithms/drawLine';\n\nfunction Stroke({ onMouseUp, ...props }) {\n  const [strokeEndX, setStrokeEndX] = useState(0);\n  const [strokeEndY, setStrokeEndY] = useState(0);\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const imageData = useRef(null);\n  const getImgLink = useCallback(() => {\n    imageData.current = null;\n    isMouseDown.current = false;\n    onMouseUp(canvas.toDataURL());\n  }, [onMouseUp, canvas]);\n  const ctx = canvas.getContext('2d');\n\n  const handler = useCallback((e) => {\n    if (isMouseDown.current) {\n      requestAnimationFrame(() => {\n        setStrokeEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n        setStrokeEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n\n        if (imageData.current) {\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          ctx.putImageData(imageData.current, 0, 0);\n        }\n\n        const setPixel = (x, y, currentColorRgba) => {\n          ctx.strokeStyle = props.currentColor;\n          ctx.fillStyle = props.currentColor;\n          const { rectXBegin, rectYBegin } = getRectCoords(x, y, props.canvasScale);\n          const { data } = ctx.getImageData(rectXBegin, rectYBegin, 1, 1);\n\n          if (\n            data[0] === currentColorRgba.r\n            && data[1] === currentColorRgba.g\n            && data[2] === currentColorRgba.b\n            && data[3] === currentColorRgba.a\n          ) {\n            return;\n          }\n\n          ctx.fillRect(rectXBegin, rectYBegin, props.rectSize, props.rectSize);\n        };\n\n        const plot = (x, y, rgba) => {\n          //  -    \n          // eslint-disable-next-line no-restricted-globals\n          if (isFinite(x) && isFinite(y)) {\n            setPixel(x, y, rgba);\n          }\n        };\n\n        ctx.strokeStyle = props.currentColor;\n        ctx.fillStyle = props.currentColor;\n        const x1 = props.x;\n        const y1 = props.y;\n        const x2 = strokeEndX;\n        const y2 = strokeEndY;\n        const rgba = hexToRGBA(props.currentColor);\n\n        if (typeof x1 !== 'number' || typeof y1 !== 'number') {\n          return;\n        }\n\n        drawLine(x1, y1, x2, y2, (x, y) => {\n          plot(x, y, rgba);\n        });\n      });\n    } else {\n      ctx.beginPath();\n    }\n  }, [\n    props.canvasScale,\n    props.currentColor,\n    props.x,\n    props.y,\n    props.rectSize,\n    ctx,\n    strokeEndX,\n    strokeEndY,\n    canvas.width,\n    canvas.height,\n  ]);\n\n  const handleMouseDown = useCallback((e) => {\n    isMouseDown.current = true;\n    imageData.current = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n    setStrokeEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n    setStrokeEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n  }, [canvas.height, canvas.width, ctx, props.canvasScale]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', handleMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', handleMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, handleMouseDown]);\n\n  return null;\n}\n\nStroke.propTypes = {\n  onMouseDown: PropTypes.func,\n  currentColor: PropTypes.string,\n  canvasScale: PropTypes.number,\n  x: PropTypes.number,\n  y: PropTypes.number,\n  rectSize: PropTypes.number,\n};\n\nexport default Stroke;\n","import React, { useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport './export.css';\n\nfunction Export({\n  onPNGExport,\n  onPNGSetExport,\n  onGIFExport,\n  onResetClick,\n  onAPNGExport,\n  onLoadPiskel,\n  onSave,\n}) {\n  const isMouseDown = useRef(false);\n\n  const onExportMenu = () => {\n    isMouseDown.current = !isMouseDown.current;\n    if (isMouseDown.current) {\n      document.querySelector('.result-export__list').classList.add('result-export__list--active');\n      document.querySelector('.result-export__button').classList.add('result-export__button--active');\n    } else {\n      document.querySelector('.result-export__list').classList.remove('result-export__list--active');\n      document.querySelector('.result-export__button').classList.remove('result-export__button--active');\n    }\n  };\n  return (\n    <div className=\"result-export__wrapper\">\n      <button className=\"result-export__button\" title=\"Export\" onClick={onExportMenu} />\n      <div className=\"result-export__list\">\n        <button\n          className=\"result-export__item png\"\n          onClick={onPNGExport}\n          title=\"Download active frame as a PNG file\"\n        />\n        <button\n          className=\"result-export__item set-png\"\n          onClick={onPNGSetExport}\n          title=\"Download all frames as PNG files\"\n        />\n        <button\n          className=\"result-export__item gif\"\n          onClick={onGIFExport}\n          title=\"Download as animated GIF\"\n        />\n        <button\n          className=\"result-export__item apng\"\n          title=\"Download as animated APNG\"\n          onClick={onAPNGExport}\n        />\n        <button\n          className=\"result-export__item save\"\n          title=\"Save as .piskel\"\n          onClick={onSave}\n        />\n        <label htmlFor=\"myFile\">\n          <input\n            type=\"file\"\n            id=\"myFile\"\n            className=\"result-export__item import\"\n            title=\"Load .piskelclone\"\n            onChange={onLoadPiskel}\n          />\n        </label>\n        <button\n          className=\"result-export__item reset\"\n          title=\"Reset all saves\"\n          onClick={onResetClick}\n        />\n      </div>\n    </div>\n  );\n}\n\nExport.propTypes = {\n  onPNGExport: PropTypes.func,\n  onPNGSetExport: PropTypes.func,\n  onGIFExport: PropTypes.func,\n  onResetClick: PropTypes.func,\n  onAPNGExport: PropTypes.func,\n  onLoadPiskel: PropTypes.func,\n  onSave: PropTypes.func,\n};\n\nexport default Export;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { GoogleLogin, GoogleLogout } from 'react-google-login';\n\nimport './auth.css';\n\nconst Auth = ({\n  clientId,\n  onLoginSuccess,\n  onLoginFail,\n  onLogout,\n  user,\n}) => (\n  <div className=\"auth\">\n    {user && (\n      <span className=\"auth__user\">\n        <img alt=\"User's photo\" className=\"auth__user-photo\" src={user.imageUrl} />\n        <span className=\"auth__user-name\">{user.name}</span>\n      </span>\n    )}\n\n    {!user && (\n      <GoogleLogin\n        clientId={clientId}\n        buttonText=\"Login\"\n        isSignedIn\n        onSuccess={onLoginSuccess}\n        onFailure={onLoginFail}\n        cookiePolicy=\"single_host_origin\"\n      />\n    )}\n\n    {user && (\n      <GoogleLogout\n        clientId={clientId}\n        buttonText=\"Logout\"\n        onLogoutSuccess={onLogout}\n      />\n    )}\n  </div>\n);\n\nAuth.propTypes = {\n  clientId: PropTypes.string,\n  onLoginSuccess: PropTypes.func,\n  onLoginFail: PropTypes.func,\n  onLogout: PropTypes.func,\n  user: PropTypes.shape({\n    imageUrl: PropTypes.string,\n    name: PropTypes.string,\n  }),\n};\n\nexport default Auth;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport GIF from 'gif.js';\nimport UPNG from 'upng-js';\nimport './app.css';\nimport { Link } from 'react-router-dom';\nimport '@uppy/core/dist/style.css';\nimport '@uppy/dashboard/dist/style.css';\nimport FrameList from '../frameList/FrameList';\nimport PenSize from '../tools/penSize/PenSize';\nimport Tools from '../tools/Tools';\nimport Preview from '../preview/Preview';\nimport FPS from '../FPS/FPS';\nimport Canvas from '../canvas/Canvas';\nimport Pen from '../tools/Pen';\nimport PixelPen from '../tools/PixelPen';\nimport EraseAction from '../tools/EraseAction';\nimport AllPixelsSameColorAction from '../tools/AllPixelsSameColorAction';\nimport FillColor from '../tools/FillColor';\nimport DrawTriangle from '../tools/DrawTriangle';\nimport DrawCircle from '../tools/DrawCircle';\nimport DrawRectangle from '../tools/DrawRectangle';\nimport DrawFillRectangle from '../tools/DrawFillRectangle';\nimport VerticalMirrorPen from '../tools/VerticalMirrorPen';\nimport ChooseColor from '../tools/ChooseColor';\nimport LightenColor from '../tools/LightenColor';\nimport DarkenColor from '../tools/DarkenColor';\nimport MoveAction from '../tools/MoveAction';\nimport DitheringAction from '../tools/DitheringAction';\nimport CanvasScale from '../canvas/canvasScale/CanvasScale';\nimport KeyboardShortcuts from '../keyboardShortcuts/KeyboardShortcuts';\nimport CursorPosition from '../canvas/cursorPosition/CursorPosition';\nimport {\n  getRectCoordsFromEvent,\n  getRectSize,\n  getCursorPosition,\n  download,\n  loadImages,\n  downloadFile,\n} from '../../utils';\nimport Stroke from '../tools/Stroke';\nimport usePrev from '../../hooks/usePrev';\nimport Export from '../export/Export';\nimport toolNames from '../../toolNames';\nimport Auth from '../auth/Auth';\n\nconst scales = [32, 64, 128];\n\nconst APP_VERSION = 1;\n\nconst useSetToolAction = () => {\n  const [toolAction, setToolAction] = useState(\n    {\n      isPenSizeAction: false,\n      isDrawAction: false,\n      isChooseColorAction: false,\n      isColorPaletteAction: false,\n      isFillColorAction: false,\n      isDrawTriangleAction: false,\n      isEraseAction: false,\n      isPenAction: false,\n      isStrokeAction: false,\n      isDrawCircleAction: false,\n      isDrawRectangleAction: false,\n      isDrawFillRectangleAction: false,\n      isMirrorPenAction: false,\n      isLightenColorAction: false,\n      isDarkenColorAction: false,\n      isMoveAction: false,\n      isDitheringAction: false,\n      isAllPixelsSameColorAction: false,\n    },\n  );\n\n  const toggleToolAction = useCallback((keyName) => {\n    const { [keyName]: keyValue, ...newObj } = toolAction;\n\n    Object.keys(newObj).forEach((key) => {\n      newObj[key] = false;\n    });\n\n    newObj[keyName] = !keyValue;\n    setToolAction(newObj);\n  }, [toolAction]);\n\n  return { toggleToolAction, toolAction };\n};\n\nconst useSetPenSizeAction = () => {\n  const [penSizeAction, setPenSizeAction] = useState(\n    {\n      isPenSizeAction1: false,\n      isPenSizeAction: false,\n    },\n  );\n\n  const togglePenSizeAction = (keyName) => {\n    const { [keyName]: keyValue, ...newObj } = penSizeAction;\n\n    Object.keys(newObj).forEach((key) => {\n      newObj[key] = false;\n    });\n\n    newObj[keyName] = !keyValue;\n    setPenSizeAction(newObj);\n  };\n\n  return { togglePenSizeAction, penSizeAction };\n};\n\nconst getFromStorage = (key, def) => {\n  try {\n    return JSON.parse(localStorage.getItem(key)) || def;\n  } catch (err) {\n    return def;\n  }\n};\n\nconst appendObjectToStorage = (storage, obj) => {\n  let state = getFromStorage(storage, {});\n\n  state = {\n    ...state,\n    ...obj,\n  };\n\n  localStorage.setItem(storage, JSON.stringify(state));\n};\n\nconst defaultKeyboardMap = {\n  [toolNames.PEN_TOOL]: 'p',\n  [toolNames.ERASER_TOOL]: 'e',\n  [toolNames.COLOR_BUCKET_TOOL]: 'b',\n  [toolNames.MAGIC_COLOR_BUCKET_TOOL]: 'a',\n  [toolNames.COLOR_PICKER_TOOL]: 'o',\n  [toolNames.RECTANGLE_TOOL]: 'r',\n  [toolNames.CIRCLE_TOOL]: 'c',\n  [toolNames.LIGHTEN_TOOL]: 'u',\n  [toolNames.DARKEN_TOOL]: 'i',\n  [toolNames.DITHERING_TOOL]: 't',\n  [toolNames.STROKE_TOOL]: 'l',\n  [toolNames.MIRROR_PEN_TOOL]: 'v',\n  [toolNames.MOVE_TOOL]: 'm',\n  [toolNames.PEN_SIZE_1]: '1',\n  [toolNames.PEN_SIZE_2]: '2',\n  [toolNames.PEN_SIZE_3]: '3',\n  [toolNames.PEN_SIZE_4]: '4',\n  [toolNames.FEATHER_PEN_TOOL]: 'd',\n  [toolNames.CHANGE_COLORS]: 'x',\n  [toolNames.ADD_NEW_FRAME]: 'n',\n  [toolNames.FILL_RECTANGLE_TOOL]: 'f',\n  [toolNames.DRAW_TRIANGLE_TOOL]: 'h',\n};\nconst initialFrames = [{ num: 0 }];\n\nfunction App() {\n  const [keyboardMap, setKeyboardMap] = useState(defaultKeyboardMap);\n  const [framesPerSecond, setFramesPerSecond] = useState(1);\n  const [frames, setFrames] = useState(initialFrames);\n  const prevFrames = usePrev(frames);\n  const [activeFrame, setActiveFrame] = useState(0);\n  const prevActiveFrameNum = usePrev(activeFrame);\n  const framesNums = frames.map(elem => elem.num);\n  const framesNumsObj = {};\n  framesNums.forEach((elem) => {\n    framesNumsObj[elem] = true;\n  });\n  const [framesForPreview, setFramesForPreview] = useState(framesNumsObj);\n  const { toggleToolAction, toolAction } = useSetToolAction();\n  const { togglePenSizeAction, penSizeAction } = useSetPenSizeAction();\n  const [penSize, setPenSize] = useState(20);\n  const [primaryColor, setPrimaryColor] = useState('#000000');\n  const [secondaryColor, setSecondaryColor] = useState('#FFFFFF');\n  const [canvasScale, setCanvasScale] = useState(32);\n  const [startPos, setStartPos] = useState({ rectXBegin: null, rectYBegin: null });\n  const [curPos, setCurPos] = useState({ rectXBegin: 0, rectYBegin: 0 });\n  const [rectSize, setRectSize] = useState(getRectSize(640, canvasScale));\n  const [isOverCanvas, setIsOverCanvas] = useState(false);\n  const [user, setUser] = useState(null);\n\n  const handleLoginSuccess = useCallback((response) => {\n    setUser(response.profileObj);\n  }, []);\n\n  const handleLogout = useCallback(() => {\n    setUser(null);\n  }, []);\n\n  const resetState = useCallback(() => {\n    setFrames(initialFrames);\n    setFramesForPreview({ 0: true });\n    setActiveFrame(0);\n    setPenSize(20);\n    togglePenSizeAction('isPenSizeAction1');\n    setCanvasScale(32);\n    toggleToolAction('isDrawAction');\n    localStorage.removeItem('appstate');\n    setKeyboardMap(defaultKeyboardMap);\n  }, [togglePenSizeAction, toggleToolAction]);\n\n  const restoreSession = useCallback((st) => {\n    if (st.frames) {\n      setFrames(st.frames);\n    }\n\n    if (st.framesForPreview) {\n      setFramesForPreview(st.framesForPreview);\n    }\n\n    if (st.activeFrame) {\n      setActiveFrame(st.activeFrame);\n    }\n\n    if (st.penSize) {\n      setPenSize(st.penSize);\n      togglePenSizeAction(`isPenSizeAction${st.penSize / rectSize}`);\n    } else {\n      togglePenSizeAction(`isPenSizeAction${st.penSize / rectSize}`);\n    }\n\n    if (st.canvasScale) {\n      setCanvasScale(st.canvasScale);\n    }\n\n    if (st.activeToolAction) {\n      toggleToolAction(st.activeToolAction);\n    }\n\n    if (st.keyboardMap) {\n      setKeyboardMap(st.keyboardMap);\n    }\n  }, [rectSize, togglePenSizeAction, toggleToolAction]);\n\n  useEffect(() => {\n    const appState = getFromStorage('appstate', {});\n\n    restoreSession(appState);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const editKey = useCallback((keyName) => {\n    // eslint-disable-next-line no-alert\n    const newKey = window.prompt('Type a new key');\n    const values = Object.values(keyboardMap);\n    const keyboardMapNext = { ...keyboardMap };\n\n    if (values.indexOf(newKey) !== -1) {\n      // eslint-disable-next-line no-alert\n      const message = window.confirm('This key has already established. Change it anyway?');\n      const oldKey = Object.keys(keyboardMap).find(key => keyboardMap[key] === newKey);\n\n      if (message) {\n        keyboardMapNext[oldKey] = '?';\n        keyboardMapNext[keyName] = newKey;\n      }\n    } else {\n      keyboardMapNext[keyName] = newKey;\n    }\n\n    setKeyboardMap(keyboardMapNext);\n  }, [keyboardMap]);\n\n  const handleUnload = useCallback(() => {\n    const activeToolAction = Object.keys(toolAction).find(key => toolAction[key]);\n\n    appendObjectToStorage('appstate', {\n      frames,\n      framesForPreview,\n      activeFrame,\n      penSize,\n      canvasScale,\n      activeToolAction,\n      keyboardMap,\n    });\n  }, [activeFrame, canvasScale, frames, framesForPreview, keyboardMap, penSize, toolAction]);\n\n  useEffect(() => {\n    window.addEventListener('beforeunload', handleUnload);\n\n    return () => window.removeEventListener('beforeunload', handleUnload);\n  }, [handleUnload]);\n\n  const handleFramesChange = useCallback(newFrames => setFrames(newFrames), []);\n\n  const addNewFrame = useCallback(() => {\n    const nextFrame = frames.length;\n    const newArr = frames.slice();\n\n    newArr.push({ num: nextFrame });\n    setFrames(newArr);\n    setActiveFrame(nextFrame);\n\n    const copy = Object.assign({}, framesForPreview);\n    copy[nextFrame] = true;\n    setFramesForPreview(copy);\n  }, [frames, framesForPreview]);\n\n  const deleteFrame = useCallback((num) => {\n    let newArr = [...frames];\n\n    newArr.splice(num, 1);\n    newArr = newArr.map((elem, ind) => ({\n      ...elem,\n      num: ind,\n    }));\n\n    if (newArr.length === 0) {\n      newArr.push({ num: 0 });\n    }\n\n    if (framesForPreview[num]) {\n      const copy = Object.assign({}, framesForPreview);\n      delete copy[num];\n\n      Object.keys(copy).forEach((ind) => {\n        if (ind > num) {\n          copy[ind - 1] = copy[ind];\n          delete copy[ind];\n        }\n      });\n\n      setFrames(newArr);\n      setFramesForPreview(copy);\n      setActiveFrame(activeFrame - 1);\n    }\n  }, [activeFrame, frames, framesForPreview]);\n\n  const duplicateFrame = useCallback((num) => {\n    let newArr = [...frames];\n\n    newArr.splice(num, 0, newArr[num]);\n    newArr = newArr.map((elem, ind) => ({\n      ...elem,\n      num: ind,\n    }));\n\n    const copy = Object.assign({}, framesForPreview);\n\n    Object.keys(copy).forEach((ind) => {\n      if (ind > num) {\n        copy[+ind + 1] = copy[+ind + 2];\n        copy[+ind + 1] = true;\n      }\n    });\n    copy[num + 1] = true;\n\n    setFrames(newArr);\n    setActiveFrame(num + 1);\n    setFramesForPreview(copy);\n  }, [frames, framesForPreview]);\n\n  const addFrameToPreview = useCallback((num) => {\n    const copy = Object.assign({}, framesForPreview);\n\n    if (copy[num]) {\n      delete copy[num];\n    } else {\n      copy[num] = true;\n    }\n\n    setFramesForPreview(copy);\n  }, [framesForPreview]);\n\n  const changeColors = useCallback(() => {\n    const currentColor = primaryColor;\n    setPrimaryColor(secondaryColor);\n    setSecondaryColor(currentColor);\n  }, [primaryColor, secondaryColor]);\n\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (e.key === keyboardMap.PEN_SIZE_1) {\n        togglePenSizeAction('isPenSizeAction1');\n        setPenSize(rectSize);\n      }\n      if (e.key === keyboardMap.PEN_SIZE_2) {\n        togglePenSizeAction('isPenSizeAction2');\n        setPenSize(rectSize * 2);\n      }\n      if (e.key === keyboardMap.PEN_SIZE_3) {\n        togglePenSizeAction('isPenSizeAction3');\n        setPenSize(rectSize * 3);\n      }\n      if (e.key === keyboardMap.PEN_SIZE_4) {\n        togglePenSizeAction('isPenSizeAction4');\n        setPenSize(rectSize * 4);\n      }\n      if (e.key === keyboardMap.PEN_TOOL) {\n        toggleToolAction('isDrawAction');\n      }\n      if (e.key === keyboardMap.MIRROR_PEN_TOOL) {\n        toggleToolAction('isMirrorPenAction');\n      }\n      if (e.key === keyboardMap.ERASER_TOOL) {\n        toggleToolAction('isEraseAction');\n      }\n      if (e.key === keyboardMap.COLOR_BUCKET_TOOL) {\n        toggleToolAction('isFillColorAction');\n      }\n      if (e.key === keyboardMap.MAGIC_COLOR_BUCKET_TOOL) {\n        toggleToolAction('isAllPixelsSameColorAction');\n      }\n      if (e.key === keyboardMap.STROKE_TOOL) {\n        toggleToolAction('isStrokeAction');\n      }\n      if (e.key === keyboardMap.RECTANGLE_TOOL) {\n        toggleToolAction('isDrawRectangleAction');\n      }\n      if (e.key === keyboardMap.CIRCLE_TOOL) {\n        toggleToolAction('isDrawCircleAction');\n      }\n      if (e.key === keyboardMap.MOVE_TOOL) {\n        toggleToolAction('isMoveAction');\n      }\n      if (e.key === keyboardMap.LIGHTEN_TOOL) {\n        toggleToolAction('isLightenColorAction');\n      }\n      if (e.key === keyboardMap.DARKEN_TOOL) {\n        toggleToolAction('isDarkenColorAction');\n      }\n      if (e.key === keyboardMap.DITHERING_TOOL) {\n        toggleToolAction('isDitheringAction');\n      }\n      if (e.key === keyboardMap.COLOR_PICKER_TOOL) {\n        toggleToolAction('isChooseColorAction');\n      }\n      if (e.key === keyboardMap.FEATHER_PEN_TOOL) {\n        toggleToolAction('isPenAction');\n      }\n      if (e.key === keyboardMap.ADD_NEW_FRAME) {\n        addNewFrame();\n      }\n      if (e.key === 'q' && e.ctrlKey) {\n        deleteFrame(activeFrame);\n      }\n      if (e.key === 'y' && e.ctrlKey) {\n        duplicateFrame(activeFrame);\n      }\n      if (e.key === 'ArrowUp') {\n        if (activeFrame >= 1) {\n          setActiveFrame(activeFrame - 1);\n        }\n      }\n      if (e.key === 'ArrowDown') {\n        if (activeFrame < frames.length - 1) {\n          setActiveFrame(activeFrame + 1);\n        }\n      }\n      if (e.key === keyboardMap.CHANGE_COLORS) {\n        changeColors();\n      }\n      if (e.key === keyboardMap.FILL_RECTANGLE_TOOL) {\n        toggleToolAction('isDrawFillRectangleAction');\n      }\n      if (e.key === keyboardMap.DRAW_TRIANGLE_TOOL) {\n        toggleToolAction('isDrawTriangleAction');\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [\n    activeFrame,\n    addNewFrame,\n    changeColors,\n    deleteFrame,\n    duplicateFrame,\n    frames.length,\n    keyboardMap,\n    rectSize,\n    togglePenSizeAction,\n    toggleToolAction,\n  ]);\n\n  const mouseUpHandler = (value) => {\n    const newArr = frames.slice();\n    newArr[activeFrame] = {\n      ...newArr[activeFrame],\n      image: value,\n    };\n\n    setFrames(newArr);\n  };\n\n  const onCanvasChange = useCallback((value) => {\n    const newArr = frames.slice();\n    newArr[activeFrame] = {\n      ...newArr[activeFrame],\n      image: value,\n    };\n\n    setFrames(newArr);\n  }, [activeFrame, frames]);\n\n  const handleLoadPiskel = useCallback((e) => {\n    const file = e.target.files[0];\n    const fileReader = new FileReader();\n\n    fileReader.onload = (fe) => {\n      try {\n        const { appVersion, piskel } = JSON.parse(decodeURIComponent(fe.target.result));\n\n        if (appVersion !== APP_VERSION) {\n          alert('Incompatible files version');\n\n          return;\n        }\n\n        restoreSession(piskel);\n      } catch (err) {\n        alert('Failed to load file');\n      }\n    };\n\n    fileReader.readAsText(file);\n  }, [restoreSession]);\n\n  const handleDownloadPiskelClone = useCallback(() => {\n    const data = {\n      appVersion: APP_VERSION,\n      piskel: {\n        activeFrame,\n        canvasScale,\n        frames,\n        framesForPreview,\n        keyboardMap,\n      },\n    };\n\n    downloadFile(JSON.stringify(data), `new_file_${Date.now()}.piskelclone`);\n  }, [activeFrame, canvasScale, frames, framesForPreview, keyboardMap]);\n\n  return (\n    <div className=\"wrapper\">\n      <header>\n        <Auth\n          clientId=\"401315303224-6m1l57e8u2i7dj8qhbqqm1jo5psroloe.apps.googleusercontent.com\"\n          onLoginSuccess={handleLoginSuccess}\n          onLoginFail={() => alert('Can\\'t login')}\n          onLogout={handleLogout}\n          user={user}\n        />\n        <Link className=\"link-to-landing-page\" to=\"/\">\n        <span>PISKEL CLONE</span>\n        </Link>\n      </header>\n      <main>\n        <aside className=\"sidebar-left\">\n          <PenSize\n            active={penSizeAction}\n            onPenSizeAction={(e) => {\n              togglePenSizeAction(`isPenSizeAction${e.target.getAttribute('data-size')}`);\n              setPenSize(rectSize * +e.target.getAttribute('data-size'));\n            }}\n          />\n          <Tools\n            active={toolAction}\n            onDrawAction={() => {\n              toggleToolAction('isDrawAction');\n            }}\n            onFillColorAction={() => {\n              toggleToolAction('isFillColorAction');\n            }}\n            onDrawTriangleAction={() => {\n              toggleToolAction('isDrawTriangleAction');\n            }}\n            onEraseAction={() => {\n              toggleToolAction('isEraseAction');\n            }}\n            onStrokeAction={() => {\n              toggleToolAction('isStrokeAction');\n            }}\n            onChooseColorAction={() => {\n              toggleToolAction('isChooseColorAction');\n            }}\n            onDrawCircleAction={() => {\n              toggleToolAction('isDrawCircleAction');\n            }}\n            onDrawRectangleAction={() => {\n              toggleToolAction('isDrawRectangleAction');\n            }}\n            onDrawFillRectangleAction={() => {\n              toggleToolAction('isDrawFillRectangleAction');\n            }}\n            onMirrorPenAction={() => {\n              toggleToolAction('isMirrorPenAction');\n            }}\n            onLightenColorAction={() => {\n              toggleToolAction('isLightenColorAction');\n            }}\n            onDarkenColorAction={() => {\n              toggleToolAction('isDarkenColorAction');\n            }}\n            onMoveAction={() => {\n              toggleToolAction('isMoveAction');\n            }}\n            onDitheringAction={() => {\n              toggleToolAction('isDitheringAction');\n            }}\n            onPenAction={() => {\n              toggleToolAction('isPenAction');\n            }}\n            onAllPixelsSameColorAction={() => {\n              toggleToolAction('isAllPixelsSameColorAction');\n            }}\n            onPrimaryColorChange={e => setPrimaryColor(e.target.value)}\n            onSecondaryColorChange={e => setSecondaryColor(e.target.value)}\n            onColorChange={changeColors}\n            primaryColor={primaryColor}\n            secondaryColor={secondaryColor}\n          />\n          <FrameList\n            activeFrame={activeFrame}\n            checkedFrames={framesForPreview}\n            frames={frames}\n            onAddFrame={addNewFrame}\n            onDelete={deleteFrame}\n            onDouble={duplicateFrame}\n            onChange={handleFramesChange}\n            onFrameClick={num => setActiveFrame(num)}\n            onNumClick={addFrameToPreview}\n          />\n          <KeyboardShortcuts\n            onChange={editKey}\n            keyboardMap={keyboardMap}\n          />\n        </aside>\n        <div className=\"content\">\n          <div className=\"top-canvas\">\n            {frames[activeFrame] && (\n              <Canvas\n                clearImage={(prevActiveFrameNum !== activeFrame)\n                || (frames[activeFrame].image !== prevFrames[prevActiveFrameNum].image)\n                }\n                width={640}\n                height={640}\n                active={toolAction}\n                imgSrc={frames[activeFrame].image}\n                name=\"top-canvas\"\n                onChange={onCanvasChange}\n                onMouseDown={(e) => {\n                  const pos = getRectCoordsFromEvent(e, canvasScale);\n\n                  setStartPos(pos);\n                  setCurPos(pos);\n                }}\n                onMouseMove={(e) => {\n                  setCurPos(getRectCoordsFromEvent(e, canvasScale));\n                }}\n                onMouseEnter={() => {\n                  setIsOverCanvas(true);\n                }}\n                onMouseLeave={() => {\n                  setIsOverCanvas(false);\n                }}\n                scale={1 / (canvasScale / 32)}\n              >\n                {toolAction.isDrawAction && (\n                  <PixelPen\n                    onMouseUp={mouseUpHandler}\n                    primaryColor={primaryColor}\n                    secondaryColor={secondaryColor}\n                    x={curPos.rectXBegin}\n                    y={curPos.rectYBegin}\n                    width={penSize}\n                    height={penSize}\n                  />\n                )}\n                {toolAction.isEraseAction && (\n                  <EraseAction\n                    onMouseUp={mouseUpHandler}\n                    x={curPos.rectXBegin}\n                    y={curPos.rectYBegin}\n                    width={penSize}\n                    height={penSize}\n                  />\n                )}\n                {toolAction.isStrokeAction && (\n                  <Stroke\n                    onMouseUp={mouseUpHandler}\n                    currentColor={primaryColor}\n                    canvasScale={canvasScale}\n                    x={startPos.rectXBegin}\n                    y={startPos.rectYBegin}\n                    rectSize={penSize}\n                  />\n                )}\n                {toolAction.isDrawCircleAction && (\n                  <DrawCircle\n                    onMouseUp={mouseUpHandler}\n                    currentColor={primaryColor}\n                    canvasScale={canvasScale}\n                    x={startPos.rectXBegin}\n                    y={startPos.rectYBegin}\n                    rectSize={penSize}\n                  />\n                )}\n                {toolAction.isDrawRectangleAction && (\n                  <DrawRectangle\n                    onMouseUp={mouseUpHandler}\n                    currentColor={primaryColor}\n                    canvasScale={canvasScale}\n                    x={startPos.rectXBegin}\n                    y={startPos.rectYBegin}\n                    rectSize={penSize}\n                  />\n                )}\n                {toolAction.isDrawFillRectangleAction && (\n                  <DrawFillRectangle\n                    onMouseUp={mouseUpHandler}\n                    primaryColor={primaryColor}\n                    secondaryColor={secondaryColor}\n                    canvasScale={canvasScale}\n                    x={startPos.rectXBegin}\n                    y={startPos.rectYBegin}\n                    rectSize={penSize}\n                  />\n                )}\n                {toolAction.isMirrorPenAction && (\n                  <VerticalMirrorPen\n                    onMouseUp={mouseUpHandler}\n                    currentColor={primaryColor}\n                    x={curPos.rectXBegin}\n                    y={curPos.rectYBegin}\n                    width={penSize}\n                    height={penSize}\n                  />\n                )}\n                {toolAction.isPenAction && (\n                  <Pen\n                    onMouseUp={mouseUpHandler}\n                    penSize={penSize}\n                    currentColor={primaryColor}\n                  />\n                )}\n                {toolAction.isFillColorAction && (\n                  <FillColor\n                    onMouseUp={mouseUpHandler}\n                    currentColor={primaryColor}\n                  />\n                )}\n                {toolAction.isDrawTriangleAction && (\n                  <DrawTriangle\n                    onMouseUp={mouseUpHandler}\n                    currentColor={primaryColor}\n                    canvasScale={canvasScale}\n                    x={startPos.rectXBegin}\n                    y={startPos.rectYBegin}\n                    rectSize={penSize}\n                  />\n                )}\n                {toolAction.isChooseColorAction && (\n                  <ChooseColor\n                    onMouseUp={value => setPrimaryColor(value)}\n                  />\n                )}\n                {toolAction.isLightenColorAction && (\n                  <LightenColor\n                    onMouseUp={mouseUpHandler}\n                    canvasScale={canvasScale}\n                    penSize={penSize}\n                  />\n                )}\n                {toolAction.isDarkenColorAction && (\n                  <DarkenColor\n                    onMouseUp={mouseUpHandler}\n                    canvasScale={canvasScale}\n                    penSize={penSize}\n                  />\n                )}\n                {toolAction.isMoveAction && (\n                  <MoveAction\n                    onMouseUp={mouseUpHandler}\n                    image={frames[activeFrame].image}\n                  />\n                )}\n                {toolAction.isDitheringAction && (\n                  <DitheringAction\n                    onMouseUp={mouseUpHandler}\n                    primaryColor={primaryColor}\n                    secondaryColor={secondaryColor}\n                    image={frames[activeFrame].image}\n                    x={curPos.rectXBegin}\n                    y={curPos.rectYBegin}\n                    penSize={penSize}\n                    column={getCursorPosition(\n                      curPos.rectXBegin,\n                      curPos.rectYBegin,\n                      canvasScale,\n                    ).column\n                    }\n                    row={getCursorPosition(curPos.rectXBegin, curPos.rectYBegin, canvasScale).row}\n                  />\n                )}\n                {toolAction.isAllPixelsSameColorAction && (\n                  <AllPixelsSameColorAction\n                    onMouseUp={mouseUpHandler}\n                    currentColor={primaryColor}\n                  />\n                )}\n              </Canvas>\n            )}\n          </div>\n        </div>\n        <aside className=\"sidebar-right\">\n          <Preview\n            frames={frames.filter(elem => framesForPreview[elem.num])}\n            framesPerSecond={framesPerSecond}\n            onFullScreenShow={el => el.requestFullscreen()}\n          />\n          <FPS onChange={value => setFramesPerSecond(value)} />\n          <Export\n            onPNGExport={() => {\n              const link = document.createElement('a');\n              link.setAttribute('href', frames[activeFrame].image);\n              link.setAttribute('download', 'canvasImage');\n              link.click();\n            }}\n            onPNGSetExport={() => {\n              const imageSources = frames.filter(elem => framesForPreview[elem.num]).map(elem => elem.image);\n              const link = document.createElement('a');\n              imageSources.forEach((imgSrc) => {\n                link.setAttribute('href', imgSrc);\n                link.setAttribute('download', 'canvasImage');\n                link.click();\n              });\n            }}\n            onGIFExport={async () => {\n              const imageSources = frames.filter(elem => framesForPreview[elem.num]).map(elem => elem.image);\n              const gif = new GIF({\n                width: 640,\n                height: 640,\n              });\n              const canvas = document.createElement('canvas');\n              canvas.width = 640;\n              canvas.height = 640;\n              const ctx = canvas.getContext('2d');\n\n              ctx.fillStyle = '#fff';\n\n              const images = await loadImages(imageSources);\n\n              images.forEach((imgEl) => {\n                ctx.fillRect(0, 0, 640, 640);\n                ctx.drawImage(imgEl, 0, 0);\n                gif.addFrame(ctx, { copy: true, delay: 1000 / framesPerSecond });\n              });\n\n              gif.on('finished', (blob) => {\n                download(URL.createObjectURL(blob), 'New Piskel');\n              });\n\n              gif.render();\n            }}\n            onAPNGExport={async () => {\n              const imageSources = frames.filter(elem => framesForPreview[elem.num]).map(elem => elem.image);\n              const canvas = document.createElement('canvas');\n              canvas.width = 640;\n              canvas.height = 640;\n              const ctx = canvas.getContext('2d');\n\n              ctx.fillStyle = '#fff';\n\n              const images = await loadImages(imageSources);\n              const imagesBuffer = images.map((img) => {\n                ctx.fillRect(0, 0, 640, 640);\n                ctx.drawImage(img, 0, 0);\n\n                const imageData = ctx.getImageData(0, 0, 640, 640);\n\n                return imageData.data.buffer;\n              });\n\n              const pngBuffer = UPNG.encode(imagesBuffer, 640, 640, 0, imagesBuffer.map(() => 1000 / framesPerSecond));\n              const blob = new Blob([pngBuffer], { type: 'image/png' });\n              const imageUrl = URL.createObjectURL(blob);\n\n              download(imageUrl, 'Piskel.png');\n            }}\n            onLoadPiskel={handleLoadPiskel}\n            onResetClick={resetState}\n            onSave={handleDownloadPiskelClone}\n          />\n          <CanvasScale\n            onChange={(e) => {\n              const scale = +e.target.value;\n              const deltaScale = scale / canvasScale;\n\n              setCanvasScale(scale);\n              setRectSize(getRectSize(640, scale));\n              setPenSize(penSize / deltaScale);\n            }}\n            options={scales}\n            value={canvasScale}\n          />\n          <CursorPosition\n            isOverCanvas={isOverCanvas}\n            x={getCursorPosition(curPos.rectXBegin, curPos.rectYBegin, canvasScale).column + 1}\n            y={Math.min(getCursorPosition(curPos.rectXBegin, curPos.rectYBegin, canvasScale).row + 1, canvasScale)}\n          />\n        </aside>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport './landingPage.css';\nimport screenshot from './img/screenshot.png';\nimport man from './img/man.gif';\nimport smile from './img/smile.gif';\nimport sun from './img/sun.gif';\n\nfunction LandingPage() {\n  return (\n    <div className=\"landing-page__wrapper\">\n      <header>\n        <h1>PISKEL CLONE</h1>\n      </header>\n      <main className=\"container\">\n        <div className=\"screenshot__wrapper\">\n          <img className=\"screenshot\" src={screenshot} alt=\"piskel clone\" />\n          <div className=\"screenshot__description\">PISKEL CLONE is an editor for animated sprites and pixel art</div>\n          <button className=\"link-to-editor\"><Link to=\"/draw\">Create Sprite</Link></button>\n        </div>\n        <div className=\"animation__wrapper\">\n          <h3 className=\"animation__title\">EXAMPLE SPRITES</h3>\n          <div className=\"animation__example-wrapper\">\n            <div className=\"animation__example animation__example-1\">\n              <img src={man} alt=\"animation example\" />\n            </div>\n            <div className=\"animation__example animation__example-2\">\n              <img src={smile} alt=\"animation example\" />\n            </div>\n            <div className=\"animation__example animation__example-3\">\n              <img src={sun} alt=\"animation example\" />\n            </div>\n          </div>\n        </div>\n        <div className=\"functionality\">\n          <ul className=\"functionality__list\">\n            <li className=\"functionality__header\"><span>TOOLS</span></li>\n            <li>Pen</li>\n            <li>Eraser</li>\n            <li>Full color bucket</li>\n            <li>Paint all pixels at the same color</li>\n            <li>Line</li>\n            <li>Ellipse (hold SHIFT to draw circle)</li>\n            <li>Rectangle</li>\n            <li>Filled rectangle</li>\n            <li>Lighten color</li>\n            <li>Darken color</li>\n            <li>Dithering</li>\n            <li>Vertical mirror pen (hold SHIFT to use horizontal mirror pen)</li>\n            <li>Color picker</li>\n            <li>Feather pen</li>\n            <li>Changing primary and secondary colors</li>\n          </ul>\n          <ul className=\"functionality__list\">\n            <li className=\"functionality__header\"><span>FRAME MANAGEMENT</span></li>\n            <li>Ability to add/delete a frame</li>\n            <li>Ability to reorder a frame via Drag and Drop</li>\n            <li>Ability to duplicate a frame</li>\n            <li className=\"functionality__header\"><span>KEYBOARD SHORTCUTS</span></li>\n            <li>All actions are available via keyboard shortcuts</li>\n            <li>Modal window to change keyboard shortcuts</li>\n            <li className=\"functionality__header\"><span>PREVIEW</span></li>\n            <li>Full screen mode</li>\n            <li className=\"functionality__header\"><span>EXPORT</span></li>\n            <li>Single frame as .png</li>\n            <li>One by one frames as .png</li>\n            <li>Result as .gif</li>\n            <li>Result as .apng</li>\n            <li className=\"functionality__header\"><span>SAVING</span></li>\n            <li>Saving user session in localstorage</li>\n          </ul>\n        </div>\n      </main>\n      <footer>\n        <div className=\"author__info\">Developed by <a href=\"https://github.com/alexalizurchik\">Aleksandrina Lizurchik</a></div>\n      </footer>\n    </div>\n  );\n}\n\nexport default LandingPage;\n","import React from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\n\nimport App from './app/App';\nimport LandingPage from '../landingPage/LandingPage';\n\nconst Root = () => (\n  <Router basename={process.env.PUBLIC_URL}>\n    <Route path=\"/\" exact component={LandingPage} />\n    <Route path=\"/draw\" exact component={App} />\n  </Router>\n);\n\nexport default Root;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport Root from './components/Root';\n\nReactDOM.render(\n  <Root />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}