{"version":3,"sources":["landingPage/img/screenshot.png","landingPage/img/man.gif","landingPage/img/smile.gif","landingPage/img/sun.gif","components/frame/Frame.js","utils.js","components/frameList/FrameList.js","components/tools/penSize/PenSize.js","components/colorPalette/ColorPalette.js","components/tools/Tools.js","components/preview/Preview.js","components/FPS/FPS.js","hooks/usePrev.js","components/canvas/Canvas.js","components/tools/Pen.js","components/tools/PixelPen.js","components/tools/EraseAction.js","components/tools/AllPixelsSameColorAction.js","components/tools/FillColor.js","components/tools/FullFillColor.js","algorithms/drawMidPointEllipse.js","algorithms/drawingCircle.js","components/tools/DrawCircle.js","algorithms/drawingRectangle.js","components/tools/DrawRectangle.js","components/tools/DrawFillRectangle.js","components/tools/VerticalMirrorPen.js","components/tools/ChooseColor.js","components/tools/LightenColor.js","components/tools/DarkenColor.js","components/tools/MoveAction.js","components/tools/DitheringAction.js","components/canvas/canvasScale/CanvasScale.js","components/keyboardShortcuts/KeyboardShortcuts.js","components/canvas/cursorPosition/CursorPosition.js","algorithms/drawLine.js","components/tools/Stroke.js","components/export/Export.js","components/app/App.js","landingPage/LandingPage.js","components/Root.js","index.js"],"names":["module","exports","__webpack_require__","p","Frame","_ref","active","checked","moving","onClick","onDelete","onDouble","onNumClick","num","image","onMouseDown","handleClick","useCallback","react_default","a","createElement","className","concat","e","alt","src","stopPropagation","title","defaultProps","getRelativeClientFrameY","elem","y","targetRect","getBoundingClientRect","parentOffsetTop","top","offsetTop","getElemUnderCursor","Math","round","clientY","clientHeight","getRectSize","width","scale","floor","getRectCoords","x","canvasScale","rectSize","rectXBegin","rectYBegin","getCursorPosition","column","row","getRectCoordsFromEvent","targetRelativeClientY","target","targetRelativeClientX","clientX","getRelativeClientX","hexToRGBA","str","result","exec","r","parseInt","g","b","rgbaToHEX","rgb","toString","slice","fillPixels","startX","startY","canvasWidth","canvasHeight","colorLayer","startColor","paintColor","pixelStack","matchStartColor","pixelPos","data","colorPixel","length","reachLeft","reachRight","newPos","pop","push","getRadius","x1","y1","x2","y2","centerX","centerY","sqrt","getCircleCenter","getHorizontalRadius","abs","getVerticalRadius","clamp","value","min","max","loadImage","onLoad","img","Image","addEventListener","loadImages","sources","Promise","all","map","resolve","even","val","odd","download","url","link","document","setAttribute","click","FrameList","activeFrame","checkedFrames","propsFrames","frames","onAddFrame","onChange","onFrameClick","_useState","useState","_useState2","Object","slicedToArray","setFrames","movingFrameNum","useRef","frameClickRelativeY","frameClone","frameNumUnderCursor","handleDocumentMouseMove","current","movementY","movementX","targetClone","cloneNode","parentElement","appendChild","style","position","zIndex","newArr","objectSpread","useEffect","removeEventListener","handleMouseDown","handleMouseUp","nextFrames","toConsumableArray","movingFrame","frameUnderCursor","ind","removeChild","frame","frame_Frame","key","PenSize","onPenSizeAction","isPenSizeAction1","data-size","isPenSizeAction2","isPenSizeAction3","isPenSizeAction4","ColorPalette","props","assign","type","Tools","onDrawAction","onFillColorAction","onFullFillColorAction","onEraseAction","onStrokeAction","onChooseColorAction","onDrawCircleAction","onDrawRectangleAction","onDrawFillRectangleAction","onMirrorPenAction","onAllPixelsSameColorAction","onPenAction","onLightenColorAction","onDarkenColorAction","onMoveAction","onDitheringAction","onPrimaryColorChange","onSecondaryColorChange","onColorChange","primaryColor","secondaryColor","isDrawAction","isEraseAction","isFillColorAction","isAllPixelsSameColorAction","isStrokeAction","isPenAction","isDrawRectangleAction","isDrawCircleAction","isDrawFillRectangleAction","isFullFillColorAction","isLightenColorAction","isDarkenColorAction","isMoveAction","isChooseColorAction","isDitheringAction","isMirrorPenAction","colorPalette_ColorPalette","Preview","framesPerSecond","onFullScreenShow","frameInd","setFrameInd","currentFrame","previewRef","timer","setTimeout","nextFrame","clearTimeout","ref","onMouseOver","FPS","setFramesPerSecond","name","defaultValue","usePrev","CanvasContext","React","createContext","Canvas","children","clearImage","imgSrc","onMouseMove","height","onMouseEnter","onMouseLeave","canvasRef","prevScale","clearCanvas","getContext","clearRect","ctx","prevSmoothing","imageSmoothingEnabled","dScale","drawImage","dataUrl","toDataURL","Provider","Pen","onMouseUp","objectWithoutProperties","canvas","useContext","isMouseDown","getImgLink","handler","rect","left","lineWidth","penSize","lineTo","strokeStyle","currentColor","stroke","beginPath","arc","PI","fillStyle","fill","moveTo","setMouseDown","Function","prototype","propTypes","PropTypes","number","func","string","PixelPen","which","fillRect","EraseAction","AllPixelsSameColorAction","currentColorRGBA","imgData","getImageData","startingColor","i","putImageData","unsetMouseDown","FillColor","rgba","FullFillColor","drawMidPointEllipse","$rx","$ry","$xc","$yc","cb","$x","$y","$d1","$dx","$dy","$d2","drawingCircle","radius","x0","y0","gap","delta","DrawCircle","circleEndX","setCircleEndX","_useState3","_useState4","circleEndY","setCircleEndY","imageData","requestAnimationFrame","plot","isFinite","currentColorRgba","_getRectCoords","setPixel","circleCenter","horizontalRadius","verticalRadius","shiftKey","p1","p2","p3","p4","toggleMouseDown","drawingRectangle","DrawRectangle","rectEndX","setRectEndX","rectEndY","setRectEndY","DrawFillRectangle","outerRectWidth","outerRectHeight","horizontalSide1","horizontalSide2","verticalSide1","verticalSide2","innerRectWidth","innerRectHeight","innerSide1","innerSide2","VerticalMirrorPen","offsetHeight","offsetWidth","ChooseColor","getColorValue","red","green","blue","alpha","chosenColor","LightenColor","mouseUpHandler","mouseMoveHandler","currentX","currentY","rectCoords","DarkenColor","MoveAction","rectsNum","innerFirstRectColumn","innerFirstRectRow","j","rowNum","colNum","any","CanvasScale","options","id","htmlFor","KeyboardShortcuts","keyMap","keyboardMap","isModalWindowOpened","onOpen","querySelector","classList","add","remove","PEN_TOOL","ERASER_TOOL","MIRROR_PEN_TOOL","COLOR_BUCKET_TOOL","MAGIC_COLOR_BUCKET_TOOL","STROKE_TOOL","RECTANGLE_TOOL","CIRCLE_TOOL","MOVE_TOOL","LIGHTEN_TOOL","DARKEN_TOOL","DITHERING_TOOL","COLOR_PICKER_TOOL","FEATHER_PEN_TOOL","FILL_RECTANGLE_TOOL","FILL_COLOR_TOOL","PEN_SIZE_1","PEN_SIZE_2","PEN_SIZE_3","PEN_SIZE_4","ADD_NEW_FRAME","CHANGE_COLORS","CursorPosition","isOverCanvas","drawLine","deltaX","deltaY","signX","signY","error","error2","Stroke","strokeEndX","setStrokeEndX","strokeEndY","setStrokeEndY","Export","onPNGExport","onPNGSetExport","onGIFExport","onResetClick","onAPNGExport","onSave","scales","useSetToolAction","isPenSizeAction","isColorPaletteAction","toolAction","setToolAction","toggleToolAction","keyName","keyValue","newObj","_toPropertyKey","keys","forEach","useSetPenSizeAction","penSizeAction","setPenSizeAction","togglePenSizeAction","getFromStorage","def","JSON","parse","localStorage","getItem","err","appendObjectToStorage","storage","obj","state","setItem","stringify","KEYMAP","KeyboardEvent","_KeyboardEvent","defineProperty","editKey","newKey","window","prompt","values","indexOf","message","confirm","oldKey","find","initialFrames","App","_useState5","_useState6","_useState7","_useState8","prevFrames","_useState9","_useState10","setActiveFrame","prevActiveFrameNum","framesNums","framesNumsObj","_useState11","_useState12","framesForPreview","setFramesForPreview","_useSetToolAction","_useSetPenSizeAction","_useState13","_useState14","setPenSize","_useState15","_useState16","setPrimaryColor","_useState17","_useState18","setSecondaryColor","_useState19","_useState20","setCanvasScale","_useState21","_useState22","startPos","setStartPos","_useState23","_useState24","curPos","setCurPos","_useState25","_useState26","setRectSize","_useState27","_useState28","setIsOverCanvas","resetState","0","removeItem","_getFromStorage","frameList","ffp","activeFrameNum","sizeOfPen","tool","activeToolAction","handleUnload","handleFramesChange","newFrames","addNewFrame","copy","deleteFrame","splice","duplicateFrame","addFrameToPreview","changeColors","handleKeyDown","ctrlKey","onCanvasChange","react_router_dom","to","penSize_PenSize","getAttribute","tools_Tools","frameList_FrameList","keyboardShortcuts_KeyboardShortcuts","canvas_Canvas","pos","tools_PixelPen","tools_EraseAction","tools_Stroke","tools_DrawCircle","tools_DrawRectangle","tools_DrawFillRectangle","tools_VerticalMirrorPen","tools_Pen","tools_FillColor","tools_FullFillColor","tools_ChooseColor","tools_LightenColor","tools_DarkenColor","tools_MoveAction","DitheringAction","tools_AllPixelsSameColorAction","preview_Preview","filter","el","requestFullscreen","FPS_FPS","export_Export","imageSources","asyncToGenerator","regenerator_default","mark","_callee","gif","wrap","_context","prev","next","GIF","sent","imgEl","addFrame","delay","on","blob","URL","createObjectURL","render","stop","_callee2","images","imagesBuffer","pngBuffer","imageUrl","_context2","buffer","UPNG","encode","Blob","canvasScale_CanvasScale","deltaScale","cursorPosition_CursorPosition","LandingPage","screenshot","man","smile","sun","href","Root","basename","process","react_router","path","exact","component","ReactDOM","components_Root","getElementById"],"mappings":"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","file":"static/js/main.a2639a50.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/screenshot.c4fe95d6.png\";","module.exports = __webpack_public_path__ + \"static/media/man.1cb9bd25.gif\";","module.exports = __webpack_public_path__ + \"static/media/smile.b441c2a8.gif\";","module.exports = __webpack_public_path__ + \"static/media/sun.43de2d59.gif\";","import React, { useCallback } from 'react';\nimport './frame.css';\nimport PropTypes from 'prop-types';\n\nfunction Frame({\n  active,\n  checked,\n  moving,\n  onClick,\n  onDelete,\n  onDouble,\n  onNumClick,\n  num,\n  image,\n  onMouseDown,\n}) {\n  const handleDelete = (e) => {\n    e.stopPropagation();\n    onDelete(num, e);\n  };\n  const handleDouble = (e) => {\n    e.stopPropagation();\n    onDouble(num, e);\n  };\n  const handleNumClick = (e) => {\n    e.stopPropagation();\n\n    onNumClick(num, e);\n  };\n\n  const handleMouseDown = (e) => {\n    onMouseDown(num, e);\n  };\n\n  const handleClick = useCallback(() => {\n    onClick(num);\n  }, [onClick, num]);\n\n  return (\n    <div\n      className={`frame ${active ? 'frame--active' : ''} ${moving ? 'frame--moving' : ''}`}\n      onMouseDown={handleMouseDown}\n      onClick={handleClick}\n    >\n      {image && <img alt=\"pic\" className=\"frame__img\" src={image} />}\n\n      <button\n        onClick={handleDelete}\n        onMouseDown={e => e.stopPropagation()}\n        className=\"delete-action\"\n        title=\"Delete this frame\"\n      />\n      <button\n        onClick={handleDouble}\n        onMouseDown={e => e.stopPropagation()}\n        className=\"copy-action\"\n        title=\"Duplicate this frame\"\n      />\n      <button\n        onClick={handleNumClick}\n        onMouseDown={e => e.stopPropagation()}\n        className={`add-to-animation-action ${!checked ? 'add-to-animation-action--inactive' : ''}`}\n        title=\"Toggle for preview\"\n      >\n        {num + 1}\n      </button>\n    </div>\n  );\n}\n\nFrame.propTypes = {\n  active: PropTypes.bool,\n  checked: PropTypes.bool,\n  moving: PropTypes.bool,\n  onClick: PropTypes.func,\n  onDelete: PropTypes.func,\n  onDouble: PropTypes.func,\n  onMouseDown: PropTypes.func,\n  onNumClick: PropTypes.func,\n  onMouseUp: PropTypes.func,\n  onMouseMove: PropTypes.func,\n  num: PropTypes.number,\n  image: PropTypes.any,\n};\n\nFrame.defaultProps = {\n  active: false,\n  checked: false,\n  moving: false,\n};\n\nexport default Frame;\n","export const getRelativeClientFrameY = (elem, y) => {\n  const targetRect = elem.getBoundingClientRect();\n  const parentOffsetTop = targetRect.top - elem.offsetTop;\n  const relativeY = y - targetRect.y;\n\n  return relativeY + parentOffsetTop;\n};\n\nexport const getRelativeClientX = (e) => {\n  const targetRect = e.target.getBoundingClientRect();\n\n  return e.clientX - targetRect.x;\n};\n\nexport const getRelativeClientY = (elem, y) => {\n  const targetRect = elem.getBoundingClientRect();\n\n  return y - targetRect.y;\n};\n\nexport const getElemUnderCursor = ((e, elem) => Math.round((e.clientY - getRelativeClientFrameY(elem, e.clientY)) / elem.clientHeight));\n\nexport const getRectSize = (width, scale) => Math.floor(width / scale);\n\nexport const getRectCoords = (x, y, canvasScale) => {\n  const rectSize = getRectSize(640, canvasScale);\n  const targetColumn = Math.floor(x / rectSize);\n  const targetRow = Math.floor(y / rectSize);\n\n  return { rectXBegin: targetColumn * rectSize, rectYBegin: targetRow * rectSize };\n};\n\nexport const getCursorPosition = (x, y, canvasScale) => {\n  const rectSize = getRectSize(640, canvasScale);\n  const targetColumn = Math.floor(x / rectSize);\n  const targetRow = Math.floor(y / rectSize);\n\n  return { column: targetColumn, row: targetRow };\n};\n\nexport const getRectCoordsFromEvent = (e, canvasScale) => {\n  const targetRelativeClientY = getRelativeClientY(e.target, e.clientY);\n  const targetRelativeClientX = getRelativeClientX(e);\n\n  return getRectCoords(targetRelativeClientX, targetRelativeClientY, canvasScale);\n};\n\nexport const hexToRGBA = (str) => {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(str);\n\n  return result ? {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16),\n    a: 255,\n  } : null;\n};\n\n// eslint-disable-next-line no-bitwise\nexport const rgbaToHEX = rgb => `#${(`000000${((rgb.r << 16) | (rgb.g << 8) | rgb.b).toString(16)}`).slice(-6)}`;\n\nexport const fillPixels = (startX, startY, canvasWidth, canvasHeight, colorLayer, startColor, paintColor) => {\n  const pixelStack = [[startX, startY]];\n\n  function matchStartColor(pixelPos) {\n    const r = colorLayer.data[pixelPos];\n    const g = colorLayer.data[pixelPos + 1];\n    const b = colorLayer.data[pixelPos + 2];\n    const a = colorLayer.data[pixelPos + 3];\n\n    return (r === startColor.r && g === startColor.g && b === startColor.b && a === startColor.a);\n  }\n\n  function colorPixel(pixelPos) {\n    // eslint-disable-next-line no-param-reassign\n    colorLayer.data[pixelPos] = paintColor.r;\n    // eslint-disable-next-line no-param-reassign\n    colorLayer.data[pixelPos + 1] = paintColor.g;\n    // eslint-disable-next-line no-param-reassign\n    colorLayer.data[pixelPos + 2] = paintColor.b;\n    // eslint-disable-next-line no-param-reassign\n    colorLayer.data[pixelPos + 3] = paintColor.a;\n  }\n\n  while (pixelStack.length) {\n    let reachLeft;\n    let reachRight;\n    const newPos = pixelStack.pop();\n    const x = newPos[0];\n    let y = newPos[1];\n\n    let pixelPos = (y * canvasWidth + x) * 4;\n\n    // eslint-disable-next-line no-plusplus\n    while (y-- >= 0 && matchStartColor(pixelPos)) {\n      pixelPos -= canvasWidth * 4;\n    }\n\n    pixelPos += canvasWidth * 4;\n    y += 1;\n    reachLeft = false;\n    reachRight = false;\n    // eslint-disable-next-line no-plusplus\n    while (y++ < canvasHeight - 1 && matchStartColor(pixelPos)) {\n      colorPixel(pixelPos);\n\n      if (x > 0) {\n        if (matchStartColor(pixelPos - 4)) {\n          if (!reachLeft) {\n            pixelStack.push([x - 1, y]);\n            reachLeft = true;\n          }\n        } else if (reachLeft) {\n          reachLeft = false;\n        }\n      }\n\n      if (x < canvasWidth - 1) {\n        if (matchStartColor(pixelPos + 4)) {\n          if (!reachRight) {\n            pixelStack.push([x + 1, y]);\n            reachRight = true;\n          }\n        } else if (reachRight) {\n          reachRight = false;\n        }\n      }\n\n      pixelPos += canvasWidth * 4;\n    }\n  }\n};\n\nexport const getRadius = (x1, y1, x2, y2) => {\n  //    (A; R)   (x  a)2 + (y  b)2 = R2,\n  //  a  b    A   (A; R) .\n  let centerX = x1 + Math.floor((x2 - x1) / 2);\n  let centerY = y1 + Math.floor((y2 - y1) / 2);\n  if (x1 === x2) {\n    centerX = x1;\n  }\n\n  if (y1 === y2) {\n    centerY = y1;\n  }\n\n  return Math.floor(Math.sqrt((x2 - centerX) * (x2 - centerX) + (y2 - centerY) * (y2 - centerY)));\n};\n\nexport const getCircleCenter = (x1, y1, x2, y2) => {\n  let centerX = x1 + Math.floor((x2 - x1) / 2);\n  let centerY = y1 + Math.floor((y2 - y1) / 2);\n\n  if (x1 === x2) {\n    centerX = x1;\n  }\n\n  if (y1 === y2) {\n    centerY = y1;\n  }\n\n  return { x: centerX, y: centerY };\n};\n\nexport const getHorizontalRadius = (x1, x2) => Math.floor(Math.abs(x1 - x2) / 2);\n\nexport const getVerticalRadius = (y1, y2) => Math.floor(Math.abs(y1 - y2) / 2);\n\nexport const clamp = (value, min, max) => Math.min(Math.max(value, min), max);\n\nexport const loadImage = (src, onLoad) => {\n  const img = new Image();\n\n  img.src = src;\n  img.addEventListener('load', onLoad);\n\n  return img;\n};\n\nexport const loadImages = (sources) => {\n  const loadImageAsync = src => new Promise(resolve => loadImage(src, e => resolve(e.target)));\n\n  return Promise.all(sources.map(loadImageAsync));\n};\n\nexport const even = val => val % 2 === 0;\n\nexport const odd = val => !even(val);\n\nexport const download = (url, title) => {\n  const link = document.createElement('a');\n\n  link.setAttribute('href', url);\n  link.setAttribute('download', title);\n  link.click();\n};\n","import React, {\n  useCallback,\n  useState,\n  useRef,\n  useEffect,\n} from 'react';\nimport PropTypes from 'prop-types';\n\nimport Frame from '../frame/Frame';\nimport './frameList.css';\nimport { clamp, getElemUnderCursor, getRelativeClientFrameY } from '../../utils';\n\nfunction FrameList({\n  activeFrame,\n  checkedFrames,\n  onDelete,\n  onDouble,\n  frames: propsFrames,\n  onAddFrame,\n  onChange,\n  onFrameClick,\n  onNumClick,\n}) {\n  const [frames, setFrames] = useState(propsFrames);\n  const movingFrameNum = useRef(null);\n  const frameClickRelativeY = useRef(null);\n  const frameClone = useRef(null);\n  const frameNumUnderCursor = useRef(-1);\n  const handleDocumentMouseMove = useCallback((e) => {\n    if (frameClickRelativeY.current === null || (e.movementY === 0 && e.movementX === 0)) {\n      return;\n    }\n\n    if (!frameClone.current) {\n      const targetClone = e.target.cloneNode(true);\n\n      frameClone.current = targetClone;\n\n      e.target.parentElement.appendChild(targetClone);\n      targetClone.style.position = 'absolute';\n      targetClone.style.zIndex = '10';\n    }\n\n    frameClone.current.style.top = `${e.clientY - frameClickRelativeY.current}px`;\n    frameNumUnderCursor.current = getElemUnderCursor(e, frameClone.current);\n\n    // Ignore moving clone over its position among frames\n    if (frames[frameNumUnderCursor.current] && frames[frameNumUnderCursor.current].moving) {\n      return;\n    }\n\n    frameNumUnderCursor.current = clamp(frameNumUnderCursor.current, 0, frames.length - 1);\n\n    const newArr = frames.map(elem => ({\n      ...elem,\n      moving: false,\n    }));\n\n    newArr[frameNumUnderCursor.current] = {\n      ...newArr[frameNumUnderCursor.current],\n      moving: true,\n    };\n\n    setFrames(newArr);\n  }, [frames]);\n\n  useEffect(() => {\n    document.addEventListener('mousemove', handleDocumentMouseMove);\n\n    return () => document.removeEventListener('mousemove', handleDocumentMouseMove);\n  }, [handleDocumentMouseMove]);\n\n  const handleMouseDown = useCallback((num, e) => {\n    frameClickRelativeY.current = getRelativeClientFrameY(e.target, e.clientY);\n    movingFrameNum.current = num;\n  }, []);\n\n  const handleMouseUp = useCallback(() => {\n    if (!frameClone.current) {\n      frameClickRelativeY.current = null;\n      movingFrameNum.current = null;\n\n      return;\n    }\n\n    let nextFrames = [...frames];\n    const movingFrame = nextFrames[movingFrameNum.current];\n    const frameUnderCursor = nextFrames[frameNumUnderCursor.current];\n\n    nextFrames[frameNumUnderCursor.current] = {\n      ...movingFrame,\n      moving: false,\n    };\n    nextFrames[movingFrameNum.current] = {\n      ...frameUnderCursor,\n      moving: false,\n    };\n    // Update indexes of all frames after changing positions\n    nextFrames = nextFrames.map((elem, ind) => ({\n      ...elem,\n      num: ind,\n    }));\n\n    frameClone.current.parentElement.removeChild(frameClone.current);\n\n    onChange(nextFrames);\n\n    frameClickRelativeY.current = null;\n    movingFrameNum.current = null;\n    frameClone.current = null;\n    frameNumUnderCursor.current = -1;\n  }, [frames, onChange]);\n\n  useEffect(() => {\n    document.addEventListener('mouseup', handleMouseUp);\n\n    return () => document.removeEventListener('mouseup', handleMouseUp);\n  }, [handleMouseUp]);\n\n  useEffect(() => {\n    setFrames(propsFrames);\n  }, [propsFrames]);\n\n  return (\n    <div className=\"frame-list-wrapper\">\n      <div className=\"frame-list\">\n        {frames.map(frame => (\n          <Frame\n            active={activeFrame === frame.num}\n            checked={checkedFrames[frame.num]}\n            key={frame.num}\n            num={frame.num}\n            moving={frame.moving}\n            image={frame.image}\n            onClick={onFrameClick}\n            onNumClick={onNumClick}\n            onDelete={onDelete}\n            onDouble={onDouble}\n            onMouseDown={handleMouseDown}\n          />\n        ))}\n        <button className=\"add-frame-button\" onClick={onAddFrame}>Add a new frame</button>\n      </div>\n    </div>\n  );\n}\n\nFrameList.propTypes = {\n  activeFrame: PropTypes.number,\n  checkedFrames: PropTypes.object,\n  frames: PropTypes.arrayOf(\n    PropTypes.shape({\n      num: PropTypes.number,\n      image: PropTypes.any,\n      moving: PropTypes.bool,\n      key: PropTypes.number,\n    }),\n  ),\n  onAddFrame: PropTypes.func,\n  onChange: PropTypes.func,\n  onDelete: PropTypes.func,\n  onDouble: PropTypes.func,\n  onFrameClick: PropTypes.func,\n  onNumClick: PropTypes.func,\n};\n\nFrameList.defaultProps = {};\n\nexport default FrameList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './penSize.css';\n\nfunction PenSize({\n  active,\n  onPenSizeAction,\n}) {\n  return (\n      <div className=\"pen-size\" onClick={onPenSizeAction} title=\"Pen size from 1 to 4 pixels\">\n        <div className={`pen-size__item pen-size__itemS ${active.isPenSizeAction1 ? 'pen-size__item--active' : ''} `}>\n          <div data-size='1' />\n        </div>\n        <div className={`pen-size__item pen-size__itemM ${active.isPenSizeAction2 ? 'pen-size__item--active' : ''} `}>\n          <div data-size='2' />\n        </div>\n        <div className={`pen-size__item pen-size__itemL ${active.isPenSizeAction3 ? 'pen-size__item--active' : ''} `}>\n          <div data-size='3' />\n        </div>\n        <div className={`pen-size__item pen-size__itemXL ${active.isPenSizeAction4 ? 'pen-size__item--active' : ''} `}>\n          <div data-size='4' />\n        </div>\n      </div>\n  );\n}\n\nPenSize.propTypes = {\n  active: PropTypes.shape({\n    isPenSizeAction1: PropTypes.bool,\n    isPenSizeAction2: PropTypes.bool,\n    isPenSizeAction3: PropTypes.bool,\n    isPenSizeAction4: PropTypes.bool,\n  }),\n  onPenSizeAction: PropTypes.func,\n};\n\nPenSize.defaultProps = {\n  active: false,\n};\n\nexport default PenSize;\n","import React from 'react';\nimport './colorPalette.css';\n\nfunction ColorPalette(props) {\n  return (\n    <input className=\"color-palette\" type=\"color\" {...props} />\n  );\n}\n\nexport default ColorPalette;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ColorPalette from '../colorPalette/ColorPalette';\n\nimport './tools.css';\n\nfunction Tools({\n  active,\n  onDrawAction,\n  onFillColorAction,\n  onFullFillColorAction,\n  onEraseAction,\n  onStrokeAction,\n  onChooseColorAction,\n  onDrawCircleAction,\n  onDrawRectangleAction,\n  onDrawFillRectangleAction,\n  onMirrorPenAction,\n  onAllPixelsSameColorAction,\n  onPenAction,\n  onLightenColorAction,\n  onDarkenColorAction,\n  onMoveAction,\n  onDitheringAction,\n  onPrimaryColorChange,\n  onSecondaryColorChange,\n  onColorChange,\n  primaryColor,\n  secondaryColor,\n}) {\n  return (\n    <div className=\"tools-wrapper\">\n      <ul className=\"tools\">\n        <li>\n          <div className={`tools__item ${active.isDrawAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"draw-action\"\n              onClick={onDrawAction}\n              title=\"Pen tool (P)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isEraseAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"erase-action\"\n              onClick={onEraseAction}\n              title=\"Eraser tool (E)\"\n            />\n          </div>\n        </li>\n        <li>\n          <div className={`tools__item ${active.isFillColorAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"fill-color-action\"\n              onClick={onFillColorAction}\n              title=\"Paint bucket tool (B)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isAllPixelsSameColorAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"fill-pixels-same-color-action\"\n              onClick={onAllPixelsSameColorAction}\n              title=\"Paint all pixels at the same color (A)\"\n            />\n          </div>\n        </li>\n        <li>\n          <div className={`tools__item ${active.isStrokeAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"stroke-action\"\n              onClick={onStrokeAction}\n              title=\"Stroke tool (L)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isPenAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"pen-action\"\n              onClick={onPenAction}\n              title=\"Feather pen tool (D)\"\n            />\n          </div>\n        </li>\n        <li>\n          <div className={`tools__item ${active.isDrawRectangleAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"rectangle-action\"\n              onClick={onDrawRectangleAction}\n              title=\"Rectangle tool (R)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isDrawCircleAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"circle-action\"\n              onClick={onDrawCircleAction}\n              title=\"Circle tool (C). Keep SHIFT for 1 to 1 ratio\"\n            />\n          </div>\n        </li>\n        <li>\n          <div className={`tools__item ${active.isDrawFillRectangleAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"fill-rectangle-action\"\n              onClick={onDrawFillRectangleAction}\n              title=\"Fill rectangle tool (F)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isFullFillColorAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"full-fill-color-action\"\n              onClick={onFullFillColorAction}\n              title=\"Fill the whole canvas (H)\"\n            />\n          </div>\n        </li>\n        <li>\n          <div className={`tools__item ${active.isLightenColorAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"lighten-action\"\n              onClick={onLightenColorAction}\n              title=\"Lighten tool (U)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isDarkenColorAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"darken-action\"\n              onClick={onDarkenColorAction}\n              title=\"Darken tool (I)\"\n            />\n          </div>\n        </li>\n        <li>\n          <div className={`tools__item ${active.isMoveAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"move-action\"\n              onClick={onMoveAction}\n              title=\"Move tool (M)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isChooseColorAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"choose-color-action\"\n              onClick={onChooseColorAction}\n              title=\"Color picker (O)\"\n            />\n          </div>\n        </li>\n        <li>\n          <div className={`tools__item ${active.isDitheringAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"dithering-action\"\n              onClick={onDitheringAction}\n              title=\"Dithering tool (T)\"\n            />\n          </div>\n          <div className={`tools__item ${active.isMirrorPenAction ? 'tools__item--active' : ''}`}>\n            <button\n              className=\"mirror-action\"\n              onClick={onMirrorPenAction}\n              title='Vertical mirror tool (V). Keep SHIFT to use horizontal axis' />\n          </div>\n        </li>\n      </ul>\n      <div className=\"color-palette-wrapper\">\n        <div className=\"color-palette__primary\">\n          <ColorPalette\n            onChange={onPrimaryColorChange}\n            value={primaryColor}\n            title=\"Primary color\"\n          />\n        </div>\n        <div className=\"color-palette__secondary\">\n          <ColorPalette\n            onChange={onSecondaryColorChange}\n            value={secondaryColor}\n            title=\"Secondary color\"\n          />\n        </div>\n        <button\n          className=\"color-change\"\n          onClick={onColorChange}\n          title=\"Swap colors (X)\"\n        />\n      </div>\n    </div>\n  );\n}\n\nTools.propTypes = {\n  active: PropTypes.shape({\n    isChooseColorAction: PropTypes.bool,\n    isColorPaletteAction: PropTypes.bool,\n    isFillColorAction: PropTypes.bool,\n    isDrawCircleAction: PropTypes.bool,\n    isDrawRectangleAction: PropTypes.bool,\n    isDrawFillRectangleAction: PropTypes.bool,\n    isAllPixelsSameColorAction: PropTypes.bool,\n    isPenAction: PropTypes.bool,\n    isDitheringAction: PropTypes.bool,\n    isMirrorPenAction: PropTypes.bool,\n    isEraseAction: PropTypes.bool,\n    isStrokeAction: PropTypes.bool,\n    isLightenColorAction: PropTypes.bool,\n    isDarkenColorAction: PropTypes.bool,\n    isMoveAction: PropTypes.bool,\n    isFullFillColorAction: PropTypes.bool,\n  }),\n  onDrawAction: PropTypes.func,\n  onFillColorAction: PropTypes.func,\n  onFullFillColorAction: PropTypes.func,\n  onAllPixelsSameColorAction: PropTypes.func,\n  onDrawFillRectangleAction: PropTypes.func,\n  onDitheringAction: PropTypes.func,\n  onEraseAction: PropTypes.func,\n  onPenAction: PropTypes.func,\n  onStrokeAction: PropTypes.func,\n  onDrawCircleAction: PropTypes.func,\n  onDrawRectangleAction: PropTypes.func,\n  onMirrorPenAction: PropTypes.func,\n  onChooseColorAction: PropTypes.func,\n  onLightenColorAction: PropTypes.func,\n  onDarkenColorAction: PropTypes.func,\n  onMoveAction: PropTypes.func,\n  onColorPaletteShow: PropTypes.func,\n  currentColor: PropTypes.string,\n  onPrimaryColorChange: PropTypes.func,\n  onColorChange: PropTypes.func,\n  onSecondaryColorChange: PropTypes.func,\n  primaryColor: PropTypes.string,\n  secondaryColor: PropTypes.string,\n};\n\nTools.defaultProps = {\n  active: false,\n};\n\nexport default Tools;\n","import React, { useState, useEffect, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport './preview.css';\n\nfunction Preview({\n  frames, framesPerSecond, onFullScreenShow,\n}) {\n  const [frameInd, setFrameInd] = useState(0);\n  const currentFrame = frames[frameInd];\n  const previewRef = useRef(null);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      const nextFrame = frameInd < frames.length - 1\n        ? frameInd + 1\n        : 0;\n\n      setFrameInd(nextFrame);\n    }, 1000 / framesPerSecond);\n\n    return () => clearTimeout(timer);\n  }, [framesPerSecond, frameInd, frames]);\n  const getTooltip = (() => <span className=\"tooltip\">Full screen preview</span>);\n\n  return (\n    <div className=\"fullscreen-preview\" ref={previewRef}>\n      <div className=\"preview\">\n        {currentFrame && currentFrame.image\n          ? <img className=\"frame__img-active\" src={currentFrame.image} alt=\"Frame\" />\n          : <div className=\"emptyFrame\" />\n        }\n        <button\n          onClick={ e => onFullScreenShow(previewRef.current, e)}\n          onMouseOver={getTooltip}\n          className=\"full-screen-action\"\n          title=\"Full screen preview\"\n        />\n      </div>\n    </div>\n  );\n}\n\nPreview.propTypes = {\n  frames: PropTypes.arrayOf(\n    PropTypes.shape({\n      num: PropTypes.number,\n      image: PropTypes.any,\n    }),\n  ),\n  framesPerSecond: PropTypes.number,\n  onFullScreenShow: PropTypes.func,\n  onExportButton: PropTypes.func,\n};\n\nexport default Preview;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport './fps.css';\n\nfunction FPS({ onChange }) {\n  const [framesPerSecond, setFramesPerSecond] = useState(1);\n  return (\n    <div className=\"FPS-wrapper\">\n      <span>{framesPerSecond} FPS</span>\n      <input type=\"range\" name=\"speed\" min={1} max={24} defaultValue={1} onChange={ (e) => {\n        setFramesPerSecond(+e.target.value);\n        onChange(framesPerSecond);\n      }} />\n    </div>\n  );\n}\n\nFPS.propTypes = {\n  onChange: PropTypes.func,\n};\n\nexport default FPS;\n","import { useRef, useEffect } from 'react';\n\nfunction usePrev(value) {\n  // The ref object is a generic container whose current property is mutable ...\n  // ... and can hold any value, similar to an instance property on a class\n  const ref = useRef(null);\n\n  // Store current value in ref\n  useEffect(() => {\n    ref.current = value;\n  }, [value]); // Only re-run if value changes\n\n  // Return previous value (happens before update in useEffect above)\n  return ref.current;\n}\n\nexport default usePrev;\n","import React, { useEffect, useCallback, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport './canvas.css';\nimport usePrev from '../../hooks/usePrev';\nimport { loadImage } from '../../utils';\n\nexport const CanvasContext = React.createContext(null);\n\nfunction Canvas({\n  active,\n  children,\n  className,\n  clearImage,\n  imgSrc,\n  onChange,\n  onMouseDown,\n  onMouseMove,\n  width,\n  height,\n  onMouseEnter,\n  onMouseLeave,\n  scale,\n}) {\n  const canvasRef = useRef(null);\n  const prevScale = usePrev(scale);\n\n  const clearCanvas = useCallback(\n    () => canvasRef.current.getContext('2d').clearRect(0, 0, width, height),\n    [height, width],\n  );\n\n  // eslint-disable-next-line consistent-return\n  useEffect(() => {\n    const onLoad = (e) => {\n      clearCanvas();\n      const img = e.target;\n      const ctx = canvasRef.current.getContext('2d');\n\n      if (clearImage) {\n        clearCanvas();\n      }\n\n      if (scale !== prevScale) {\n        const prevSmoothing = ctx.imageSmoothingEnabled;\n        const dScale = scale / prevScale;\n\n        clearCanvas();\n        ctx.imageSmoothingEnabled = false;\n        ctx.drawImage(img, 0, 0, img.width * dScale, img.height * dScale);\n        ctx.imageSmoothingEnabled = prevSmoothing;\n      } else {\n        ctx.drawImage(img, 0, 0);\n      }\n\n      const dataUrl = canvasRef.current.toDataURL();\n\n      // Prevent extra changes\n      if (imgSrc !== dataUrl) {\n        onChange(dataUrl);\n      }\n    };\n\n    // If image changes, load it\n    if (imgSrc) {\n      const img = loadImage(imgSrc, onLoad);\n\n      return () => img.removeEventListener('load', onLoad);\n    }\n\n    if (clearImage) {\n      clearCanvas();\n    }\n  }, [clearCanvas, clearImage, height, imgSrc, onChange, prevScale, scale, width]);\n  return (\n    <canvas\n      className={\n        `canvas\n        ${className}\n        ${active.isEraseAction ? 'canvas__erase' : ''}\n        ${active.isDrawAction ? 'canvas__draw' : ''}\n        ${active.isChooseColorAction ? 'canvas__picker' : ''}\n        ${active.isFillColorAction ? 'canvas__fill-color' : ''}\n        ${active.isMoveAction ? 'canvas__move' : ''}\n        `}\n      ref={canvasRef}\n      width={`${width}px`}\n      height={`${height}px`}\n      onMouseDown={onMouseDown}\n      onMouseMove={onMouseMove}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      <CanvasContext.Provider value={canvasRef.current}>\n        {children}\n      </CanvasContext.Provider>\n    </canvas>\n  );\n}\n\nCanvas.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  clearImage: PropTypes.bool,\n  imgSrc: PropTypes.string,\n  height: PropTypes.number,\n  name: PropTypes.string,\n  width: PropTypes.number,\n  onMouseDown: PropTypes.func,\n  onMouseMove: PropTypes.func,\n  onMouseEnter: PropTypes.func,\n  onMouseLeave: PropTypes.func,\n  onChange: PropTypes.func,\n  scale: PropTypes.number,\n  active: PropTypes.shape({\n    isDrawAction: PropTypes.bool,\n    isFillColorAction: PropTypes.bool,\n    isEraseAction: PropTypes.bool,\n    isChooseColorAction: PropTypes.bool,\n    isMoveAction: PropTypes.bool,\n  }),\n};\n\nexport default Canvas;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\n\nfunction Pen({ onMouseUp, ...props }) {\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    if (isMouseDown.current) {\n      onMouseUp(canvas.toDataURL());\n\n      isMouseDown.current = !isMouseDown.current;\n    }\n  }, [onMouseUp, canvas]);\n\n  const handler = useCallback((e) => {\n    const ctx = canvas.getContext('2d');\n    const rect = canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    if (isMouseDown.current) {\n      ctx.lineWidth = props.penSize / 8;\n      ctx.lineTo(x, y);\n      ctx.strokeStyle = props.currentColor;\n      ctx.stroke();\n      ctx.beginPath();\n      ctx.arc(x, y, props.penSize / 16, 0, Math.PI * 2);\n      ctx.fillStyle = props.currentColor;\n      ctx.fill();\n      ctx.beginPath();\n      ctx.moveTo(x, y);\n    } else {\n      ctx.beginPath();\n    }\n  }, [canvas, props.penSize, props.currentColor]);\n\n  const setMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    handler(e);\n  }, [handler]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', setMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', setMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, setMouseDown]);\n\n  return null;\n}\n\nPen.propTypes = {\n  penSize: PropTypes.number,\n  onMouseDown: PropTypes.func,\n  currentColor: PropTypes.string,\n};\n\nexport default Pen;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\n\nfunction PixelPen({ onMouseUp, ...props }) {\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    if (isMouseDown.current) {\n      onMouseUp(canvas.toDataURL());\n\n      isMouseDown.current = !isMouseDown.current;\n    }\n  }, [onMouseUp, canvas]);\n\n  const handler = useCallback((e) => {\n    const ctx = canvas.getContext('2d');\n\n    if (isMouseDown.current) {\n      if (e.which === 1) {\n        ctx.fillStyle = props.primaryColor;\n      } else if (e.which === 3) {\n        ctx.fillStyle = props.secondaryColor;\n      }\n\n      ctx.fillRect(props.x, props.y, props.width, props.height);\n    } else {\n      ctx.beginPath();\n    }\n  }, [canvas, props.x, props.y, props.width, props.height, props.primaryColor, props.secondaryColor]);\n\n  const setMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    handler(e);\n  }, [handler]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', setMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', setMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, setMouseDown]);\n\n  return null;\n}\n\nPixelPen.propTypes = {\n  x: PropTypes.number,\n  y: PropTypes.number,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  onMouseDown: PropTypes.func,\n  primaryColor: PropTypes.string,\n  secondaryColor: PropTypes.string,\n};\n\nexport default PixelPen;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\n\nfunction EraseAction({ onMouseUp, ...props }) {\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    if (isMouseDown.current) {\n      onMouseUp(canvas.toDataURL());\n\n      isMouseDown.current = !isMouseDown.current;\n    }\n  }, [onMouseUp, canvas]);\n\n  const handler = useCallback(() => {\n    const ctx = canvas.getContext('2d');\n\n    if (isMouseDown.current) {\n      ctx.clearRect(props.x, props.y, props.width, props.height);\n    } else {\n      ctx.beginPath();\n    }\n  }, [canvas, props.x, props.y, props.width, props.height]);\n\n  const setMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    handler(e);\n  }, [handler]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', setMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', setMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, setMouseDown]);\n\n  return null;\n}\n\nEraseAction.propTypes = {\n  x: PropTypes.number,\n  y: PropTypes.number,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  onMouseDown: PropTypes.func,\n};\n\nexport default EraseAction;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { hexToRGBA } from '../../utils';\n\nfunction AllPixelsSameColorAction({ onMouseUp, currentColor }) {\n  const canvas = useContext(CanvasContext);\n  const ctx = canvas.getContext('2d');\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    onMouseUp(canvas.toDataURL());\n  }, [canvas, onMouseUp]);\n  const setMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    if (isMouseDown.current) {\n      ctx.fillStyle = currentColor;\n      const rect = canvas.getBoundingClientRect();\n\n      const startX = Math.floor(e.clientX - rect.left);\n      const startY = Math.floor(e.clientY - rect.top);\n\n      const currentColorRGBA = hexToRGBA(currentColor);\n      const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      const pixelPos = (startY * canvas.width + startX) * 4;\n      const red = imgData.data[pixelPos];\n      const green = imgData.data[pixelPos + 1];\n      const blue = imgData.data[pixelPos + 2];\n      const alpha = imgData.data[pixelPos + 3];\n      const startingColor = {\n        r: red,\n        g: green,\n        b: blue,\n        a: alpha,\n      };\n      for (let i = 0; i < imgData.data.length; i += 4) {\n        if (\n          imgData.data[i] === startingColor.r\n          && imgData.data[i + 1] === startingColor.g\n          && imgData.data[i + 2] === startingColor.b\n          && imgData.data[i + 3] === startingColor.a\n        ) {\n          imgData.data[i] = currentColorRGBA.r;\n          imgData.data[i + 1] = currentColorRGBA.g;\n          imgData.data[i + 2] = currentColorRGBA.b;\n          imgData.data[i + 3] = currentColorRGBA.a;\n        }\n      }\n      ctx.putImageData(imgData, 0, 0);\n    }\n  }, [canvas, ctx, currentColor]);\n\n  const unsetMouseDown = useCallback(() => {\n    isMouseDown.current = !isMouseDown.current;\n  }, []);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousedown', setMouseDown);\n    canvas.addEventListener('mouseup', unsetMouseDown);\n    canvas.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousedown', setMouseDown);\n      canvas.removeEventListener('mouseup', unsetMouseDown);\n      canvas.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, getImgLink, setMouseDown, unsetMouseDown]);\n\n  return null;\n}\n\nAllPixelsSameColorAction.propTypes = {\n  onMouseUp: PropTypes.func,\n  currentColor: PropTypes.string,\n};\n\nexport default AllPixelsSameColorAction;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { fillPixels, hexToRGBA } from '../../utils';\n\nfunction FillColor({ onMouseUp, ...props }) {\n  const canvas = useContext(CanvasContext);\n  const ctx = canvas.getContext('2d');\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    onMouseUp(canvas.toDataURL());\n  }, [canvas, onMouseUp]);\n  const setMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    if (isMouseDown.current) {\n      const rect = canvas.getBoundingClientRect();\n      const rgba = hexToRGBA(props.currentColor);\n\n      const startX = Math.floor(e.clientX - rect.left);\n      const startY = Math.floor(e.clientY - rect.top);\n      const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      const pixelPos = (startY * canvas.width + startX) * 4;\n      const red = imgData.data[pixelPos];\n      const green = imgData.data[pixelPos + 1];\n      const blue = imgData.data[pixelPos + 2];\n      const alpha = imgData.data[pixelPos + 3];\n      const startingColor = {\n        r: red,\n        g: green,\n        b: blue,\n        a: alpha,\n      };\n      fillPixels(startX, startY, canvas.width, canvas.height, imgData, startingColor, rgba);\n      ctx.putImageData(imgData, 0, 0);\n    }\n  }, [canvas, ctx, props.currentColor]);\n\n  const unsetMouseDown = useCallback(() => {\n    isMouseDown.current = !isMouseDown.current;\n  }, []);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousedown', setMouseDown);\n    canvas.addEventListener('mouseup', unsetMouseDown);\n    canvas.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousedown', setMouseDown);\n      canvas.removeEventListener('mouseup', unsetMouseDown);\n      canvas.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, getImgLink, setMouseDown, unsetMouseDown]);\n\n  return null;\n}\n\nFillColor.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  currentColor: PropTypes.string,\n};\n\nexport default FillColor;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\n\nfunction FullFillColor({ onMouseUp, currentColor }) {\n  const canvas = useContext(CanvasContext);\n  const ctx = canvas.getContext('2d');\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    onMouseUp(canvas.toDataURL());\n  }, [canvas, onMouseUp]);\n  const setMouseDown = useCallback(() => {\n    isMouseDown.current = !isMouseDown.current;\n    if (isMouseDown.current) {\n      ctx.fillStyle = currentColor;\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n    }\n  }, [canvas, ctx, currentColor]);\n\n  const unsetMouseDown = useCallback(() => {\n    isMouseDown.current = !isMouseDown.current;\n  }, []);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousedown', setMouseDown);\n    canvas.addEventListener('mouseup', unsetMouseDown);\n    canvas.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousedown', setMouseDown);\n      canvas.removeEventListener('mouseup', unsetMouseDown);\n      canvas.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, getImgLink, setMouseDown, unsetMouseDown]);\n\n  return null;\n}\n\nFullFillColor.propTypes = {\n  width: PropTypes.number,\n  height: PropTypes.number,\n  currentColor: PropTypes.string,\n};\n\nexport default FullFillColor;\n","export default ($rx, $ry, $xc, $yc, cb) => {\n  let $x = 0;\n  let $y = $ry;\n\n  // Initial decision parameter of region 1\n  let $d1 = ($ry * $ry) - ($rx * $rx * $ry) + (0.25 * $rx * $rx);\n  let $dx = 2 * $ry * $ry * $x;\n  let $dy = 2 * $rx * $rx * $y;\n\n  // For region 1\n  while ($dx < $dy) {\n    cb([$x + $xc, $y + $yc], [-$x + $xc, $y + $yc], [$x + $xc, -$y + $yc], [-$x + $xc, -$y + $yc]);\n    // Print points based on 4-way symmetry\n\n    // Checking and updating value of\n    // decision parameter based on algorithm\n    if ($d1 < 0) {\n      $x += 1;\n      $dx += (2 * $ry * $ry);\n      $d1 = $d1 + $dx + ($ry * $ry);\n    } else {\n      $x += 1;\n      $y -= 1;\n      $dx += (2 * $ry * $ry);\n      $dy -= (2 * $rx * $rx);\n      $d1 = $d1 + $dx - $dy + ($ry * $ry);\n    }\n  }\n\n  // Decision parameter of region 2\n  let $d2 = (($ry * $ry) * (($x + 0.5) * ($x + 0.5)))\n    + (($rx * $rx) * (($y - 1) * ($y - 1)))\n    - ($rx * $rx * $ry * $ry);\n\n  // Plotting points of region 2\n  while ($y >= 0) {\n    // printing points based on 4-way symmetry\n    cb([$x + $xc, $y + $yc], [-$x + $xc, $y + $yc], [$x + $xc, -$y + $yc], [-$x + $xc, -$y + $yc]);\n    // Checking and updating parameter\n    // value based on algorithm\n    if ($d2 > 0) {\n      $y -= 1;\n      $dy -= (2 * $rx * $rx);\n      $d2 = $d2 + ($rx * $rx) - $dy;\n    } else {\n      $y -= 1;\n      $x += 1;\n      $dx += (2 * $ry * $ry);\n      $dy -= (2 * $rx * $rx);\n      $d2 = $d2 + $dx - $dy + ($rx * $rx);\n    }\n  }\n};\n","export default (x, y, radius, cb) => {\n  let x0 = 0;\n  let y0 = radius;\n  let gap = 0;\n  let delta = (1 - 2 * radius);\n\n  while (y0 >= 0) {\n    cb(x + x0, y - y0);\n    cb(x - x0, y - y0);\n    cb(x - x0, y + y0);\n    cb(x + x0, y + y0);\n    gap = 2 * (delta + y0) - 1;\n\n    if (delta < 0 && gap <= 0) {\n      x0 += 1;\n      delta += 2 * x0 + 1;\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (delta > 0 && gap > 0) {\n      y0 -= 1;\n      delta -= 2 * y0 + 1;\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    x0 += 1;\n    delta += 2 * (x0 - y0);\n    y0 -= 1;\n  }\n};\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n  useState,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport {\n  getRectCoords,\n  getRectCoordsFromEvent,\n  hexToRGBA,\n  getCircleCenter,\n  getHorizontalRadius,\n  getVerticalRadius,\n  getRadius,\n} from '../../utils';\nimport drawMidPointEllipse from '../../algorithms/drawMidPointEllipse';\nimport drawingCircle from '../../algorithms/drawingCircle';\n\nfunction DrawCircle({ onMouseUp, ...props }) {\n  const [circleEndX, setCircleEndX] = useState(0);\n  const [circleEndY, setCircleEndY] = useState(0);\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const imageData = useRef(null);\n  const getImgLink = useCallback(() => {\n    imageData.current = null;\n    isMouseDown.current = false;\n    onMouseUp(canvas.toDataURL());\n  }, [onMouseUp, canvas]);\n  const ctx = canvas.getContext('2d');\n  const handler = useCallback((e) => {\n    if (isMouseDown.current) {\n      requestAnimationFrame(() => {\n        setCircleEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n        setCircleEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n\n        if (imageData.current) {\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          ctx.putImageData(imageData.current, 0, 0);\n        }\n\n        const setPixel = (x, y, currentColorRgba) => {\n          ctx.fillStyle = props.currentColor;\n          const { rectXBegin, rectYBegin } = getRectCoords(x, y, props.canvasScale);\n          const { data } = ctx.getImageData(rectXBegin, rectYBegin, 1, 1);\n\n          if (\n            data[0] === currentColorRgba.r\n            && data[1] === currentColorRgba.g\n            && data[2] === currentColorRgba.b\n            && data[3] === currentColorRgba.a\n          ) {\n            return;\n          }\n\n          ctx.fillRect(rectXBegin, rectYBegin, props.rectSize, props.rectSize);\n        };\n\n        const plot = (x, y, rgba) => {\n          //  -    \n          // eslint-disable-next-line no-restricted-globals\n          if (isFinite(x) && isFinite(y)) {\n            setPixel(x, y, rgba);\n          }\n        };\n\n        ctx.strokeStyle = props.currentColor;\n        ctx.fillStyle = props.currentColor;\n        const x1 = props.x;\n        const y1 = props.y;\n        const x2 = circleEndX;\n        const y2 = circleEndY;\n        const rgba = hexToRGBA(props.currentColor);\n        const radius = getRadius(x1, y1, x2, y2);\n        const circleCenter = getCircleCenter(x1, y1, x2, y2);\n        const horizontalRadius = getHorizontalRadius(x1, x2);\n        const verticalRadius = getVerticalRadius(y1, y2);\n\n        if (e.shiftKey) {\n          drawingCircle(x2, y2, radius, (x, y) => {\n            plot(x, y, rgba);\n          });\n        } else {\n          drawMidPointEllipse(horizontalRadius, verticalRadius, circleCenter.x, circleCenter.y, (p1, p2, p3, p4) => {\n            plot(p1[0], p1[1], rgba);\n            plot(p2[0], p2[1], rgba);\n            plot(p3[0], p3[1], rgba);\n            plot(p4[0], p4[1], rgba);\n          });\n        }\n      });\n    } else {\n      ctx.beginPath();\n    }\n  }, [\n    props.canvasScale,\n    props.currentColor,\n    props.x,\n    props.y,\n    props.rectSize,\n    ctx,\n    canvas.width,\n    canvas.height,\n    circleEndX,\n    circleEndY,\n  ]);\n\n  const toggleMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    imageData.current = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n    setCircleEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n    setCircleEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n  }, [canvas.height, canvas.width, ctx, props.canvasScale]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', toggleMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', toggleMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, toggleMouseDown]);\n\n  return null;\n}\n\nDrawCircle.propTypes = {\n  onMouseDown: PropTypes.func,\n  currentColor: PropTypes.string,\n  canvasScale: PropTypes.number,\n  x: PropTypes.number,\n  y: PropTypes.number,\n  rectSize: PropTypes.number,\n};\n\nexport default DrawCircle;\n","export default (x1, y1, x2, y2, cb) => {\n  let x0 = x1;\n  let y0 = y1;\n\n  if (x1 < x2 && y1 < y2) {\n    while (x0 < x2) {\n      cb(x0, y1);\n      x0 += 1;\n    }\n    while (y0 < y2) {\n      cb(x0, y0);\n      y0 += 1;\n    }\n    while (x0 > x1) {\n      cb(x0, y0);\n      x0 -= 1;\n    }\n    while (y0 > y1) {\n      cb(x0, y0);\n      y0 -= 1;\n    }\n  }\n\n  if (x1 < x2 && y1 > y2) {\n    while (x0 < x2) {\n      cb(x0, y1);\n      x0 += 1;\n    }\n    while (y0 > y2) {\n      cb(x0, y0);\n      y0 -= 1;\n    }\n    while (x0 > x1) {\n      cb(x0, y0);\n      x0 -= 1;\n    }\n    while (y0 < y1) {\n      cb(x0, y0);\n      y0 += 1;\n    }\n  }\n\n  if (x1 > x2 && y1 < y2) {\n    while (x0 > x2) {\n      cb(x0, y0);\n      x0 -= 1;\n    }\n    while (y0 <= y2) {\n      cb(x0, y0);\n      y0 += 1;\n    }\n    while (x0 < x1) {\n      cb(x0, y2);\n      x0 += 1;\n    }\n    while (y0 > y1) {\n      cb(x0, y0);\n      y0 -= 1;\n    }\n  }\n\n  if (x1 > x2 && y1 > y2) {\n    while (x0 > x2) {\n      cb(x0, y0);\n      x0 -= 1;\n    }\n    while (y0 > y2) {\n      cb(x0, y0);\n      y0 -= 1;\n    }\n    while (x0 < x1) {\n      cb(x0, y2);\n      x0 += 1;\n    }\n    while (y0 < y1) {\n      cb(x0, y0);\n      y0 += 1;\n    }\n  }\n};\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n  useState,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport {\n  getRectCoords,\n  getRectCoordsFromEvent,\n  hexToRGBA,\n} from '../../utils';\nimport drawingRectangle from '../../algorithms/drawingRectangle';\n\nfunction DrawRectangle({ onMouseUp, ...props }) {\n  const [rectEndX, setRectEndX] = useState(0);\n  const [rectEndY, setRectEndY] = useState(0);\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const imageData = useRef(null);\n  const getImgLink = useCallback(() => {\n    imageData.current = null;\n    isMouseDown.current = false;\n    onMouseUp(canvas.toDataURL());\n  }, [onMouseUp, canvas]);\n  const ctx = canvas.getContext('2d');\n\n  const handler = useCallback((e) => {\n    if (isMouseDown.current) {\n      requestAnimationFrame(() => {\n        setRectEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n        setRectEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n\n        if (imageData.current) {\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          ctx.putImageData(imageData.current, 0, 0);\n        }\n\n        const setPixel = (x, y, currentColorRgba) => {\n          ctx.fillStyle = props.currentColor;\n          const { rectXBegin, rectYBegin } = getRectCoords(x, y, props.canvasScale);\n          const { data } = ctx.getImageData(rectXBegin, rectYBegin, 1, 1);\n\n          if (\n            data[0] === currentColorRgba.r\n            && data[1] === currentColorRgba.g\n            && data[2] === currentColorRgba.b\n            && data[3] === currentColorRgba.a\n          ) {\n            return;\n          }\n\n          ctx.fillRect(rectXBegin, rectYBegin, props.rectSize, props.rectSize);\n        };\n\n        const plot = (x, y, rgba) => {\n          //  -    \n          // eslint-disable-next-line no-restricted-globals\n          if (isFinite(x) && isFinite(y)) {\n            setPixel(x, y, rgba);\n          }\n        };\n\n        const x1 = props.x;\n        const y1 = props.y;\n        const x2 = rectEndX;\n        const y2 = rectEndY;\n        const rgba = hexToRGBA(props.currentColor);\n\n        drawingRectangle(x1, y1, x2, y2, (x, y) => {\n          plot(x, y, rgba);\n        });\n      });\n    } else {\n      ctx.beginPath();\n    }\n  }, [\n    props.canvasScale,\n    props.x,\n    props.y,\n    props.currentColor,\n    props.rectSize,\n    rectEndX,\n    rectEndY,\n    ctx,\n    canvas.width,\n    canvas.height,\n  ]);\n\n  const toggleMouseDown = useCallback((e) => {\n    isMouseDown.current = true;\n    imageData.current = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n    setRectEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n    setRectEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n  }, [canvas.height, canvas.width, ctx, props.canvasScale]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', toggleMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', toggleMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, toggleMouseDown]);\n\n  return null;\n}\n\nDrawRectangle.propTypes = {\n  onMouseDown: PropTypes.func,\n  currentColor: PropTypes.string,\n  canvasScale: PropTypes.number,\n  x: PropTypes.number,\n  y: PropTypes.number,\n  rectSize: PropTypes.number,\n};\n\nexport default DrawRectangle;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n  useState,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport {\n  getRectCoordsFromEvent,\n} from '../../utils';\n\nfunction DrawFillRectangle({ onMouseUp, ...props }) {\n  const [rectEndX, setRectEndX] = useState(0);\n  const [rectEndY, setRectEndY] = useState(0);\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const imageData = useRef(null);\n  const getImgLink = useCallback(() => {\n    imageData.current = null;\n    isMouseDown.current = false;\n    onMouseUp(canvas.toDataURL());\n  }, [onMouseUp, canvas]);\n  const ctx = canvas.getContext('2d');\n\n  const handler = useCallback((e) => {\n    if (isMouseDown.current) {\n      requestAnimationFrame(() => {\n        setRectEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n        setRectEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n\n        if (imageData.current) {\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          ctx.putImageData(imageData.current, 0, 0);\n        }\n\n        ctx.fillStyle = props.primaryColor;\n        const x1 = props.x;\n        const y1 = props.y;\n        const x2 = rectEndX;\n        const y2 = rectEndY;\n        const outerRectWidth = Math.abs(x1 - x2);\n        const outerRectHeight = Math.abs(y1 - y2);\n        // if x1 > x2\n        const horizontalSide1 = Math.abs((x1 - props.rectSize) - (x2 + props.rectSize));\n        // if x1 < x2\n        const horizontalSide2 = Math.abs((x2 - props.rectSize) - (x1 + props.rectSize));\n        // if y1 > y2\n        const verticalSide1 = Math.abs((y1 - props.rectSize) - (y2 + props.rectSize));\n        // if y1 < y2\n        const verticalSide2 = Math.abs((y2 - props.rectSize) - (y1 + props.rectSize));\n        const innerRectWidth = Math.min(horizontalSide1, horizontalSide2);\n        const innerRectHeight = Math.min(verticalSide1, verticalSide2);\n\n        ctx.fillRect(Math.min(x1, x2), Math.min(y1, y2), outerRectWidth, outerRectHeight);\n        if (outerRectWidth >= props.rectSize * 3 && outerRectHeight >= props.rectSize * 3) {\n          ctx.fillStyle = props.secondaryColor;\n          const innerSide1 = Math.min(x1 + props.rectSize, x2 + props.rectSize);\n          const innerSide2 = Math.min(y1 + props.rectSize, y2 + props.rectSize);\n          ctx.fillRect(innerSide1, innerSide2, innerRectWidth, innerRectHeight);\n        }\n      });\n    } else {\n      ctx.beginPath();\n    }\n  }, [props.canvasScale,\n    props.primaryColor,\n    props.x,\n    props.y,\n    props.rectSize,\n    props.secondaryColor,\n    ctx,\n    rectEndX,\n    rectEndY,\n    canvas.width,\n    canvas.height]);\n\n  const toggleMouseDown = useCallback((e) => {\n    isMouseDown.current = true;\n    imageData.current = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n    setRectEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n    setRectEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n  }, [canvas.height, canvas.width, ctx, props.canvasScale]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', toggleMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', toggleMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, toggleMouseDown]);\n\n  return null;\n}\n\nDrawFillRectangle.propTypes = {\n  onMouseDown: PropTypes.func,\n  primaryColor: PropTypes.string,\n  secondaryColor: PropTypes.string,\n  canvasScale: PropTypes.number,\n  x: PropTypes.number,\n  y: PropTypes.number,\n  rectSize: PropTypes.number,\n};\n\nexport default DrawFillRectangle;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\n\nfunction VerticalMirrorPen({ onMouseUp, ...props }) {\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    onMouseUp(canvas.toDataURL());\n  }, [onMouseUp, canvas]);\n\n  const handler = useCallback((e) => {\n    const ctx = canvas.getContext('2d');\n\n    if (isMouseDown.current) {\n      if (e.shiftKey) {\n        const y = e.target.offsetHeight - props.y - props.height;\n\n        ctx.fillStyle = props.currentColor;\n        ctx.strokeStyle = props.currentColor;\n        ctx.fillRect(props.x, props.y, props.width, props.height);\n        ctx.fillRect(props.x, y, props.width, props.height);\n      } else {\n        const x = e.target.offsetWidth - props.x - props.width;\n        ctx.fillStyle = props.currentColor;\n        ctx.strokeStyle = props.currentColor;\n        ctx.fillRect(props.x, props.y, props.width, props.height);\n        ctx.fillRect(x, props.y, props.width, props.height);\n      }\n    } else {\n      ctx.beginPath();\n    }\n  }, [props.x, props.y, props.width, props.height, props.currentColor, isMouseDown, canvas]);\n\n  const setMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    handler(e);\n  }, [handler]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', setMouseDown);\n    document.addEventListener('mouseup', setMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', setMouseDown);\n      document.removeEventListener('mouseup', setMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, setMouseDown]);\n\n  return null;\n}\n\nVerticalMirrorPen.propTypes = {\n  x: PropTypes.number,\n  y: PropTypes.number,\n  width: PropTypes.number,\n  height: PropTypes.number,\n  onMouseDown: PropTypes.func,\n  currentColor: PropTypes.string,\n};\n\nexport default VerticalMirrorPen;\n","import { useContext, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { rgbaToHEX } from '../../utils';\n\nfunction ChooseColor({ onMouseUp }) {\n  const canvas = useContext(CanvasContext);\n  const ctx = canvas.getContext('2d');\n  const getColorValue = useCallback((e) => {\n    const rect = canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    const pixelPos = (y * canvas.width + x) * 4;\n    const red = imgData.data[pixelPos];\n    const green = imgData.data[pixelPos + 1];\n    const blue = imgData.data[pixelPos + 2];\n    const alpha = imgData.data[pixelPos + 3];\n    const rgba = {\n      r: red,\n      g: green,\n      b: blue,\n      a: alpha,\n    };\n    const chosenColor = rgbaToHEX(rgba);\n    onMouseUp(chosenColor);\n  }, [canvas, ctx, onMouseUp]);\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n    canvas.addEventListener('mouseup', getColorValue);\n    return () => {\n      canvas.removeEventListener('mouseup', getColorValue);\n    };\n  }, [canvas, getColorValue]);\n  return null;\n}\n\nChooseColor.propTypes = {\n  onMouseUp: PropTypes.func,\n};\n\nexport default ChooseColor;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { getRectCoords } from '../../utils';\n\nfunction LightenColor({ onMouseUp, canvasScale, penSize }) {\n  const canvas = useContext(CanvasContext);\n  const ctx = canvas.getContext('2d');\n  const rect = canvas.getBoundingClientRect();\n  const isMouseDown = useRef(false);\n  const setMouseDown = useCallback(() => {\n    isMouseDown.current = !isMouseDown.current;\n  }, []);\n  const mouseUpHandler = useCallback(() => {\n    isMouseDown.current = !isMouseDown.current;\n    onMouseUp(canvas.toDataURL());\n  }, [canvas, onMouseUp]);\n\n  const mouseMoveHandler = useCallback((e) => {\n    if (isMouseDown.current) {\n      const currentX = Math.floor(e.clientX - rect.left);\n      const currentY = Math.floor(e.clientY - rect.top);\n      const rectCoords = getRectCoords(currentX, currentY, canvasScale);\n      const imgData = ctx.getImageData(rectCoords.rectXBegin, rectCoords.rectYBegin, penSize, penSize);\n\n      for (let i = 0; i < imgData.data.length; i += 4) {\n        if (imgData.data[i + 3] !== 0) {\n          if (imgData.data[i] <= 245) {\n            imgData.data[i] += 5;\n          }\n          if (imgData.data[i + 1] <= 245) {\n            imgData.data[i + 1] += 5;\n          }\n          if (imgData.data[i + 2] <= 245) {\n            imgData.data[i + 2] += 5;\n          }\n        }\n      }\n      ctx.putImageData(imgData, rectCoords.rectXBegin, rectCoords.rectYBegin);\n    }\n  }, [canvasScale, ctx, penSize, rect.left, rect.top]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n    canvas.addEventListener('mousedown', setMouseDown);\n    canvas.addEventListener('mousemove', mouseMoveHandler);\n    document.addEventListener('mouseup', mouseUpHandler);\n    return () => {\n      canvas.removeEventListener('mousedown', setMouseDown);\n      canvas.removeEventListener('mousemove', mouseMoveHandler);\n      document.removeEventListener('mouseup', mouseUpHandler);\n    };\n  }, [canvas, mouseMoveHandler, mouseUpHandler, setMouseDown]);\n  return null;\n}\n\nLightenColor.propTypes = {\n  onMouseUp: PropTypes.func,\n};\n\nexport default LightenColor;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { getRectCoords } from '../../utils';\n\nfunction DarkenColor({ onMouseUp, canvasScale, penSize }) {\n  const canvas = useContext(CanvasContext);\n  const ctx = canvas.getContext('2d');\n  const rect = canvas.getBoundingClientRect();\n  const isMouseDown = useRef(false);\n  const setMouseDown = useCallback(() => {\n    isMouseDown.current = !isMouseDown.current;\n  }, []);\n  const mouseUpHandler = useCallback(() => {\n    onMouseUp(canvas.toDataURL());\n    isMouseDown.current = !isMouseDown.current;\n  }, [canvas, onMouseUp]);\n\n  const mouseMoveHandler = useCallback((e) => {\n    if (isMouseDown.current) {\n      const currentX = Math.floor(e.clientX - rect.left);\n      const currentY = Math.floor(e.clientY - rect.top);\n      const rectCoords = getRectCoords(currentX, currentY, canvasScale);\n      const imgData = ctx.getImageData(rectCoords.rectXBegin, rectCoords.rectYBegin, penSize, penSize);\n\n      for (let i = 0; i < imgData.data.length; i += 4) {\n        if (imgData.data[i + 3] !== 0) {\n          if (imgData.data[i] >= 5) {\n            imgData.data[i] -= 5;\n          }\n          if (imgData.data[i + 1] >= 5) {\n            imgData.data[i + 1] -= 5;\n          }\n          if (imgData.data[i + 2] >= 5) {\n            imgData.data[i + 2] -= 5;\n          }\n        }\n      }\n      ctx.putImageData(imgData, rectCoords.rectXBegin, rectCoords.rectYBegin);\n    }\n  }, [canvasScale, ctx, penSize, rect.left, rect.top]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n    canvas.addEventListener('mousedown', setMouseDown);\n    canvas.addEventListener('mousemove', mouseMoveHandler);\n    document.addEventListener('mouseup', mouseUpHandler);\n    return () => {\n      canvas.removeEventListener('mousedown', setMouseDown);\n      canvas.removeEventListener('mousemove', mouseMoveHandler);\n      document.removeEventListener('mouseup', mouseUpHandler);\n    };\n  }, [canvas, mouseMoveHandler, mouseUpHandler, setMouseDown]);\n  return null;\n}\n\nDarkenColor.propTypes = {\n  onMouseUp: PropTypes.func,\n};\n\nexport default DarkenColor;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\n// import {\n//   getRectCoordsFromEvent,\n// } from '../../utils';\n\nfunction MoveAction({ onMouseUp }) {\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    onMouseUp(canvas.toDataURL());\n  }, [onMouseUp, canvas]);\n\n  const handler = useCallback((e) => {\n    if (isMouseDown.current) {\n      const ctx = canvas.getContext('2d');\n      const rect = canvas.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const y = e.clientY - rect.top;\n      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n      ctx.putImageData(imageData, x, y);\n    }\n  }, [canvas]);\n\n  const toggleMouseDown = useCallback(() => {\n    isMouseDown.current = !isMouseDown.current;\n  }, []);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', toggleMouseDown);\n    document.addEventListener('mouseup', toggleMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', toggleMouseDown);\n      document.removeEventListener('mouseup', toggleMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, toggleMouseDown]);\n\n  return null;\n}\n\nMoveAction.propTypes = {\n  onMouseDown: PropTypes.func,\n  currentColor: PropTypes.string,\n  canvasScale: PropTypes.number,\n  // x: PropTypes.number,\n  // y: PropTypes.number,\n  rectSize: PropTypes.number,\n};\n\nexport default MoveAction;\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { even, odd } from '../../utils';\n\nfunction PixelPen({ onMouseUp, ...props }) {\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const getImgLink = useCallback(() => {\n    if (isMouseDown.current) {\n      onMouseUp(canvas.toDataURL());\n\n      isMouseDown.current = !isMouseDown.current;\n    }\n  }, [onMouseUp, canvas]);\n\n  const handler = useCallback(() => {\n    const ctx = canvas.getContext('2d');\n\n    if (isMouseDown.current) {\n      const rectsNum = props.penSize / 20;\n      const innerFirstRectColumn = props.x / 20 + 1;\n      const innerFirstRectRow = props.y / 20 + 1;\n\n      for (let i = 0; i < rectsNum; i += 1) {\n        for (let j = 0; j < rectsNum; j += 1) {\n          const rowNum = innerFirstRectRow + i;\n          const colNum = innerFirstRectColumn + j;\n\n          if (\n            (odd(rowNum) && odd(colNum))\n            || (even(rowNum) && even(colNum))\n          ) {\n            ctx.fillStyle = props.secondaryColor;\n          } else {\n            ctx.fillStyle = props.primaryColor;\n          }\n\n          ctx.fillRect(props.x + (i * 20), props.y + (j * 20), 20, 20);\n        }\n      }\n    } else {\n      ctx.beginPath();\n    }\n  }, [canvas, props.penSize, props.primaryColor, props.secondaryColor, props.x, props.y]);\n\n  const setMouseDown = useCallback((e) => {\n    isMouseDown.current = !isMouseDown.current;\n    handler(e);\n  }, [handler]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', setMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', setMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, setMouseDown]);\n\n  return null;\n}\n\nPixelPen.propTypes = {\n  x: PropTypes.number,\n  y: PropTypes.number,\n  penSize: PropTypes.number,\n  column: PropTypes.number,\n  row: PropTypes.number,\n  primaryColor: PropTypes.string,\n  secondaryColor: PropTypes.string,\n  image: PropTypes.any,\n};\n\nexport default PixelPen;\n","import React from 'react';\nimport './canvasScale.css';\nimport PropTypes from 'prop-types';\n\nfunction CanvasScale({ onChange, options, value }) {\n  return (\n    <div className=\"canvas-size\">\n      {options.map(num => (\n        <div className=\"canvas-size__item\" key={num}>\n          <input\n            checked={value === num}\n            id={`canvas-size__item${num}`}\n            name=\"canvas-size__item\"\n            onChange={onChange}\n            type=\"radio\"\n            value={num}\n          />\n          <label htmlFor={`canvas-size__item${num}`}>{num}*{num}</label>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nCanvasScale.propTypes = {\n  onChange: PropTypes.func,\n  options: PropTypes.arrayOf(\n    PropTypes.number,\n  ),\n  value: PropTypes.number,\n};\n\nexport default CanvasScale;\n","import React, { useRef } from 'react';\nimport './keyboardShortcut.css';\nimport PropTypes from 'prop-types';\n\nfunction KeyboardShortcuts({ keyMap, keyboardMap, onChange }) {\n  const isModalWindowOpened = useRef(false);\n\n  const onOpen = () => {\n    isModalWindowOpened.current = !isModalWindowOpened.current;\n\n    if (isModalWindowOpened.current) {\n      document.querySelector('.keyboard-shortcuts__button').classList.add('keyboard-shortcuts__button--active');\n      document.querySelector('.keyboard-shortcuts__list').classList.add('keyboard-shortcuts__list--active');\n    } else {\n      document.querySelector('.keyboard-shortcuts__button').classList.remove('keyboard-shortcuts__button--active');\n      document.querySelector('.keyboard-shortcuts__list').classList.remove('keyboard-shortcuts__list--active');\n    }\n  };\n\n  return (\n    <div className=\"keyboard-shortcuts__wrapper\">\n      <button className=\"keyboard-shortcuts__button\" onClick={onOpen} title=\"Keyboard shortcuts\" />\n      <div className=\"keyboard-shortcuts__list\">\n        <ul className=\"keyboard-shortcuts\">\n          <li>Tool shortcuts</li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image draw-action\" />\n            <button className=\"item__key-code\" title=\"Click to edit the key\" onClick={() => onChange(keyMap.PEN_TOOL)}>\n              {keyboardMap[keyMap.PEN_TOOL]}\n            </button>\n            <div className=\"item__description\">Pen tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image erase-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.ERASER_TOOL)}\n            >\n              {keyboardMap[keyMap.ERASER_TOOL]}\n            </button>\n            <div className=\"item__description\">Eraser tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image mirror-draw-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.MIRROR_PEN_TOOL)}\n            >\n              {keyboardMap[keyMap.MIRROR_PEN_TOOL]}\n            </button>\n            <div className=\"item__description\">Vertical mirror pen tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image fill-color-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.COLOR_BUCKET_TOOL)}\n            >\n              {keyboardMap[keyMap.COLOR_BUCKET_TOOL]}\n            </button>\n            <div className=\"item__description\">Color bucket tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image magic-color-bucket-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.MAGIC_COLOR_BUCKET_TOOL)}\n            >\n              {keyboardMap[keyMap.MAGIC_COLOR_BUCKET_TOOL]}\n            </button>\n            <div className=\"item__description\">Magic bucket tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image stroke-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.STROKE_TOOL)}\n            >\n              {keyboardMap[keyMap.STROKE_TOOL]}\n            </button>\n            <div className=\"item__description\">Stroke tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image rectangle-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.RECTANGLE_TOOL)}\n            >\n              {keyboardMap[keyMap.RECTANGLE_TOOL]}\n            </button>\n            <div className=\"item__description\">Rectangle tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image circle-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.CIRCLE_TOOL)}\n            >\n              {keyboardMap[keyMap.CIRCLE_TOOL]}\n            </button>\n            <div className=\"item__description\">Circle tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image move-action\" />\n            <button className=\"item__key-code\" title=\"Click to edit the key\" onClick={() => onChange(keyMap.MOVE_TOOL)}>\n              {keyboardMap[keyMap.MOVE_TOOL]}\n            </button>\n            <div className=\"item__description\">Move tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image lighten-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.LIGHTEN_TOOL)}\n            >\n              {keyboardMap[keyMap.LIGHTEN_TOOL]}\n            </button>\n            <div className=\"item__description\">Lighten tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image darken-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.DARKEN_TOOL)}\n            >\n              {keyboardMap[keyMap.DARKEN_TOOL]}\n            </button>\n            <div className=\"item__description\">Darken tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image dithering-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.DITHERING_TOOL)}\n            >\n              {keyboardMap[keyMap.DITHERING_TOOL]}\n            </button>\n            <div className=\"item__description\">Dithering tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image choose-color-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.COLOR_PICKER_TOOL)}\n            >\n              {keyboardMap[keyMap.COLOR_PICKER_TOOL]}\n            </button>\n            <div className=\"item__description\">Color picker tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image pen-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.FEATHER_PEN_TOOL)}\n            >\n              {keyboardMap[keyMap.FEATHER_PEN_TOOL]}\n            </button>\n            <div className=\"item__description\">Feather pen tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image fill-rectangle-action\" />\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.FILL_RECTANGLE_TOOL)}\n            >\n              {keyboardMap[keyMap.FILL_RECTANGLE_TOOL]}\n            </button>\n            <div className=\"item__description\">Fill rectangle tool</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <div className=\"item__image full-fill-color-action\" />\n            <button className=\"item__key-code\" title=\"Click to edit the key\" onClick={() => onChange(keyMap.FILL_COLOR_TOOL)}>\n              {keyboardMap[keyMap.FILL_COLOR_TOOL]}\n            </button>\n            <div className=\"item__description\">Fill color tool</div>\n          </li>\n        </ul>\n        <ul className=\"keyboard-shortcuts\">\n          <li>Misc shortcuts</li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.PEN_SIZE_1)}\n            >\n              {keyboardMap[keyMap.PEN_SIZE_1]}\n            </button>\n            <div className=\"item__description\">Pen size x1</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.PEN_SIZE_2)}\n            >\n              {keyboardMap[keyMap.PEN_SIZE_2]}\n            </button>\n            <div className=\"item__description\">Pen size x2</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.PEN_SIZE_3)}\n            >\n              {keyboardMap[keyMap.PEN_SIZE_3]}\n            </button>\n            <div className=\"item__description\">Pen size x3</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.PEN_SIZE_4)}\n            >\n              {keyboardMap[keyMap.PEN_SIZE_4]}\n            </button>\n            <div className=\"item__description\">Pen size x4</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.ADD_NEW_FRAME)}\n            >\n              {keyboardMap[keyMap.ADD_NEW_FRAME]}\n            </button>\n            <div className=\"item__description\">Add a new frame</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item next-block\">\n            <button className=\"item__key-code arrow-up\" />\n            <div className=\"item__description\">Select previous frame</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button className=\"item__key-code arrow-down\" />\n            <div className=\"item__description\">Select next frame</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button className=\"item__key-code keys-combination\">ctrl+q</button>\n            <div className=\"item__description\">Delete frame</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item\">\n            <button className=\"item__key-code keys-combination\">ctrl+y</button>\n            <div className=\"item__description\">Duplicate frame</div>\n          </li>\n          <li className=\"keyboard-shortcuts__item next-block\">\n            <button\n              className=\"item__key-code\"\n              title=\"Click to edit the key\"\n              onClick={() => onChange(keyMap.CHANGE_COLORS)}\n            >\n              {keyboardMap[keyMap.CHANGE_COLORS]}\n            </button>\n            <div className=\"item__description\">Change colors</div>\n          </li>\n        </ul>\n        <button className=\"close-window\" onClick={onOpen}>X</button>\n      </div>\n    </div>\n  );\n}\n\nKeyboardShortcuts.propTypes = {\n  onChange: PropTypes.func,\n  keyMap: PropTypes.object,\n  keyboardMap: PropTypes.object,\n};\n\nexport default KeyboardShortcuts;\n","import React from 'react';\nimport './cursorPosition.css';\nimport PropTypes from 'prop-types';\n\nfunction CursorPosition({ x, y, isOverCanvas }) {\n  return (\n    <div className={`cursor-position ${!isOverCanvas ? 'cursor-position--hidden' : ''}`}>\n      {x} : {y}\n    </div>\n  );\n}\n\nCursorPosition.propTypes = {\n  x: PropTypes.number,\n  y: PropTypes.number,\n  isOverCanvas: PropTypes.bool,\n};\n\nexport default CursorPosition;\n","export default (x1, y1, x2, y2, cb) => {\n  const deltaX = Math.abs(x2 - x1);\n  const deltaY = Math.abs(y2 - y1);\n  const signX = x1 < x2 ? 1 : -1;\n  const signY = y1 < y2 ? 1 : -1;\n  let error = deltaX - deltaY;\n\n  while (x1 !== x2 || y1 !== y2) {\n    cb(x1, y1);\n    const error2 = error * 2;\n\n    if (error2 > -deltaY) {\n      error -= deltaY;\n      // eslint-disable-next-line no-param-reassign\n      x1 += signX;\n    }\n    if (error2 < deltaX) {\n      error += deltaX;\n      // eslint-disable-next-line no-param-reassign\n      y1 += signY;\n    }\n  }\n  cb(x2, y2);\n};\n","import {\n  useContext,\n  useEffect,\n  useCallback,\n  useRef,\n  useState,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport { CanvasContext } from '../canvas/Canvas';\nimport { getRectCoords, getRectCoordsFromEvent, hexToRGBA } from '../../utils';\nimport drawLine from '../../algorithms/drawLine';\n\nfunction Stroke({ onMouseUp, ...props }) {\n  const [strokeEndX, setStrokeEndX] = useState(0);\n  const [strokeEndY, setStrokeEndY] = useState(0);\n  const canvas = useContext(CanvasContext);\n  const isMouseDown = useRef(false);\n  const imageData = useRef(null);\n  const getImgLink = useCallback(() => {\n    imageData.current = null;\n    isMouseDown.current = false;\n    onMouseUp(canvas.toDataURL());\n  }, [onMouseUp, canvas]);\n  const ctx = canvas.getContext('2d');\n\n  const handler = useCallback((e) => {\n    if (isMouseDown.current) {\n      requestAnimationFrame(() => {\n        setStrokeEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n        setStrokeEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n\n        if (imageData.current) {\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          ctx.putImageData(imageData.current, 0, 0);\n        }\n\n        const setPixel = (x, y, currentColorRgba) => {\n          ctx.strokeStyle = props.currentColor;\n          ctx.fillStyle = props.currentColor;\n          const { rectXBegin, rectYBegin } = getRectCoords(x, y, props.canvasScale);\n          const { data } = ctx.getImageData(rectXBegin, rectYBegin, 1, 1);\n\n          if (\n            data[0] === currentColorRgba.r\n            && data[1] === currentColorRgba.g\n            && data[2] === currentColorRgba.b\n            && data[3] === currentColorRgba.a\n          ) {\n            return;\n          }\n\n          ctx.fillRect(rectXBegin, rectYBegin, props.rectSize, props.rectSize);\n        };\n\n        const plot = (x, y, rgba) => {\n          //  -    \n          // eslint-disable-next-line no-restricted-globals\n          if (isFinite(x) && isFinite(y)) {\n            setPixel(x, y, rgba);\n          }\n        };\n\n        ctx.strokeStyle = props.currentColor;\n        ctx.fillStyle = props.currentColor;\n        const x1 = props.x;\n        const y1 = props.y;\n        const x2 = strokeEndX;\n        const y2 = strokeEndY;\n        const rgba = hexToRGBA(props.currentColor);\n\n        if (typeof x1 !== 'number' || typeof y1 !== 'number') {\n          return;\n        }\n\n        drawLine(x1, y1, x2, y2, (x, y) => {\n          plot(x, y, rgba);\n        });\n      });\n    } else {\n      ctx.beginPath();\n    }\n  }, [\n    props.canvasScale,\n    props.currentColor,\n    props.x,\n    props.y,\n    props.rectSize,\n    ctx,\n    strokeEndX,\n    strokeEndY,\n    canvas.width,\n    canvas.height,\n  ]);\n\n  const handleMouseDown = useCallback((e) => {\n    isMouseDown.current = true;\n    imageData.current = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n    setStrokeEndX(getRectCoordsFromEvent(e, props.canvasScale).rectXBegin);\n    setStrokeEndY(getRectCoordsFromEvent(e, props.canvasScale).rectYBegin);\n  }, [canvas.height, canvas.width, ctx, props.canvasScale]);\n\n  useEffect(() => {\n    if (!canvas) {\n      return Function.prototype;\n    }\n\n    canvas.addEventListener('mousemove', handler);\n    canvas.addEventListener('mousedown', handleMouseDown);\n    document.addEventListener('mouseup', getImgLink);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handler);\n      canvas.removeEventListener('mousedown', handleMouseDown);\n      document.removeEventListener('mouseup', getImgLink);\n    };\n  }, [canvas, handler, getImgLink, handleMouseDown]);\n\n  return null;\n}\n\nStroke.propTypes = {\n  onMouseDown: PropTypes.func,\n  currentColor: PropTypes.string,\n  canvasScale: PropTypes.number,\n  x: PropTypes.number,\n  y: PropTypes.number,\n  rectSize: PropTypes.number,\n};\n\nexport default Stroke;\n","import React, { useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport './export.css';\n\nfunction Export({\n  onPNGExport,\n  onPNGSetExport,\n  onGIFExport,\n  onResetClick,\n  onAPNGExport,\n  onSave,\n}) {\n  const isMouseDown = useRef(false);\n\n  const onExportMenu = () => {\n    isMouseDown.current = !isMouseDown.current;\n    if (isMouseDown.current) {\n      document.querySelector('.result-export__list').classList.add('result-export__list--active');\n      document.querySelector('.result-export__button').classList.add('result-export__button--active');\n    } else {\n      document.querySelector('.result-export__list').classList.remove('result-export__list--active');\n      document.querySelector('.result-export__button').classList.remove('result-export__button--active');\n    }\n  };\n  return (\n    <div className=\"result-export__wrapper\">\n      <button className=\"result-export__button\" title=\"Export\" onClick={onExportMenu} />\n      <div className=\"result-export__list\">\n        <button\n          className=\"result-export__item png\"\n          onClick={onPNGExport}\n          title=\"Download active frame as a PNG file\"\n        />\n        <button\n          className=\"result-export__item set-png\"\n          onClick={onPNGSetExport}\n          title=\"Download all frames as PNG files\"\n        />\n        <button\n          className=\"result-export__item gif\"\n          onClick={onGIFExport}\n          title=\"Download as animated GIF\"\n        />\n        <button\n          className=\"result-export__item apng\"\n          title=\"Download as animated APNG\"\n          onClick={onAPNGExport}\n        />\n        <button\n          className=\"result-export__item save\"\n          title=\"Save as .piskel\"\n          onClick={onSave}\n        />\n        <button\n          className=\"result-export__item reset\"\n          title=\"Reset all saves\"\n          onClick={onResetClick}\n        />\n      </div>\n    </div>\n  );\n}\n\nExport.propTypes = {\n  onPNGExport: PropTypes.func,\n  onPNGSetExport: PropTypes.func,\n  onGIFExport: PropTypes.func,\n  onResetClick: PropTypes.func,\n  onAPNGExport: PropTypes.func,\n  onSave: PropTypes.func,\n};\n\nexport default Export;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport GIF from 'gif.js';\nimport UPNG from 'upng-js';\nimport './app.css';\nimport { Link } from 'react-router-dom';\nimport FrameList from '../frameList/FrameList';\nimport PenSize from '../tools/penSize/PenSize';\nimport Tools from '../tools/Tools';\nimport Preview from '../preview/Preview';\nimport FPS from '../FPS/FPS';\nimport Canvas from '../canvas/Canvas';\nimport Pen from '../tools/Pen';\nimport PixelPen from '../tools/PixelPen';\nimport EraseAction from '../tools/EraseAction';\nimport AllPixelsSameColorAction from '../tools/AllPixelsSameColorAction';\nimport FillColor from '../tools/FillColor';\nimport FullFillColor from '../tools/FullFillColor';\nimport DrawCircle from '../tools/DrawCircle';\nimport DrawRectangle from '../tools/DrawRectangle';\nimport DrawFillRectangle from '../tools/DrawFillRectangle';\nimport VerticalMirrorPen from '../tools/VerticalMirrorPen';\nimport ChooseColor from '../tools/ChooseColor';\nimport LightenColor from '../tools/LightenColor';\nimport DarkenColor from '../tools/DarkenColor';\nimport MoveAction from '../tools/MoveAction';\nimport DitheringAction from '../tools/DitheringAction';\nimport CanvasScale from '../canvas/canvasScale/CanvasScale';\nimport KeyboardShortcuts from '../keyboardShortcuts/KeyboardShortcuts';\nimport CursorPosition from '../canvas/cursorPosition/CursorPosition';\nimport {\n  getRectCoordsFromEvent,\n  getRectSize,\n  getCursorPosition,\n  download,\n  loadImages,\n} from '../../utils';\nimport Stroke from '../tools/Stroke';\nimport usePrev from '../../hooks/usePrev';\nimport Export from '../export/Export';\n// import useWhyDidYouUpdate from '../../hooks/useWhyDidYouUpdate';\n\nconst scales = [32, 64, 128];\n\nconst useSetToolAction = () => {\n  const [toolAction, setToolAction] = useState(\n    {\n      isPenSizeAction: false,\n      isDrawAction: true,\n      isChooseColorAction: false,\n      isColorPaletteAction: false,\n      isFillColorAction: false,\n      isFullFillColorAction: false,\n      isEraseAction: false,\n      isPenAction: false,\n      isStrokeAction: false,\n      isDrawCircleAction: false,\n      isDrawRectangleAction: false,\n      isDrawFillRectangleAction: false,\n      isMirrorPenAction: false,\n      isLightenColorAction: false,\n      isDarkenColorAction: false,\n      isMoveAction: false,\n      isDitheringAction: false,\n      isAllPixelsSameColorAction: false,\n    },\n  );\n\n  const toggleToolAction = useCallback((keyName) => {\n    const { [keyName]: keyValue, ...newObj } = toolAction;\n\n    Object.keys(newObj).forEach((key) => {\n      newObj[key] = false;\n    });\n\n    newObj[keyName] = !keyValue;\n    setToolAction(newObj);\n  }, [toolAction]);\n\n  return { toggleToolAction, toolAction };\n};\n\nconst useSetPenSizeAction = () => {\n  const [penSizeAction, setPenSizeAction] = useState(\n    {\n      isPenSizeAction1: false,\n      isPenSizeAction: false,\n    },\n  );\n\n  const togglePenSizeAction = (keyName) => {\n    const { [keyName]: keyValue, ...newObj } = penSizeAction;\n\n    Object.keys(newObj).forEach((key) => {\n      newObj[key] = false;\n    });\n\n    newObj[keyName] = !keyValue;\n    setPenSizeAction(newObj);\n  };\n\n  return { togglePenSizeAction, penSizeAction };\n};\n\nconst getFromStorage = (key, def) => {\n  try {\n    return JSON.parse(localStorage.getItem(key)) || def;\n  } catch (err) {\n    return def;\n  }\n};\n\nconst appendObjectToStorage = (storage, obj) => {\n  let state = getFromStorage(storage, {});\n\n  state = {\n    ...state,\n    ...obj,\n  };\n\n  localStorage.setItem(storage, JSON.stringify(state));\n};\n\nconst KEYMAP = {\n  PEN_SIZE_1: 'PEN_SIZE_1',\n  PEN_SIZE_2: 'PEN_SIZE_2',\n  PEN_SIZE_3: 'PEN_SIZE_3',\n  PEN_SIZE_4: 'PEN_SIZE_4',\n  PEN_TOOL: 'PEN_TOOL',\n  ERASER_TOOL: 'ERASER_TOOL',\n  COLOR_BUCKET_TOOL: 'COLOR_BUCKET_TOOL',\n  MAGIC_COLOR_BUCKET_TOOL: 'MAGIC_COLOR_BUCKET_TOOL',\n  FILL_COLOR_TOOL: 'FILL_COLOR_TOOL',\n  COLOR_PICKER_TOOL: 'COLOR_PICKER_TOOL',\n  RECTANGLE_TOOL: 'RECTANGLE_TOOL',\n  CIRCLE_TOOL: 'CIRCLE_TOOL',\n  LIGHTEN_TOOL: 'LIGHTEN_TOOL',\n  DARKEN_TOOL: 'DARKEN_TOOL',\n  DITHERING_TOOL: 'DITHERING_TOOL',\n  STROKE_TOOL: 'STROKE_TOOL',\n  MIRROR_PEN_TOOL: 'MIRROR_PEN_TOOL',\n  MOVE_TOOL: 'MOVE_TOOL',\n  FEATHER_PEN_TOOL: 'FEATHER_PEN_TOOL',\n  ADD_NEW_FRAME: 'ADD_NEW_FRAME',\n  CHANGE_COLORS: 'CHANGE_COLORS',\n  FILL_RECTANGLE_TOOL: 'FILL_RECTANGLE_TOOL',\n};\n\nconst KeyboardEvent = {\n  [KEYMAP.PEN_TOOL]: 'p',\n  [KEYMAP.ERASER_TOOL]: 'e',\n  [KEYMAP.COLOR_BUCKET_TOOL]: 'b',\n  [KEYMAP.MAGIC_COLOR_BUCKET_TOOL]: 'a',\n  [KEYMAP.COLOR_PICKER_TOOL]: 'o',\n  [KEYMAP.RECTANGLE_TOOL]: 'r',\n  [KEYMAP.CIRCLE_TOOL]: 'c',\n  [KEYMAP.LIGHTEN_TOOL]: 'u',\n  [KEYMAP.DARKEN_TOOL]: 'i',\n  [KEYMAP.DITHERING_TOOL]: 't',\n  [KEYMAP.STROKE_TOOL]: 'l',\n  [KEYMAP.MIRROR_PEN_TOOL]: 'v',\n  [KEYMAP.MOVE_TOOL]: 'm',\n  [KEYMAP.PEN_SIZE_1]: '1',\n  [KEYMAP.PEN_SIZE_2]: '2',\n  [KEYMAP.PEN_SIZE_3]: '3',\n  [KEYMAP.PEN_SIZE_4]: '4',\n  [KEYMAP.FEATHER_PEN_TOOL]: 'd',\n  [KEYMAP.CHANGE_COLORS]: 'x',\n  [KEYMAP.ADD_NEW_FRAME]: 'n',\n  [KEYMAP.FILL_RECTANGLE_TOOL]: 'f',\n  [KEYMAP.FILL_COLOR_TOOL]: 'h',\n};\n\nconst editKey = (keyName) => {\n  // eslint-disable-next-line no-alert\n  const newKey = window.prompt('Type a new key');\n  const values = Object.values(KeyboardEvent);\n\n  if (values.indexOf(newKey) !== -1) {\n    // eslint-disable-next-line no-alert\n    const message = window.confirm('This key has already established. Change it anyway?');\n    const oldKey = Object.keys(KeyboardEvent).find(key => KeyboardEvent[key] === newKey);\n\n    if (message) {\n      KeyboardEvent[oldKey] = '?';\n    } else {\n      KeyboardEvent[keyName] = KeyboardEvent[oldKey];\n    }\n  }\n\n  KeyboardEvent[keyName] = newKey;\n};\n\nconst initialFrames = [{ num: 0 }];\n\nfunction App() {\n  const [framesPerSecond, setFramesPerSecond] = useState(1);\n  const [frames, setFrames] = useState(initialFrames);\n  const prevFrames = usePrev(frames);\n  const [activeFrame, setActiveFrame] = useState(0);\n  const prevActiveFrameNum = usePrev(activeFrame);\n  const framesNums = frames.map(elem => elem.num);\n  const framesNumsObj = {};\n  framesNums.forEach((elem) => {\n    framesNumsObj[elem] = true;\n  });\n  const [framesForPreview, setFramesForPreview] = useState(framesNumsObj);\n  const { toggleToolAction, toolAction } = useSetToolAction();\n  const { togglePenSizeAction, penSizeAction } = useSetPenSizeAction();\n  const [penSize, setPenSize] = useState(20);\n  const [primaryColor, setPrimaryColor] = useState('#000000');\n  const [secondaryColor, setSecondaryColor] = useState('#FFFFFF');\n  const [canvasScale, setCanvasScale] = useState(32);\n  const [startPos, setStartPos] = useState({ rectXBegin: null, rectYBegin: null });\n  const [curPos, setCurPos] = useState({ rectXBegin: 0, rectYBegin: 0 });\n  const [rectSize, setRectSize] = useState(getRectSize(640, canvasScale));\n  const [isOverCanvas, setIsOverCanvas] = useState(false);\n\n  const resetState = useCallback(() => {\n    setFrames(initialFrames);\n    setFramesForPreview({ 0: true });\n    setActiveFrame(0);\n    setPenSize(20);\n    togglePenSizeAction('isPenSizeAction1');\n    setCanvasScale(32);\n    toggleToolAction('isDrawAction');\n    localStorage.removeItem('appstate');\n  }, [togglePenSizeAction, toggleToolAction]);\n\n  useEffect(() => {\n    const {\n      frames: frameList,\n      framesForPreview: ffp,\n      activeFrame: activeFrameNum,\n      penSize: sizeOfPen,\n      canvasScale: scale,\n      activeToolAction: tool,\n    } = getFromStorage('appstate', {});\n\n    if (frameList) {\n      setFrames(frameList);\n    }\n\n    if (ffp) {\n      setFramesForPreview(ffp);\n    }\n\n    if (activeFrameNum) {\n      setActiveFrame(activeFrameNum);\n    }\n\n    if (sizeOfPen) {\n      setPenSize(sizeOfPen);\n      togglePenSizeAction(`isPenSizeAction${sizeOfPen / rectSize}`);\n    } else {\n      togglePenSizeAction(`isPenSizeAction${penSize / rectSize}`);\n    }\n\n    if (scale) {\n      setCanvasScale(scale);\n    }\n\n    if (tool) {\n      toggleToolAction(tool);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleUnload = useCallback(() => {\n    const activeToolAction = Object.keys(toolAction).find(key => toolAction[key]);\n\n    appendObjectToStorage('appstate', {\n      frames,\n      framesForPreview,\n      activeFrame,\n      penSize,\n      canvasScale,\n      activeToolAction,\n    });\n  }, [activeFrame, canvasScale, frames, framesForPreview, penSize, toolAction]);\n\n  useEffect(() => {\n    window.addEventListener('beforeunload', handleUnload);\n\n    return () => window.removeEventListener('beforeunload', handleUnload);\n  }, [handleUnload]);\n\n  const handleFramesChange = useCallback(newFrames => setFrames(newFrames), []);\n\n  const addNewFrame = useCallback(() => {\n    const nextFrame = frames.length;\n    const newArr = frames.slice();\n\n    newArr.push({ num: nextFrame });\n    setFrames(newArr);\n    setActiveFrame(nextFrame);\n\n    const copy = Object.assign({}, framesForPreview);\n    copy[nextFrame] = true;\n    setFramesForPreview(copy);\n  }, [frames, framesForPreview]);\n\n  const deleteFrame = useCallback((num) => {\n    let newArr = [...frames];\n\n    newArr.splice(num, 1);\n    newArr = newArr.map((elem, ind) => ({\n      ...elem,\n      num: ind,\n    }));\n\n    if (newArr.length === 0) {\n      newArr.push({ num: 0 });\n    }\n\n    if (framesForPreview[num]) {\n      const copy = Object.assign({}, framesForPreview);\n      delete copy[num];\n\n      Object.keys(copy).forEach((ind) => {\n        if (ind > num) {\n          copy[ind - 1] = copy[ind];\n          delete copy[ind];\n        }\n      });\n\n      setFrames(newArr);\n      setFramesForPreview(copy);\n      setActiveFrame(activeFrame - 1);\n    }\n  }, [activeFrame, frames, framesForPreview]);\n\n  const duplicateFrame = useCallback((num) => {\n    let newArr = [...frames];\n\n    newArr.splice(num, 0, newArr[num]);\n    newArr = newArr.map((elem, ind) => ({\n      ...elem,\n      num: ind,\n    }));\n\n    const copy = Object.assign({}, framesForPreview);\n\n    Object.keys(copy).forEach((ind) => {\n      if (ind > num) {\n        copy[+ind + 1] = copy[+ind + 2];\n        copy[+ind + 1] = true;\n      }\n    });\n    copy[num + 1] = true;\n\n    setFrames(newArr);\n    setActiveFrame(num + 1);\n    setFramesForPreview(copy);\n  }, [frames, framesForPreview]);\n\n  const addFrameToPreview = useCallback((num) => {\n    const copy = Object.assign({}, framesForPreview);\n\n    if (copy[num]) {\n      delete copy[num];\n    } else {\n      copy[num] = true;\n    }\n\n    setFramesForPreview(copy);\n  }, [framesForPreview]);\n\n  const changeColors = useCallback(() => {\n    const currentColor = primaryColor;\n    setPrimaryColor(secondaryColor);\n    setSecondaryColor(currentColor);\n  }, [primaryColor, secondaryColor]);\n\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (e.key === KeyboardEvent.PEN_SIZE_1) {\n        togglePenSizeAction('isPenSizeAction1');\n        setPenSize(rectSize);\n      }\n      if (e.key === KeyboardEvent.PEN_SIZE_2) {\n        togglePenSizeAction('isPenSizeAction2');\n        setPenSize(rectSize * 2);\n      }\n      if (e.key === KeyboardEvent.PEN_SIZE_3) {\n        togglePenSizeAction('isPenSizeAction3');\n        setPenSize(rectSize * 3);\n      }\n      if (e.key === KeyboardEvent.PEN_SIZE_4) {\n        togglePenSizeAction('isPenSizeAction4');\n        setPenSize(rectSize * 4);\n      }\n      if (e.key === KeyboardEvent.PEN_TOOL) {\n        toggleToolAction('isDrawAction');\n      }\n      if (e.key === KeyboardEvent.MIRROR_PEN_TOOL) {\n        toggleToolAction('isMirrorPenAction');\n      }\n      if (e.key === KeyboardEvent.ERASER_TOOL) {\n        toggleToolAction('isEraseAction');\n      }\n      if (e.key === KeyboardEvent.COLOR_BUCKET_TOOL) {\n        toggleToolAction('isFillColorAction');\n      }\n      if (e.key === KeyboardEvent.MAGIC_COLOR_BUCKET_TOOL) {\n        toggleToolAction('isAllPixelsSameColorAction');\n      }\n      if (e.key === KeyboardEvent.STROKE_TOOL) {\n        toggleToolAction('isStrokeAction');\n      }\n      if (e.key === KeyboardEvent.RECTANGLE_TOOL) {\n        toggleToolAction('isDrawRectangleAction');\n      }\n      if (e.key === KeyboardEvent.CIRCLE_TOOL) {\n        toggleToolAction('isDrawCircleAction');\n      }\n      if (e.key === KeyboardEvent.MOVE_TOOL) {\n        toggleToolAction('isMoveAction');\n      }\n      if (e.key === KeyboardEvent.LIGHTEN_TOOL) {\n        toggleToolAction('isLightenColorAction');\n      }\n      if (e.key === KeyboardEvent.DARKEN_TOOL) {\n        toggleToolAction('isDarkenColorAction');\n      }\n      if (e.key === KeyboardEvent.DITHERING_TOOL) {\n        toggleToolAction('isDitheringAction');\n      }\n      if (e.key === KeyboardEvent.COLOR_PICKER_TOOL) {\n        toggleToolAction('isChooseColorAction');\n      }\n      if (e.key === KeyboardEvent.FEATHER_PEN_TOOL) {\n        toggleToolAction('isPenAction');\n      }\n      if (e.key === KeyboardEvent.ADD_NEW_FRAME) {\n        addNewFrame();\n      }\n      if (e.key === 'q' && e.ctrlKey) {\n        deleteFrame(activeFrame);\n      }\n      if (e.key === 'y' && e.ctrlKey) {\n        duplicateFrame(activeFrame);\n      }\n      if (e.key === 'ArrowUp') {\n        if (activeFrame >= 1) {\n          setActiveFrame(activeFrame - 1);\n        }\n      }\n      if (e.key === 'ArrowDown') {\n        if (activeFrame < frames.length - 1) {\n          setActiveFrame(activeFrame + 1);\n        }\n      }\n      if (e.key === KeyboardEvent.CHANGE_COLORS) {\n        changeColors();\n      }\n      if (e.key === KeyboardEvent.FILL_RECTANGLE_TOOL) {\n        toggleToolAction('isDrawFillRectangleAction');\n      }\n      if (e.key === KeyboardEvent.FILL_COLOR_TOOL) {\n        toggleToolAction('isFullFillColorAction');\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [\n    activeFrame,\n    addNewFrame,\n    changeColors,\n    deleteFrame,\n    duplicateFrame,\n    frames.length,\n    rectSize,\n    togglePenSizeAction,\n    toggleToolAction,\n  ]);\n\n  const mouseUpHandler = (value) => {\n    const newArr = frames.slice();\n    newArr[activeFrame] = {\n      ...newArr[activeFrame],\n      image: value,\n    };\n\n    setFrames(newArr);\n  };\n  // useWhyDidYouUpdate('App', {\n  //   framesPerSecond,\n  //   frames,\n  //   activeFrame,\n  //   prevActiveFrame,\n  //   primaryColor,\n  //   secondaryColor,\n  //   moveEl,\n  //   moving,\n  //   relativeClientY,\n  //   movingFrameNum,\n  //   clone,\n  //   canvasScale,\n  //   startPos,\n  //   curPos,\n  //   rectSize,\n  // });\n\n  const onCanvasChange = useCallback((value) => {\n    const newArr = frames.slice();\n    newArr[activeFrame] = {\n      ...newArr[activeFrame],\n      image: value,\n    };\n\n    setFrames(newArr);\n  }, [activeFrame, frames]);\n\n  return (\n    <div className=\"wrapper\">\n      <header>\n        <Link className=\"link-to-landing-page\" to=\"/\">\n        <h1>PISKEL CLONE</h1>\n        </Link>\n      </header>\n      <main>\n        <aside className=\"sidebar-left\">\n          <PenSize\n            active={penSizeAction}\n            onPenSizeAction={(e) => {\n              togglePenSizeAction(`isPenSizeAction${e.target.getAttribute('data-size')}`);\n              setPenSize(rectSize * +e.target.getAttribute('data-size'));\n            }}\n          />\n          <Tools\n            active={toolAction}\n            onDrawAction={() => {\n              toggleToolAction('isDrawAction');\n            }}\n            onFillColorAction={() => {\n              toggleToolAction('isFillColorAction');\n            }}\n            onFullFillColorAction={() => {\n              toggleToolAction('isFullFillColorAction');\n            }}\n            onEraseAction={() => {\n              toggleToolAction('isEraseAction');\n            }}\n            onStrokeAction={() => {\n              toggleToolAction('isStrokeAction');\n            }}\n            onChooseColorAction={() => {\n              toggleToolAction('isChooseColorAction');\n            }}\n            onDrawCircleAction={() => {\n              toggleToolAction('isDrawCircleAction');\n            }}\n            onDrawRectangleAction={() => {\n              toggleToolAction('isDrawRectangleAction');\n            }}\n            onDrawFillRectangleAction={() => {\n              toggleToolAction('isDrawFillRectangleAction');\n            }}\n            onMirrorPenAction={() => {\n              toggleToolAction('isMirrorPenAction');\n            }}\n            onLightenColorAction={() => {\n              toggleToolAction('isLightenColorAction');\n            }}\n            onDarkenColorAction={() => {\n              toggleToolAction('isDarkenColorAction');\n            }}\n            onMoveAction={() => {\n              toggleToolAction('isMoveAction');\n            }}\n            onDitheringAction={() => {\n              toggleToolAction('isDitheringAction');\n            }}\n            onPenAction={() => {\n              toggleToolAction('isPenAction');\n            }}\n            onAllPixelsSameColorAction={() => {\n              toggleToolAction('isAllPixelsSameColorAction');\n            }}\n            onPrimaryColorChange={e => setPrimaryColor(e.target.value)}\n            onSecondaryColorChange={e => setSecondaryColor(e.target.value)}\n            onColorChange={changeColors}\n            primaryColor={primaryColor}\n            secondaryColor={secondaryColor}\n          />\n          <FrameList\n            activeFrame={activeFrame}\n            checkedFrames={framesForPreview}\n            frames={frames}\n            onAddFrame={addNewFrame}\n            onDelete={deleteFrame}\n            onDouble={duplicateFrame}\n            onChange={handleFramesChange}\n            onFrameClick={num => setActiveFrame(num)}\n            onNumClick={addFrameToPreview}\n          />\n          <KeyboardShortcuts\n            onChange={editKey}\n            keyMap={KEYMAP}\n            keyboardMap={KeyboardEvent}\n          />\n        </aside>\n        <div className=\"content\">\n          <div className=\"top-canvas\">\n            {frames[activeFrame] && (\n              <Canvas\n                clearImage={(prevActiveFrameNum !== activeFrame)\n                || (frames[activeFrame].image !== prevFrames[prevActiveFrameNum].image)\n                }\n                width={640}\n                height={640}\n                active={toolAction}\n                imgSrc={frames[activeFrame].image}\n                name=\"top-canvas\"\n                onChange={onCanvasChange}\n                onMouseDown={(e) => {\n                  const pos = getRectCoordsFromEvent(e, canvasScale);\n\n                  setStartPos(pos);\n                  setCurPos(pos);\n                }}\n                onMouseMove={(e) => {\n                  setCurPos(getRectCoordsFromEvent(e, canvasScale));\n                }}\n                onMouseEnter={() => {\n                  setIsOverCanvas(true);\n                }}\n                onMouseLeave={() => {\n                  setIsOverCanvas(false);\n                }}\n                scale={1 / (canvasScale / 32)}\n              >\n                {toolAction.isDrawAction && (\n                  <PixelPen\n                    onMouseUp={mouseUpHandler}\n                    primaryColor={primaryColor}\n                    secondaryColor={secondaryColor}\n                    x={curPos.rectXBegin}\n                    y={curPos.rectYBegin}\n                    width={penSize}\n                    height={penSize}\n                  />\n                )}\n                {toolAction.isEraseAction && (\n                  <EraseAction\n                    onMouseUp={mouseUpHandler}\n                    x={curPos.rectXBegin}\n                    y={curPos.rectYBegin}\n                    width={penSize}\n                    height={penSize}\n                  />\n                )}\n                {toolAction.isStrokeAction && (\n                  <Stroke\n                    onMouseUp={mouseUpHandler}\n                    // primaryColor={primaryColor}\n                    // secondaryColor={secondaryColor}\n                    currentColor={primaryColor}\n                    canvasScale={canvasScale}\n                    x={startPos.rectXBegin}\n                    y={startPos.rectYBegin}\n                    rectSize={penSize}\n                  />\n                )}\n                {toolAction.isDrawCircleAction && (\n                  <DrawCircle\n                    onMouseUp={mouseUpHandler}\n                    currentColor={primaryColor}\n                    canvasScale={canvasScale}\n                    x={startPos.rectXBegin}\n                    y={startPos.rectYBegin}\n                    rectSize={penSize}\n                  />\n                )}\n                {toolAction.isDrawRectangleAction && (\n                  <DrawRectangle\n                    onMouseUp={mouseUpHandler}\n                    currentColor={primaryColor}\n                    canvasScale={canvasScale}\n                    x={startPos.rectXBegin}\n                    y={startPos.rectYBegin}\n                    rectSize={penSize}\n                  />\n                )}\n                {toolAction.isDrawFillRectangleAction && (\n                  <DrawFillRectangle\n                    onMouseUp={mouseUpHandler}\n                    primaryColor={primaryColor}\n                    secondaryColor={secondaryColor}\n                    // currentColor={primaryColor}\n                    canvasScale={canvasScale}\n                    x={startPos.rectXBegin}\n                    y={startPos.rectYBegin}\n                    rectSize={penSize}\n                  />\n                )}\n                {toolAction.isMirrorPenAction && (\n                  <VerticalMirrorPen\n                    onMouseUp={mouseUpHandler}\n                    currentColor={primaryColor}\n                    x={curPos.rectXBegin}\n                    y={curPos.rectYBegin}\n                    width={penSize}\n                    height={penSize}\n                  />\n                )}\n                {toolAction.isPenAction && (\n                  <Pen\n                    onMouseUp={mouseUpHandler}\n                    penSize={penSize}\n                    currentColor={primaryColor}\n                  />\n                )}\n                {toolAction.isFillColorAction && (\n                  <FillColor\n                    onMouseUp={mouseUpHandler}\n                    currentColor={primaryColor}\n                  />\n                )}\n                {toolAction.isFullFillColorAction && (\n                  <FullFillColor\n                    onMouseUp={mouseUpHandler}\n                    currentColor={primaryColor}\n                  />\n                )}\n                {toolAction.isChooseColorAction && (\n                  <ChooseColor\n                    onMouseUp={value => setPrimaryColor(value)}\n                  />\n                )}\n                {toolAction.isLightenColorAction && (\n                  <LightenColor\n                    onMouseUp={mouseUpHandler}\n                    canvasScale={canvasScale}\n                    penSize={penSize}\n                  />\n                )}\n                {toolAction.isDarkenColorAction && (\n                  <DarkenColor\n                    onMouseUp={mouseUpHandler}\n                    canvasScale={canvasScale}\n                    penSize={penSize}\n                  />\n                )}\n                {toolAction.isMoveAction && (\n                  <MoveAction\n                    onMouseUp={mouseUpHandler}\n                    image={frames[activeFrame].image}\n                  />\n                )}\n                {toolAction.isDitheringAction && (\n                  <DitheringAction\n                    onMouseUp={mouseUpHandler}\n                    primaryColor={primaryColor}\n                    secondaryColor={secondaryColor}\n                    image={frames[activeFrame].image}\n                    x={curPos.rectXBegin}\n                    y={curPos.rectYBegin}\n                    penSize={penSize}\n                    column={getCursorPosition(\n                      curPos.rectXBegin,\n                      curPos.rectYBegin,\n                      canvasScale,\n                    ).column\n                    }\n                    row={getCursorPosition(curPos.rectXBegin, curPos.rectYBegin, canvasScale).row}\n                  />\n                )}\n                {toolAction.isAllPixelsSameColorAction && (\n                  <AllPixelsSameColorAction\n                    onMouseUp={mouseUpHandler}\n                    currentColor={primaryColor}\n                  />\n                )}\n              </Canvas>\n            )}\n          </div>\n        </div>\n        <aside className=\"sidebar-right\">\n          <Preview\n            frames={frames.filter(elem => framesForPreview[elem.num])}\n            framesPerSecond={framesPerSecond}\n            onFullScreenShow={el => el.requestFullscreen()}\n          />\n          <FPS onChange={value => setFramesPerSecond(value)} />\n          <Export\n            onPNGExport={() => {\n              const link = document.createElement('a');\n              link.setAttribute('href', frames[activeFrame].image);\n              link.setAttribute('download', 'canvasImage');\n              link.click();\n            }}\n            onPNGSetExport={() => {\n              const imageSources = frames.filter(elem => framesForPreview[elem.num]).map(elem => elem.image);\n              const link = document.createElement('a');\n              imageSources.forEach((imgSrc) => {\n                link.setAttribute('href', imgSrc);\n                link.setAttribute('download', 'canvasImage');\n                link.click();\n              });\n            }}\n            onGIFExport={async () => {\n              const imageSources = frames.filter(elem => framesForPreview[elem.num]).map(elem => elem.image);\n              const gif = new GIF({\n                width: 640,\n                height: 640,\n              });\n              const canvas = document.createElement('canvas');\n              canvas.width = 640;\n              canvas.height = 640;\n              const ctx = canvas.getContext('2d');\n\n              ctx.fillStyle = '#fff';\n\n              const images = await loadImages(imageSources);\n\n              images.forEach((imgEl) => {\n                ctx.fillRect(0, 0, 640, 640);\n                ctx.drawImage(imgEl, 0, 0);\n                gif.addFrame(ctx, { copy: true, delay: 1000 / framesPerSecond });\n              });\n\n              gif.on('finished', (blob) => {\n                download(URL.createObjectURL(blob), 'New Piskel');\n              });\n\n              gif.render();\n            }}\n            onAPNGExport={async () => {\n              const imageSources = frames.filter(elem => framesForPreview[elem.num]).map(elem => elem.image);\n              const canvas = document.createElement('canvas');\n              canvas.width = 640;\n              canvas.height = 640;\n              const ctx = canvas.getContext('2d');\n\n              ctx.fillStyle = '#fff';\n\n              const images = await loadImages(imageSources);\n              const imagesBuffer = images.map((img) => {\n                ctx.fillRect(0, 0, 640, 640);\n                ctx.drawImage(img, 0, 0);\n\n                const imageData = ctx.getImageData(0, 0, 640, 640);\n\n                return imageData.data.buffer;\n              });\n\n              const pngBuffer = UPNG.encode(imagesBuffer, 640, 640, 0, imagesBuffer.map(() => 1000 / framesPerSecond));\n              const blob = new Blob([pngBuffer], { type: 'image/png' });\n              const imageUrl = URL.createObjectURL(blob);\n\n              download(imageUrl, 'Piskel.png');\n            }}\n            onResetClick={resetState}\n          />\n          <CanvasScale\n            onChange={(e) => {\n              const scale = +e.target.value;\n              const deltaScale = scale / canvasScale;\n\n              setCanvasScale(scale);\n              setRectSize(getRectSize(640, scale));\n              setPenSize(penSize / deltaScale);\n            }}\n            options={scales}\n            value={canvasScale}\n          />\n          <CursorPosition\n            isOverCanvas={isOverCanvas}\n            x={getCursorPosition(curPos.rectXBegin, curPos.rectYBegin, canvasScale).column + 1}\n            y={Math.min(getCursorPosition(curPos.rectXBegin, curPos.rectYBegin, canvasScale).row + 1, canvasScale)}\n          />\n        </aside>\n      </main>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport './landingPage.css';\nimport screenshot from './img/screenshot.png';\nimport man from './img/man.gif';\nimport smile from './img/smile.gif';\nimport sun from './img/sun.gif';\n\nfunction LandingPage() {\n  return (\n    <div className=\"landing-page__wrapper\">\n      <header>\n        <h1>PISKEL CLONE</h1>\n      </header>\n      <main className=\"container\">\n        <div className=\"screenshot__wrapper\">\n          <img className=\"screenshot\" src={screenshot} alt=\"piskel clone\" />\n          <div className=\"screenshot__description\">PISKEL CLONE is an editor for animated sprites and pixel art</div>\n          <button className=\"link-to-editor\"><Link to=\"/draw\">Create Sprite</Link></button>\n        </div>\n        <div className=\"animation__wrapper\">\n          <h3 className=\"animation__title\">EXAMPLE SPRITES</h3>\n          <div className=\"animation__example-wrapper\">\n            <div className=\"animation__example animation__example-1\">\n              <img src={man} alt=\"animation example\" />\n            </div>\n            <div className=\"animation__example animation__example-2\">\n              <img src={smile} alt=\"animation example\" />\n            </div>\n            <div className=\"animation__example animation__example-3\">\n              <img src={sun} alt=\"animation example\" />\n            </div>\n          </div>\n        </div>\n        <div className=\"functionality\">\n          <ul className=\"functionality__list\">\n            <li className=\"functionality__header\"><span>TOOLS</span></li>\n            <li>Pen</li>\n            <li>Eraser</li>\n            <li>Full color bucket</li>\n            <li>Paint all pixels at the same color</li>\n            <li>Line</li>\n            <li>Ellipse (hold SHIFT to draw circle)</li>\n            <li>Rectangle</li>\n            <li>Filled rectangle</li>\n            <li>Lighten color</li>\n            <li>Darken color</li>\n            <li>Dithering</li>\n            <li>Vertical mirror pen (hold SHIFT to use horizontal mirror pen)</li>\n            <li>Color picker</li>\n            <li>Feather pen</li>\n            <li>Changing primary and secondary colors</li>\n          </ul>\n          <ul className=\"functionality__list\">\n            <li className=\"functionality__header\"><span>FRAME MANAGEMENT</span></li>\n            <li>Ability to add/delete a frame</li>\n            <li>Ability to reorder a frame via Drag and Drop</li>\n            <li>Ability to duplicate a frame</li>\n            <li className=\"functionality__header\"><span>KEYBOARD SHORTCUTS</span></li>\n            <li>All actions are available via keyboard shortcuts</li>\n            <li>Modal window to change keyboard shortcuts</li>\n            <li className=\"functionality__header\"><span>PREVIEW</span></li>\n            <li>Full screen mode</li>\n            <li className=\"functionality__header\"><span>EXPORT</span></li>\n            <li>Single frame as .png</li>\n            <li>One by one frames as .png</li>\n            <li>Result as .gif</li>\n            <li>Result as .apng</li>\n            <li className=\"functionality__header\"><span>SAVING</span></li>\n            <li>Saving user session in localstorage</li>\n          </ul>\n        </div>\n      </main>\n      <footer>\n        <div className=\"author__info\">Developed by <a href=\"https://github.com/alexalizurchik\">Aleksandrina Lizurchik</a></div>\n      </footer>\n    </div>\n  );\n}\n\nexport default LandingPage;\n","import React from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\n\nimport App from './app/App';\nimport LandingPage from '../landingPage/LandingPage';\n\nconst Root = () => (\n  <Router basename={process.env.PUBLIC_URL}>\n    <Route path=\"/\" exact component={LandingPage} />\n    <Route path=\"/draw\" exact component={App} />\n  </Router>\n);\n\nexport default Root;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport Root from './components/Root';\n\nReactDOM.render(\n  <Root />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}